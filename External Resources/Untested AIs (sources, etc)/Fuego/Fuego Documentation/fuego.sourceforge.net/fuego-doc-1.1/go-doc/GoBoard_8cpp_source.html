<html>

<!-- Mirrored from fuego.sourceforge.net/fuego-doc-1.1/go-doc/GoBoard_8cpp_source.html by HTTrack Website Copier/3.x [XR&CO'2010], Wed, 25 Apr 2012 18:02:24 GMT -->
<head>
<title>Go Library: GoBoard.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head>
<body bgcolor="#ffffff">
<div class="qindex">
<a class="qindex" href="../main.html">Index</a> &nbsp;
<a class="qindex" href="index.html">Main</a> &nbsp;
<a class="qindex" href="namespaces.html">Namespaces</a> &nbsp;
<a class="qindex" href="classes.html">Classes</a> &nbsp;
<a class="qindex" href="hierarchy.html">Hierarchy</a> &nbsp;
<a class="qindex" href="annotated.html">Annotated</a> &nbsp;
<a class="qindex" href="files.html">Files</a> &nbsp;
<!--
<a class="qindex" href="namespacemembers.html">Namespace Members</a> &nbsp;>
-->
<a class="qindex" href="functions.html">Compound</a> &nbsp;
<a class="qindex" href="globals.html">Global</a> &nbsp;
<a class="qindex" href="pages.html">Pages</a> &nbsp;
</div>
<!-- Generated by Doxygen 1.7.1 -->
  <div class="navpath">
    <ul>
      <li><a class="el" href="dir_9632b5034bf30c45b537da76f0b0ae3d.html">go</a>      </li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<h1>GoBoard.cpp</h1>  </div>
</div>
<div class="contents">
<a href="GoBoard_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">//----------------------------------------------------------------------------</span><span class="comment"></span>
<a name="l00002"></a>00002 <span class="comment">/** @file GoBoard.cpp</span>
<a name="l00003"></a>00003 <span class="comment">    See GoBoard.h */</span>
<a name="l00004"></a>00004 <span class="comment">//----------------------------------------------------------------------------</span>
<a name="l00005"></a>00005 
<a name="l00006"></a>00006 <span class="preprocessor">#include &quot;<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgSystem_8h.html">SgSystem.h</a>&quot;</span>
<a name="l00007"></a>00007 <span class="preprocessor">#include &quot;<a class="code" href="GoBoard_8h.html" title="Go board with basic board and blocks.">GoBoard.h</a>&quot;</span>
<a name="l00008"></a>00008 
<a name="l00009"></a>00009 <span class="preprocessor">#include &lt;boost/static_assert.hpp&gt;</span>
<a name="l00010"></a>00010 <span class="preprocessor">#include &lt;algorithm&gt;</span>
<a name="l00011"></a>00011 <span class="preprocessor">#include &quot;<a class="code" href="GoInit_8h.html" title="Initialization of module Go.">GoInit.h</a>&quot;</span>
<a name="l00012"></a>00012 <span class="preprocessor">#include &quot;<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgNbIterator_8h.html">SgNbIterator.h</a>&quot;</span>
<a name="l00013"></a>00013 <span class="preprocessor">#include &quot;<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgStack_8h.html">SgStack.h</a>&quot;</span>
<a name="l00014"></a>00014 
<a name="l00015"></a>00015 <span class="keyword">using namespace </span>std;
<a name="l00016"></a>00016 
<a name="l00017"></a>00017 <span class="comment">//----------------------------------------------------------------------------</span>
<a name="l00018"></a>00018 
<a name="l00019"></a>00019 <span class="keyword">namespace </span>{
<a name="l00020"></a>00020 <span class="comment"></span>
<a name="l00021"></a>00021 <span class="comment">/** Do a consistency check.</span>
<a name="l00022"></a>00022 <span class="comment">    Check some data structures for consistency after and before each play</span>
<a name="l00023"></a>00023 <span class="comment">    and undo (and at some other places).</span>
<a name="l00024"></a>00024 <span class="comment">    This is an expensive check and therefore has to be enabled at compile</span>
<a name="l00025"></a>00025 <span class="comment">    time. */</span>
<a name="l00026"></a>00026 <span class="keyword">const</span> <span class="keywordtype">bool</span> CONSISTENCY = <span class="keyword">false</span>;
<a name="l00027"></a>00027 
<a name="l00028"></a>00028 <span class="keywordtype">void</span> UpdateChanges(<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a49c23409e7e51c1edc053b56d3dd248c">SgPoint</a> p, <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArrayList.html">SgArrayList&lt;SgPoint,SG_MAXPOINT&gt;</a>&amp; changes,
<a name="l00029"></a>00029                    <span class="keywordtype">int</span>&amp; nuChanges)
<a name="l00030"></a>00030 {
<a name="l00031"></a>00031     <span class="keywordflow">if</span> (! changes.<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArrayList.html#a99e2f2efe551689a396d5702e7899f23">Exclude</a>(p))
<a name="l00032"></a>00032         changes.<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArrayList.html#a4e7298e5120e06581fcdeba3f5a81295">PushBack</a>(p);
<a name="l00033"></a>00033     ++nuChanges;
<a name="l00034"></a>00034 }
<a name="l00035"></a>00035 
<a name="l00036"></a>00036 } <span class="comment">// namespace</span>
<a name="l00037"></a>00037 
<a name="l00038"></a>00038 <span class="comment">//----------------------------------------------------------------------------</span>
<a name="l00039"></a>00039 
<a name="l00040"></a><a class="code" href="classGoBoard.html#a868c78ed013f8229a1c95bec26632516">00040</a> <a class="code" href="classGoBoard.html#a868c78ed013f8229a1c95bec26632516">GoBoard::GoBoard</a>(<span class="keywordtype">int</span> size, <span class="keyword">const</span> <a class="code" href="classGoSetup.html" title="Setup information for start position in GoBoard.">GoSetup</a>&amp; setup, <span class="keyword">const</span> <a class="code" href="classGoRules.html" title="Parameters describing game rules and handicap.">GoRules</a>&amp; rules)
<a name="l00041"></a>00041     : m_snapshot(new <a class="code" href="structGoBoard_1_1Snapshot.html">Snapshot</a>()),
<a name="l00042"></a>00042       m_const(size),
<a name="l00043"></a>00043       m_blockList(new <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArrayList.html">SgArrayList</a>&lt;<a class="code" href="classGoBoard_1_1Block.html" title="Data related to a block of stones on the board.">Block</a>,<a class="code" href="GoBoard_8h.html#accfde8d2c95d56051afaae5e35ebade9" title="Maximum number of moves in game.">GO_MAX_NUM_MOVES</a>&gt;()),
<a name="l00044"></a>00044       m_moves(new <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArrayList.html">SgArrayList</a>&lt;<a class="code" href="structGoBoard_1_1StackEntry.html" title="Information to undo a move.">StackEntry</a>,<a class="code" href="GoBoard_8h.html#accfde8d2c95d56051afaae5e35ebade9" title="Maximum number of moves in game.">GO_MAX_NUM_MOVES</a>&gt;())
<a name="l00045"></a>00045 
<a name="l00046"></a>00046 {
<a name="l00047"></a>00047     <a class="code" href="GoInit_8cpp.html#a8a04249f069cde82271bc325e28e1772">GoInitCheck</a>();
<a name="l00048"></a>00048     <a class="code" href="classGoBoard.html#aa10fa1ed0a1666f064058751347437d7" title="Re-initializes the board with new size.">Init</a>(size, rules, setup);
<a name="l00049"></a>00049 }
<a name="l00050"></a>00050 
<a name="l00051"></a><a class="code" href="classGoBoard.html#aaf0dd0083a04863ded00f7a30735b4c5">00051</a> <a class="code" href="classGoBoard.html#aaf0dd0083a04863ded00f7a30735b4c5">GoBoard::~GoBoard</a>()
<a name="l00052"></a>00052 {
<a name="l00053"></a>00053     <span class="keyword">delete</span> <a class="code" href="classGoBoard.html#a0656b6f91327e51539fb09aee43716c1" title="Block data (stored in a stack).">m_blockList</a>;
<a name="l00054"></a>00054     <a class="code" href="classGoBoard.html#a0656b6f91327e51539fb09aee43716c1" title="Block data (stored in a stack).">m_blockList</a> = 0;
<a name="l00055"></a>00055     <span class="keyword">delete</span> <a class="code" href="classGoBoard.html#a222faf237e7f509e5cc8e58adb8607d2">m_moves</a>;
<a name="l00056"></a>00056     <a class="code" href="classGoBoard.html#a222faf237e7f509e5cc8e58adb8607d2">m_moves</a> = 0;
<a name="l00057"></a>00057 }
<a name="l00058"></a>00058 
<a name="l00059"></a><a class="code" href="classGoBoard.html#a1ebebb504e470488697449e224299c80">00059</a> <span class="keywordtype">void</span> <a class="code" href="classGoBoard.html#a1ebebb504e470488697449e224299c80" title="Checks whether all the board data structures are in a consistent state.">GoBoard::CheckConsistency</a>()<span class="keyword"> const</span>
<a name="l00060"></a>00060 <span class="keyword"></span>{
<a name="l00061"></a>00061     <span class="keywordflow">if</span> (! CONSISTENCY)
<a name="l00062"></a>00062         <span class="keywordflow">return</span>;
<a name="l00063"></a>00063     <span class="keywordtype">int</span> numberBlack = 0;
<a name="l00064"></a>00064     <span class="keywordtype">int</span> numberWhite = 0;
<a name="l00065"></a>00065     <span class="keywordflow">for</span> (<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a49c23409e7e51c1edc053b56d3dd248c">SgPoint</a> p = 0; p &lt; <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a26cdacdd8fefb18273b76eb1c0a00a18">SG_MAXPOINT</a>; ++p)
<a name="l00066"></a>00066     {
<a name="l00067"></a>00067         <span class="keywordflow">if</span> (<a class="code" href="classGoBoard.html#a839f4ad17024871f3568d58a850b4860">IsBorder</a>(p))
<a name="l00068"></a>00068             <span class="keywordflow">continue</span>;
<a name="l00069"></a>00069         <span class="keywordtype">int</span> c = <a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#ada6f5802c8d808bea3be63ec224a3e8a" title="The current board position.">m_color</a>[p];
<a name="l00070"></a>00070         <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgBoardColor_8h.html#abac952eaf914485d39aed33a25d2916a">SG_ASSERT_EBW</a>(c);
<a name="l00071"></a>00071         <span class="keywordtype">int</span> n = 0;
<a name="l00072"></a>00072         <span class="keywordflow">for</span> (<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgNb4Iterator.html">SgNb4Iterator</a> it(p); it; ++it)
<a name="l00073"></a>00073             <span class="keywordflow">if</span> (<a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#ada6f5802c8d808bea3be63ec224a3e8a" title="The current board position.">m_color</a>[*it] == <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgBoardColor_8h.html#afcd4fcc69c2fd33d72fc27f201cca3ab">SG_EMPTY</a>)
<a name="l00074"></a>00074                 ++n;
<a name="l00075"></a>00075         <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgSystem_8h.html#a558b618265a6c7bf8eed5bd947f3a64f">SG_ASSERT</a>(n == <a class="code" href="classGoBoard.html#acacfcecab06dc865f5a5ebe211deda28">NumEmptyNeighbors</a>(p));
<a name="l00076"></a>00076         n = 0;
<a name="l00077"></a>00077         <span class="keywordflow">for</span> (<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgNb4Iterator.html">SgNb4Iterator</a> it(p); it; ++it)
<a name="l00078"></a>00078             <span class="keywordflow">if</span> (<a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#ada6f5802c8d808bea3be63ec224a3e8a" title="The current board position.">m_color</a>[*it] == <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgBlackWhite_8h.html#a455e66a4a6ccc0a446eb2d10814c93a5">SG_BLACK</a>)
<a name="l00079"></a>00079                 ++n;
<a name="l00080"></a>00080         <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgSystem_8h.html#a558b618265a6c7bf8eed5bd947f3a64f">SG_ASSERT</a>(n == <a class="code" href="classGoBoard.html#aa4d02b4432b92b11ab755b855be40c98">NumNeighbors</a>(p, <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgBlackWhite_8h.html#a455e66a4a6ccc0a446eb2d10814c93a5">SG_BLACK</a>));
<a name="l00081"></a>00081         n = 0;
<a name="l00082"></a>00082         <span class="keywordflow">for</span> (<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgNb4Iterator.html">SgNb4Iterator</a> it(p); it; ++it)
<a name="l00083"></a>00083             <span class="keywordflow">if</span> (<a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#ada6f5802c8d808bea3be63ec224a3e8a" title="The current board position.">m_color</a>[*it] == <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgBlackWhite_8h.html#ae2543fbfd95354255bd12a052598b3ac">SG_WHITE</a>)
<a name="l00084"></a>00084                 ++n;
<a name="l00085"></a>00085         <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgSystem_8h.html#a558b618265a6c7bf8eed5bd947f3a64f">SG_ASSERT</a>(n == <a class="code" href="classGoBoard.html#aa4d02b4432b92b11ab755b855be40c98">NumNeighbors</a>(p, <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgBlackWhite_8h.html#ae2543fbfd95354255bd12a052598b3ac">SG_WHITE</a>));
<a name="l00086"></a>00086         <span class="keywordflow">if</span> (c == <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgBlackWhite_8h.html#a455e66a4a6ccc0a446eb2d10814c93a5">SG_BLACK</a> || c == <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgBlackWhite_8h.html#ae2543fbfd95354255bd12a052598b3ac">SG_WHITE</a>)
<a name="l00087"></a>00087         {
<a name="l00088"></a>00088             <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgSystem_8h.html#a558b618265a6c7bf8eed5bd947f3a64f">SG_ASSERT</a>(<a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#a959e9fc3fcd5b9cad5eaeb888aa0c6da">m_all</a>[c].Contains(p));
<a name="l00089"></a>00089             <a class="code" href="classGoBoard.html#aaa782cfd788b919a229b841d7cf0c56f">CheckConsistencyBlock</a>(p);
<a name="l00090"></a>00090         }
<a name="l00091"></a>00091         <span class="keywordflow">if</span> (c == <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgBlackWhite_8h.html#a455e66a4a6ccc0a446eb2d10814c93a5">SG_BLACK</a>)
<a name="l00092"></a>00092             ++numberBlack;
<a name="l00093"></a>00093         <span class="keywordflow">if</span> (c == <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgBlackWhite_8h.html#ae2543fbfd95354255bd12a052598b3ac">SG_WHITE</a>)
<a name="l00094"></a>00094             ++numberWhite;
<a name="l00095"></a>00095         <span class="keywordflow">if</span> (c == <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgBoardColor_8h.html#afcd4fcc69c2fd33d72fc27f201cca3ab">SG_EMPTY</a>)
<a name="l00096"></a>00096             <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgSystem_8h.html#a558b618265a6c7bf8eed5bd947f3a64f">SG_ASSERT</a>(<a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#a00185ccd3db04f9e7f5dd904da6190e8">m_block</a>[p] == 0);
<a name="l00097"></a>00097     }
<a name="l00098"></a>00098     <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgSystem_8h.html#a558b618265a6c7bf8eed5bd947f3a64f">SG_ASSERT</a>(<a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#a959e9fc3fcd5b9cad5eaeb888aa0c6da">m_all</a>[<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgBlackWhite_8h.html#a455e66a4a6ccc0a446eb2d10814c93a5">SG_BLACK</a>].Size() == numberBlack);
<a name="l00099"></a>00099     <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgSystem_8h.html#a558b618265a6c7bf8eed5bd947f3a64f">SG_ASSERT</a>(<a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#a959e9fc3fcd5b9cad5eaeb888aa0c6da">m_all</a>[<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgBlackWhite_8h.html#ae2543fbfd95354255bd12a052598b3ac">SG_WHITE</a>].Size() == numberWhite);
<a name="l00100"></a>00100 }
<a name="l00101"></a>00101 
<a name="l00102"></a><a class="code" href="classGoBoard.html#aaa782cfd788b919a229b841d7cf0c56f">00102</a> <span class="keywordtype">void</span> <a class="code" href="classGoBoard.html#aaa782cfd788b919a229b841d7cf0c56f">GoBoard::CheckConsistencyBlock</a>(<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a49c23409e7e51c1edc053b56d3dd248c">SgPoint</a> point)<span class="keyword"> const</span>
<a name="l00103"></a>00103 <span class="keyword"></span>{
<a name="l00104"></a>00104     <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgSystem_8h.html#a558b618265a6c7bf8eed5bd947f3a64f">SG_ASSERT</a>(<a class="code" href="classGoBoard.html#a54a260ff19ea4d1aea4ea1209eceb09e">Occupied</a>(point));
<a name="l00105"></a>00105     <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgBlackWhite_8h.html#afd337f4ec449af4cfe657b21993d556d">SgBlackWhite</a> color = <a class="code" href="classGoBoard.html#aa0aba804365056191a491e558d4c3152">GetColor</a>(point);
<a name="l00106"></a>00106     <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArrayList.html">GoPointList</a> stones;
<a name="l00107"></a>00107     <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArrayList.html">Block::LibertyList</a> liberties;
<a name="l00108"></a>00108     <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgMarker.html">SgMarker</a> mark;
<a name="l00109"></a>00109     <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgStack.html">SgStack&lt;SgPoint,SG_MAXPOINT&gt;</a> stack;
<a name="l00110"></a>00110     stack.<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgStack.html#a96d6dc1c9a9b2dedf10e3ceb5fb2d85a">Push</a>(point);
<a name="l00111"></a>00111     <span class="keywordflow">while</span> (! stack.<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgStack.html#a895f59e9317c624826f6fc5de35e958b">IsEmpty</a>())
<a name="l00112"></a>00112     {
<a name="l00113"></a>00113         <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a49c23409e7e51c1edc053b56d3dd248c">SgPoint</a> p = stack.<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgStack.html#a76e712efd859df9923a2d25a77d04238">Pop</a>();
<a name="l00114"></a>00114         <span class="keywordflow">if</span> (<a class="code" href="classGoBoard.html#a839f4ad17024871f3568d58a850b4860">IsBorder</a>(p) || ! mark.<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgMarker.html#acdb6f08dbdf604f8b337855c4d5b2970">NewMark</a>(p))
<a name="l00115"></a>00115             <span class="keywordflow">continue</span>;
<a name="l00116"></a>00116         <span class="keywordflow">if</span> (<a class="code" href="classGoBoard.html#aa0aba804365056191a491e558d4c3152">GetColor</a>(p) == color)
<a name="l00117"></a>00117         {
<a name="l00118"></a>00118             stones.<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArrayList.html#a4e7298e5120e06581fcdeba3f5a81295">PushBack</a>(p);
<a name="l00119"></a>00119             stack.<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgStack.html#a96d6dc1c9a9b2dedf10e3ceb5fb2d85a">Push</a>(p - <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a726feea95b2c5be4029aa2ed376a33b7">SG_NS</a>);
<a name="l00120"></a>00120             stack.<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgStack.html#a96d6dc1c9a9b2dedf10e3ceb5fb2d85a">Push</a>(p - <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#afd67524077b0f6fe53c8a736b72fb4de">SG_WE</a>);
<a name="l00121"></a>00121             stack.<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgStack.html#a96d6dc1c9a9b2dedf10e3ceb5fb2d85a">Push</a>(p + <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#afd67524077b0f6fe53c8a736b72fb4de">SG_WE</a>);
<a name="l00122"></a>00122             stack.<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgStack.html#a96d6dc1c9a9b2dedf10e3ceb5fb2d85a">Push</a>(p + <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a726feea95b2c5be4029aa2ed376a33b7">SG_NS</a>);
<a name="l00123"></a>00123         }
<a name="l00124"></a>00124         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classGoBoard.html#aa0aba804365056191a491e558d4c3152">GetColor</a>(p) == <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgBoardColor_8h.html#afcd4fcc69c2fd33d72fc27f201cca3ab">SG_EMPTY</a>)
<a name="l00125"></a>00125             liberties.<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArrayList.html#a4e7298e5120e06581fcdeba3f5a81295">PushBack</a>(p);
<a name="l00126"></a>00126     }
<a name="l00127"></a>00127     <span class="keyword">const</span> <a class="code" href="classGoBoard_1_1Block.html" title="Data related to a block of stones on the board.">Block</a>* block = <a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#a00185ccd3db04f9e7f5dd904da6190e8">m_block</a>[point];
<a name="l00128"></a>00128     <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgSystem_8h.html#a159c48e508767cc286c21fe582681586">SG_DEBUG_ONLY</a>(block);
<a name="l00129"></a>00129     <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgSystem_8h.html#a558b618265a6c7bf8eed5bd947f3a64f">SG_ASSERT</a>(stones.<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArrayList.html#a2db26af96e6e0b5d515f66e9d7e097ef">Contains</a>(block-&gt;<a class="code" href="classGoBoard_1_1Block.html#acd39c77410c2bbfd0e79a89fad7f1dfa">Anchor</a>()));
<a name="l00130"></a>00130     <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgSystem_8h.html#a558b618265a6c7bf8eed5bd947f3a64f">SG_ASSERT</a>(color == block-&gt;<a class="code" href="classGoBoard_1_1Block.html#ab2e3a293d82c960429b79eb767fe4194">Color</a>());
<a name="l00131"></a>00131     <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgSystem_8h.html#a558b618265a6c7bf8eed5bd947f3a64f">SG_ASSERT</a>(stones.<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArrayList.html#a22a1d861b4fcfaa0a47a7df19ac53eb1">SameElements</a>(block-&gt;<a class="code" href="classGoBoard_1_1Block.html#a85c7a66bc16b8ea8eb2aa9b1f4c5d6b4">Stones</a>()));
<a name="l00132"></a>00132     SG_ASSERT(liberties.<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArrayList.html#a22a1d861b4fcfaa0a47a7df19ac53eb1">SameElements</a>(block-&gt;<a class="code" href="classGoBoard_1_1Block.html#a6cc859fc5e7127ed164203ce005eb612">Liberties</a>()));
<a name="l00133"></a>00133     SG_ASSERT(stones.<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArrayList.html#a1470039542aee4ce46aa9919a5199af2">Length</a>() == <a class="code" href="classGoBoard.html#ad7ee64275dfc41c9ab56a3fd18bef52a" title="Return the number of stones in the block at &amp;#39;p&amp;#39;.">NumStones</a>(point));
<a name="l00134"></a>00134 }
<a name="l00135"></a>00135 
<a name="l00136"></a><a class="code" href="classGoBoard.html#a15c6704574d8e2e0dfa8a3ef8b740def">00136</a> <span class="keywordtype">bool</span> <a class="code" href="classGoBoard.html#a15c6704574d8e2e0dfa8a3ef8b740def" title="Check if move violates Ko rule.">GoBoard::CheckKo</a>(<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgBlackWhite_8h.html#afd337f4ec449af4cfe657b21993d556d">SgBlackWhite</a> player)
<a name="l00137"></a>00137 {
<a name="l00138"></a>00138     <span class="keywordflow">if</span> (! <a class="code" href="classGoBoard.html#a2a2580c98f2a5b8d10b0334bc5128f63">FullBoardRepetition</a>())
<a name="l00139"></a>00139         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00140"></a>00140     <a class="code" href="classGoBoard.html#a8e6e8b0b62544714967078b8d6f2fde7">m_moveInfo</a>.set(<a class="code" href="GoBoard_8h.html#a2cd293b3c4ac55f647cec3614c17987cac0c7f560e15aadb3ea4d6d1f35764a91" title="The move was a repetition move.">GO_MOVEFLAG_REPETITION</a>);
<a name="l00141"></a>00141     <span class="keywordflow">if</span> (<a class="code" href="classGoBoard.html#a4c9e51963455894dfc4754f26692c059" title="Are all repetition moves legal?">AnyRepetitionAllowed</a>())
<a name="l00142"></a>00142     {
<a name="l00143"></a>00143         <span class="keywordflow">if</span> (<a class="code" href="classGoBoard.html#a112c8fd60baad172486c4ae69faa3187" title="m_koLoser can never become m_koColor.">m_koLoser</a> != <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgBoardColor_8h.html#afcd4fcc69c2fd33d72fc27f201cca3ab">SG_EMPTY</a> &amp;&amp; <a class="code" href="classGoBoard.html#a112c8fd60baad172486c4ae69faa3187" title="m_koLoser can never become m_koColor.">m_koLoser</a> != player)
<a name="l00144"></a>00144             ++<a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#aaae7723d1dfc9852522c3dd4fb4b2326" title="Number of &amp;#39;illegal&amp;#39; ko recaptures by m_koColor.">m_koLevel</a>;
<a name="l00145"></a>00145         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00146"></a>00146     }
<a name="l00147"></a>00147     <span class="keywordflow">if</span> (<a class="code" href="classGoBoard.html#a8df781f77645cf662a7689b311d86392">KoRepetitionAllowed</a>()
<a name="l00148"></a>00148         &amp;&amp; (<a class="code" href="classGoBoard.html#a112c8fd60baad172486c4ae69faa3187" title="m_koLoser can never become m_koColor.">m_koLoser</a> != player)
<a name="l00149"></a>00149         &amp;&amp; (! <a class="code" href="classGoBoard.html#a9463b5518c6e5b6f5f85a102271d7c89">m_koModifiesHash</a> || (<a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#aaae7723d1dfc9852522c3dd4fb4b2326" title="Number of &amp;#39;illegal&amp;#39; ko recaptures by m_koColor.">m_koLevel</a> &lt; <a class="code" href="classGoBoard.html#a27f76fe68da99edbd68f82852c641ba7" title="Maximum number of immediate ko recaptures for GoBoard::m_koColor.">MAX_KOLEVEL</a>))
<a name="l00150"></a>00150         &amp;&amp; (<a class="code" href="classGoBoard.html#ae662770269330b227b770a701125925c">m_koColor</a> != <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgBlackWhite_8h.html#ad46e340d4ffa744bb5011cdb21991f80">SgOppBW</a>(player)))
<a name="l00151"></a>00151     {
<a name="l00152"></a>00152         ++<a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#aaae7723d1dfc9852522c3dd4fb4b2326" title="Number of &amp;#39;illegal&amp;#39; ko recaptures by m_koColor.">m_koLevel</a>;
<a name="l00153"></a>00153         <a class="code" href="classGoBoard.html#ae662770269330b227b770a701125925c">m_koColor</a> = player;
<a name="l00154"></a>00154         <span class="keywordflow">if</span> (<a class="code" href="classGoBoard.html#a9463b5518c6e5b6f5f85a102271d7c89">m_koModifiesHash</a>)
<a name="l00155"></a>00155             <a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#ae4716b98e7aaebea7737522cf0d69a59" title="Hash code for this board position.">m_hash</a>.<a class="code" href="classGoBoard_1_1HashCode.html#a4d68045f12ae6eadd6dc84d4416ec9c6">XorWinKo</a>(<a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#aaae7723d1dfc9852522c3dd4fb4b2326" title="Number of &amp;#39;illegal&amp;#39; ko recaptures by m_koColor.">m_koLevel</a>, <a class="code" href="classGoBoard.html#ae662770269330b227b770a701125925c">m_koColor</a>);
<a name="l00156"></a>00156         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00157"></a>00157     }
<a name="l00158"></a>00158     <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00159"></a>00159 }
<a name="l00160"></a>00160 
<a name="l00161"></a><a class="code" href="classGoBoard.html#a992397809ec55146f28f2771dcb87b0c">00161</a> <span class="keywordtype">void</span> <a class="code" href="classGoBoard.html#a992397809ec55146f28f2771dcb87b0c">GoBoard::AddLibToAdjBlocks</a>(<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a49c23409e7e51c1edc053b56d3dd248c">SgPoint</a> p)
<a name="l00162"></a>00162 {
<a name="l00163"></a>00163     <span class="keywordflow">if</span> (<a class="code" href="classGoBoard.html#aa4d02b4432b92b11ab755b855be40c98">NumNeighbors</a>(p, <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgBlackWhite_8h.html#a455e66a4a6ccc0a446eb2d10814c93a5">SG_BLACK</a>) + <a class="code" href="classGoBoard.html#aa4d02b4432b92b11ab755b855be40c98">NumNeighbors</a>(p, <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgBlackWhite_8h.html#ae2543fbfd95354255bd12a052598b3ac">SG_WHITE</a>) == 0)
<a name="l00164"></a>00164         <span class="keywordflow">return</span>;
<a name="l00165"></a>00165     <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArrayList.html">SgArrayList&lt;Block*,4&gt;</a> blocks = <a class="code" href="classGoBoard.html#a0eb6dc664760e2bbce80879ebe29dd86">GetAdjacentBlocks</a>(p);
<a name="l00166"></a>00166     <span class="keywordflow">for</span> (<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArrayList.html">SgArrayList&lt;Block*,4&gt;::Iterator</a> it(blocks); it; ++it)
<a name="l00167"></a>00167     {
<a name="l00168"></a>00168         <a class="code" href="classGoBoard_1_1Block.html" title="Data related to a block of stones on the board.">Block</a>* block = *it;
<a name="l00169"></a>00169         <span class="keywordflow">if</span> (block != 0)
<a name="l00170"></a>00170             block-&gt;<a class="code" href="classGoBoard_1_1Block.html#af1aad960454ce8ccc6e2e86d650f9db6">AppendLiberty</a>(p);
<a name="l00171"></a>00171     }
<a name="l00172"></a>00172 }
<a name="l00173"></a>00173 
<a name="l00174"></a><a class="code" href="classGoBoard.html#a1a9de46f9cf5fb87149c0a0f1c334900">00174</a> <span class="keywordtype">void</span> <a class="code" href="classGoBoard.html#a992397809ec55146f28f2771dcb87b0c">GoBoard::AddLibToAdjBlocks</a>(<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a49c23409e7e51c1edc053b56d3dd248c">SgPoint</a> p, <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgBlackWhite_8h.html#afd337f4ec449af4cfe657b21993d556d">SgBlackWhite</a> c)
<a name="l00175"></a>00175 {
<a name="l00176"></a>00176     <span class="keywordflow">if</span> (<a class="code" href="classGoBoard.html#aa4d02b4432b92b11ab755b855be40c98">NumNeighbors</a>(p, c) == 0)
<a name="l00177"></a>00177         <span class="keywordflow">return</span>;
<a name="l00178"></a>00178     <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArrayList.html">SgArrayList&lt;Block*,4&gt;</a> blocks = <a class="code" href="classGoBoard.html#a0eb6dc664760e2bbce80879ebe29dd86">GetAdjacentBlocks</a>(p, c);
<a name="l00179"></a>00179     <span class="keywordflow">for</span> (<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArrayList.html">SgArrayList&lt;Block*,4&gt;::Iterator</a> it(blocks); it; ++it)
<a name="l00180"></a>00180     {
<a name="l00181"></a>00181         <a class="code" href="classGoBoard_1_1Block.html" title="Data related to a block of stones on the board.">Block</a>* block = *it;
<a name="l00182"></a>00182         <span class="keywordflow">if</span> (block != 0)
<a name="l00183"></a>00183             block-&gt;<a class="code" href="classGoBoard_1_1Block.html#af1aad960454ce8ccc6e2e86d650f9db6">AppendLiberty</a>(p);
<a name="l00184"></a>00184     }
<a name="l00185"></a>00185 }
<a name="l00186"></a>00186 
<a name="l00187"></a><a class="code" href="classGoBoard.html#a927e45ada34a55e7aa98666ef8e0f66b">00187</a> <span class="keywordtype">void</span> <a class="code" href="classGoBoard.html#a927e45ada34a55e7aa98666ef8e0f66b">GoBoard::AddStoneToBlock</a>(<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a49c23409e7e51c1edc053b56d3dd248c">SgPoint</a> p, <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgBlackWhite_8h.html#afd337f4ec449af4cfe657b21993d556d">SgBlackWhite</a> c, <a class="code" href="classGoBoard_1_1Block.html" title="Data related to a block of stones on the board.">Block</a>* block,
<a name="l00188"></a>00188                               <a class="code" href="structGoBoard_1_1StackEntry.html" title="Information to undo a move.">StackEntry</a>&amp; entry)
<a name="l00189"></a>00189 {
<a name="l00190"></a>00190     <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgSystem_8h.html#a159c48e508767cc286c21fe582681586">SG_DEBUG_ONLY</a>(c);
<a name="l00191"></a>00191     <span class="comment">// Stone already placed</span>
<a name="l00192"></a>00192     <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgSystem_8h.html#a558b618265a6c7bf8eed5bd947f3a64f">SG_ASSERT</a>(<a class="code" href="classGoBoard.html#a1d4d7a363de12249748cae5d19bf4121">IsColor</a>(p, c));
<a name="l00193"></a>00193     block-&gt;<a class="code" href="classGoBoard_1_1Block.html#a01cb7e47371d4469dba52a7259f60e62">AppendStone</a>(p);
<a name="l00194"></a>00194     entry.<a class="code" href="structGoBoard_1_1StackEntry.html#a4460b7997b858f13dd2f0cad7b2194ce">m_newLibs</a>.<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArrayList.html#a21d2cbab56be28ba17436ce4d55570a4">Clear</a>();
<a name="l00195"></a>00195     <span class="keywordflow">if</span> (<a class="code" href="classGoBoard.html#a99ac3cb812980a72bfa6e3cdc5eac50c">IsEmpty</a>(p - <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a726feea95b2c5be4029aa2ed376a33b7">SG_NS</a>) &amp;&amp; ! <a class="code" href="classGoBoard.html#a2cb39bf29225f216feb33c5b9740ae8c">IsAdjacentTo</a>(p - <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a726feea95b2c5be4029aa2ed376a33b7">SG_NS</a>, block))
<a name="l00196"></a>00196     {
<a name="l00197"></a>00197         block-&gt;<a class="code" href="classGoBoard_1_1Block.html#af1aad960454ce8ccc6e2e86d650f9db6">AppendLiberty</a>(p - <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a726feea95b2c5be4029aa2ed376a33b7">SG_NS</a>);
<a name="l00198"></a>00198         entry.<a class="code" href="structGoBoard_1_1StackEntry.html#a4460b7997b858f13dd2f0cad7b2194ce">m_newLibs</a>.<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArrayList.html#a4e7298e5120e06581fcdeba3f5a81295">PushBack</a>(p - <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a726feea95b2c5be4029aa2ed376a33b7">SG_NS</a>);
<a name="l00199"></a>00199     }
<a name="l00200"></a>00200     <span class="keywordflow">if</span> (<a class="code" href="classGoBoard.html#a99ac3cb812980a72bfa6e3cdc5eac50c">IsEmpty</a>(p - <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#afd67524077b0f6fe53c8a736b72fb4de">SG_WE</a>) &amp;&amp; ! <a class="code" href="classGoBoard.html#a2cb39bf29225f216feb33c5b9740ae8c">IsAdjacentTo</a>(p - <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#afd67524077b0f6fe53c8a736b72fb4de">SG_WE</a>, block))
<a name="l00201"></a>00201     {
<a name="l00202"></a>00202         block-&gt;<a class="code" href="classGoBoard_1_1Block.html#af1aad960454ce8ccc6e2e86d650f9db6">AppendLiberty</a>(p - <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#afd67524077b0f6fe53c8a736b72fb4de">SG_WE</a>);
<a name="l00203"></a>00203         entry.<a class="code" href="structGoBoard_1_1StackEntry.html#a4460b7997b858f13dd2f0cad7b2194ce">m_newLibs</a>.<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArrayList.html#a4e7298e5120e06581fcdeba3f5a81295">PushBack</a>(p - <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#afd67524077b0f6fe53c8a736b72fb4de">SG_WE</a>);
<a name="l00204"></a>00204     }
<a name="l00205"></a>00205     <span class="keywordflow">if</span> (<a class="code" href="classGoBoard.html#a99ac3cb812980a72bfa6e3cdc5eac50c">IsEmpty</a>(p + <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#afd67524077b0f6fe53c8a736b72fb4de">SG_WE</a>) &amp;&amp; ! <a class="code" href="classGoBoard.html#a2cb39bf29225f216feb33c5b9740ae8c">IsAdjacentTo</a>(p + <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#afd67524077b0f6fe53c8a736b72fb4de">SG_WE</a>, block))
<a name="l00206"></a>00206     {
<a name="l00207"></a>00207         block-&gt;<a class="code" href="classGoBoard_1_1Block.html#af1aad960454ce8ccc6e2e86d650f9db6">AppendLiberty</a>(p + <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#afd67524077b0f6fe53c8a736b72fb4de">SG_WE</a>);
<a name="l00208"></a>00208         entry.<a class="code" href="structGoBoard_1_1StackEntry.html#a4460b7997b858f13dd2f0cad7b2194ce">m_newLibs</a>.<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArrayList.html#a4e7298e5120e06581fcdeba3f5a81295">PushBack</a>(p + <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#afd67524077b0f6fe53c8a736b72fb4de">SG_WE</a>);
<a name="l00209"></a>00209     }
<a name="l00210"></a>00210     <span class="keywordflow">if</span> (<a class="code" href="classGoBoard.html#a99ac3cb812980a72bfa6e3cdc5eac50c">IsEmpty</a>(p + <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a726feea95b2c5be4029aa2ed376a33b7">SG_NS</a>) &amp;&amp; ! <a class="code" href="classGoBoard.html#a2cb39bf29225f216feb33c5b9740ae8c">IsAdjacentTo</a>(p + <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a726feea95b2c5be4029aa2ed376a33b7">SG_NS</a>, block))
<a name="l00211"></a>00211     {
<a name="l00212"></a>00212         block-&gt;<a class="code" href="classGoBoard_1_1Block.html#af1aad960454ce8ccc6e2e86d650f9db6">AppendLiberty</a>(p + <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a726feea95b2c5be4029aa2ed376a33b7">SG_NS</a>);
<a name="l00213"></a>00213         entry.<a class="code" href="structGoBoard_1_1StackEntry.html#a4460b7997b858f13dd2f0cad7b2194ce">m_newLibs</a>.<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArrayList.html#a4e7298e5120e06581fcdeba3f5a81295">PushBack</a>(p + <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a726feea95b2c5be4029aa2ed376a33b7">SG_NS</a>);
<a name="l00214"></a>00214     }
<a name="l00215"></a>00215     entry.<a class="code" href="structGoBoard_1_1StackEntry.html#aa887908af82a3d7f2a1d10fc40ceb1fd">m_oldAnchor</a> = block-&gt;<a class="code" href="classGoBoard_1_1Block.html#acd39c77410c2bbfd0e79a89fad7f1dfa">Anchor</a>();
<a name="l00216"></a>00216     block-&gt;<a class="code" href="classGoBoard_1_1Block.html#aecfe3f42940e5cb8efd8b79d12244532">UpdateAnchor</a>(p);
<a name="l00217"></a>00217     <a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#a00185ccd3db04f9e7f5dd904da6190e8">m_block</a>[p] = block;
<a name="l00218"></a>00218 }
<a name="l00219"></a>00219 
<a name="l00220"></a><a class="code" href="classGoBoard.html#a7b0b6d58b29c8c84fcc00d1ff4d45593">00220</a> <a class="code" href="classGoBoard_1_1Block.html" title="Data related to a block of stones on the board.">GoBoard::Block</a>&amp; <a class="code" href="classGoBoard.html#a7b0b6d58b29c8c84fcc00d1ff4d45593">GoBoard::CreateNewBlock</a>()
<a name="l00221"></a>00221 {
<a name="l00222"></a>00222     <span class="comment">// Reuse without initialization</span>
<a name="l00223"></a>00223     <a class="code" href="classGoBoard.html#a0656b6f91327e51539fb09aee43716c1" title="Block data (stored in a stack).">m_blockList</a>-&gt;<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArrayList.html#a22b487162269ba2ebc03ceaadcfaad6d">Resize</a>(<a class="code" href="classGoBoard.html#a0656b6f91327e51539fb09aee43716c1" title="Block data (stored in a stack).">m_blockList</a>-&gt;<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArrayList.html#a1470039542aee4ce46aa9919a5199af2">Length</a>() + 1);
<a name="l00224"></a>00224     <a class="code" href="classGoBoard_1_1Block.html" title="Data related to a block of stones on the board.">Block</a>&amp; block = <a class="code" href="classGoBoard.html#a0656b6f91327e51539fb09aee43716c1" title="Block data (stored in a stack).">m_blockList</a>-&gt;<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArrayList.html#ae77db0e77cc43b500ab9b4d2ac735175">Last</a>();
<a name="l00225"></a>00225     <span class="keywordflow">return</span> block;
<a name="l00226"></a>00226 }
<a name="l00227"></a>00227 
<a name="l00228"></a><a class="code" href="classGoBoard.html#a76da2676e7634d18915152f812b5f882">00228</a> <span class="keywordtype">void</span> <a class="code" href="classGoBoard.html#a76da2676e7634d18915152f812b5f882">GoBoard::CreateSingleStoneBlock</a>(<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a49c23409e7e51c1edc053b56d3dd248c">SgPoint</a> p, <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgBlackWhite_8h.html#afd337f4ec449af4cfe657b21993d556d">SgBlackWhite</a> c)
<a name="l00229"></a>00229 {
<a name="l00230"></a>00230     <span class="comment">// Stone already placed</span>
<a name="l00231"></a>00231     <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgSystem_8h.html#a558b618265a6c7bf8eed5bd947f3a64f">SG_ASSERT</a>(<a class="code" href="classGoBoard.html#a1d4d7a363de12249748cae5d19bf4121">IsColor</a>(p, c));
<a name="l00232"></a>00232     <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgSystem_8h.html#a558b618265a6c7bf8eed5bd947f3a64f">SG_ASSERT</a>(<a class="code" href="classGoBoard.html#aa4d02b4432b92b11ab755b855be40c98">NumNeighbors</a>(p, c) == 0);
<a name="l00233"></a>00233     <a class="code" href="classGoBoard_1_1Block.html" title="Data related to a block of stones on the board.">Block</a>&amp; block = <a class="code" href="classGoBoard.html#a7b0b6d58b29c8c84fcc00d1ff4d45593">CreateNewBlock</a>();
<a name="l00234"></a>00234     block.<a class="code" href="classGoBoard_1_1Block.html#a07069fb91a2bf268ff5a830c5197fb1e">Init</a>(c, p);
<a name="l00235"></a>00235     <span class="keywordflow">if</span> (<a class="code" href="classGoBoard.html#a99ac3cb812980a72bfa6e3cdc5eac50c">IsEmpty</a>(p - <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a726feea95b2c5be4029aa2ed376a33b7">SG_NS</a>))
<a name="l00236"></a>00236         block.<a class="code" href="classGoBoard_1_1Block.html#af1aad960454ce8ccc6e2e86d650f9db6">AppendLiberty</a>(p - <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a726feea95b2c5be4029aa2ed376a33b7">SG_NS</a>);
<a name="l00237"></a>00237     <span class="keywordflow">if</span> (<a class="code" href="classGoBoard.html#a99ac3cb812980a72bfa6e3cdc5eac50c">IsEmpty</a>(p - <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#afd67524077b0f6fe53c8a736b72fb4de">SG_WE</a>))
<a name="l00238"></a>00238         block.<a class="code" href="classGoBoard_1_1Block.html#af1aad960454ce8ccc6e2e86d650f9db6">AppendLiberty</a>(p - <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#afd67524077b0f6fe53c8a736b72fb4de">SG_WE</a>);
<a name="l00239"></a>00239     <span class="keywordflow">if</span> (<a class="code" href="classGoBoard.html#a99ac3cb812980a72bfa6e3cdc5eac50c">IsEmpty</a>(p + <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#afd67524077b0f6fe53c8a736b72fb4de">SG_WE</a>))
<a name="l00240"></a>00240         block.<a class="code" href="classGoBoard_1_1Block.html#af1aad960454ce8ccc6e2e86d650f9db6">AppendLiberty</a>(p + <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#afd67524077b0f6fe53c8a736b72fb4de">SG_WE</a>);
<a name="l00241"></a>00241     <span class="keywordflow">if</span> (<a class="code" href="classGoBoard.html#a99ac3cb812980a72bfa6e3cdc5eac50c">IsEmpty</a>(p + <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a726feea95b2c5be4029aa2ed376a33b7">SG_NS</a>))
<a name="l00242"></a>00242         block.<a class="code" href="classGoBoard_1_1Block.html#af1aad960454ce8ccc6e2e86d650f9db6">AppendLiberty</a>(p + <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a726feea95b2c5be4029aa2ed376a33b7">SG_NS</a>);
<a name="l00243"></a>00243     <a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#a00185ccd3db04f9e7f5dd904da6190e8">m_block</a>[p] = &amp;block;
<a name="l00244"></a>00244 }
<a name="l00245"></a>00245 
<a name="l00246"></a><a class="code" href="classGoBoard.html#a0eb6dc664760e2bbce80879ebe29dd86">00246</a> <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArrayList.html">SgArrayList&lt;GoBoard::Block*,4&gt;</a> <a class="code" href="classGoBoard.html#a0eb6dc664760e2bbce80879ebe29dd86">GoBoard::GetAdjacentBlocks</a>(<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a49c23409e7e51c1edc053b56d3dd248c">SgPoint</a> p)<span class="keyword"> const</span>
<a name="l00247"></a>00247 <span class="keyword"></span>{
<a name="l00248"></a>00248     <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArrayList.html">SgArrayList&lt;Block*,4&gt;</a> result;
<a name="l00249"></a>00249     <span class="keywordflow">if</span> (<a class="code" href="classGoBoard.html#aa4d02b4432b92b11ab755b855be40c98">NumNeighbors</a>(p, <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgBlackWhite_8h.html#a455e66a4a6ccc0a446eb2d10814c93a5">SG_BLACK</a>) &gt; 0 || <a class="code" href="classGoBoard.html#aa4d02b4432b92b11ab755b855be40c98">NumNeighbors</a>(p, <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgBlackWhite_8h.html#ae2543fbfd95354255bd12a052598b3ac">SG_WHITE</a>) &gt; 0)
<a name="l00250"></a>00250     {
<a name="l00251"></a>00251         <a class="code" href="classGoBoard_1_1Block.html" title="Data related to a block of stones on the board.">Block</a>* block;
<a name="l00252"></a>00252         <span class="keywordflow">if</span> ((block = <a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#a00185ccd3db04f9e7f5dd904da6190e8">m_block</a>[p - <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a726feea95b2c5be4029aa2ed376a33b7">SG_NS</a>]) != 0)
<a name="l00253"></a>00253             result.<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArrayList.html#a4e7298e5120e06581fcdeba3f5a81295">PushBack</a>(block);
<a name="l00254"></a>00254         <span class="keywordflow">if</span> ((block = <a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#a00185ccd3db04f9e7f5dd904da6190e8">m_block</a>[p - <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#afd67524077b0f6fe53c8a736b72fb4de">SG_WE</a>]) != 0
<a name="l00255"></a>00255             &amp;&amp; ! result.<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArrayList.html#a2db26af96e6e0b5d515f66e9d7e097ef">Contains</a>(block))
<a name="l00256"></a>00256             result.<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArrayList.html#a4e7298e5120e06581fcdeba3f5a81295">PushBack</a>(block);
<a name="l00257"></a>00257         <span class="keywordflow">if</span> ((block = <a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#a00185ccd3db04f9e7f5dd904da6190e8">m_block</a>[p + <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#afd67524077b0f6fe53c8a736b72fb4de">SG_WE</a>]) != 0
<a name="l00258"></a>00258             &amp;&amp; ! result.<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArrayList.html#a2db26af96e6e0b5d515f66e9d7e097ef">Contains</a>(block))
<a name="l00259"></a>00259             result.<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArrayList.html#a4e7298e5120e06581fcdeba3f5a81295">PushBack</a>(block);
<a name="l00260"></a>00260         <span class="keywordflow">if</span> ((block = <a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#a00185ccd3db04f9e7f5dd904da6190e8">m_block</a>[p + <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a726feea95b2c5be4029aa2ed376a33b7">SG_NS</a>]) != 0
<a name="l00261"></a>00261             &amp;&amp; ! result.<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArrayList.html#a2db26af96e6e0b5d515f66e9d7e097ef">Contains</a>(block))
<a name="l00262"></a>00262             result.<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArrayList.html#a4e7298e5120e06581fcdeba3f5a81295">PushBack</a>(block);
<a name="l00263"></a>00263     }
<a name="l00264"></a>00264     <span class="keywordflow">return</span> result;
<a name="l00265"></a>00265 }
<a name="l00266"></a>00266 
<a name="l00267"></a><a class="code" href="classGoBoard.html#ae5b14f20c0d445fec98cfdc39faa9636">00267</a> <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArrayList.html">SgArrayList&lt;GoBoard::Block*,4&gt;</a> <a class="code" href="classGoBoard.html#a0eb6dc664760e2bbce80879ebe29dd86">GoBoard::GetAdjacentBlocks</a>(<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a49c23409e7e51c1edc053b56d3dd248c">SgPoint</a> p,
<a name="l00268"></a>00268                                                           <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgBlackWhite_8h.html#afd337f4ec449af4cfe657b21993d556d">SgBlackWhite</a> c)<span class="keyword"> const</span>
<a name="l00269"></a>00269 <span class="keyword"></span>{
<a name="l00270"></a>00270     <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArrayList.html">SgArrayList&lt;Block*,4&gt;</a> result;
<a name="l00271"></a>00271     <span class="keywordflow">if</span> (<a class="code" href="classGoBoard.html#aa4d02b4432b92b11ab755b855be40c98">NumNeighbors</a>(p, c) &gt; 0)
<a name="l00272"></a>00272     {
<a name="l00273"></a>00273         <a class="code" href="classGoBoard_1_1Block.html" title="Data related to a block of stones on the board.">Block</a>* block;
<a name="l00274"></a>00274         <span class="keywordflow">if</span> (<a class="code" href="classGoBoard.html#a1d4d7a363de12249748cae5d19bf4121">IsColor</a>(p - <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a726feea95b2c5be4029aa2ed376a33b7">SG_NS</a>, c))
<a name="l00275"></a>00275             result.<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArrayList.html#a4e7298e5120e06581fcdeba3f5a81295">PushBack</a>(<a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#a00185ccd3db04f9e7f5dd904da6190e8">m_block</a>[p - <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a726feea95b2c5be4029aa2ed376a33b7">SG_NS</a>]);
<a name="l00276"></a>00276         <span class="keywordflow">if</span> (<a class="code" href="classGoBoard.html#a1d4d7a363de12249748cae5d19bf4121">IsColor</a>(p - <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#afd67524077b0f6fe53c8a736b72fb4de">SG_WE</a>, c)
<a name="l00277"></a>00277             &amp;&amp; ! result.<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArrayList.html#a2db26af96e6e0b5d515f66e9d7e097ef">Contains</a>((block = <a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#a00185ccd3db04f9e7f5dd904da6190e8">m_block</a>[p - <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#afd67524077b0f6fe53c8a736b72fb4de">SG_WE</a>])))
<a name="l00278"></a>00278             result.<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArrayList.html#a4e7298e5120e06581fcdeba3f5a81295">PushBack</a>(block);
<a name="l00279"></a>00279         <span class="keywordflow">if</span> (<a class="code" href="classGoBoard.html#a1d4d7a363de12249748cae5d19bf4121">IsColor</a>(p + <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#afd67524077b0f6fe53c8a736b72fb4de">SG_WE</a>, c)
<a name="l00280"></a>00280             &amp;&amp; ! result.<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArrayList.html#a2db26af96e6e0b5d515f66e9d7e097ef">Contains</a>((block = <a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#a00185ccd3db04f9e7f5dd904da6190e8">m_block</a>[p + <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#afd67524077b0f6fe53c8a736b72fb4de">SG_WE</a>])))
<a name="l00281"></a>00281             result.<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArrayList.html#a4e7298e5120e06581fcdeba3f5a81295">PushBack</a>(block);
<a name="l00282"></a>00282         <span class="keywordflow">if</span> (<a class="code" href="classGoBoard.html#a1d4d7a363de12249748cae5d19bf4121">IsColor</a>(p + <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a726feea95b2c5be4029aa2ed376a33b7">SG_NS</a>, c)
<a name="l00283"></a>00283             &amp;&amp; ! result.<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArrayList.html#a2db26af96e6e0b5d515f66e9d7e097ef">Contains</a>((block = <a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#a00185ccd3db04f9e7f5dd904da6190e8">m_block</a>[p + <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a726feea95b2c5be4029aa2ed376a33b7">SG_NS</a>])))
<a name="l00284"></a>00284             result.<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArrayList.html#a4e7298e5120e06581fcdeba3f5a81295">PushBack</a>(block);
<a name="l00285"></a>00285     }
<a name="l00286"></a>00286     <span class="keywordflow">return</span> result;
<a name="l00287"></a>00287 }
<a name="l00288"></a>00288 
<a name="l00289"></a><a class="code" href="classGoBoard.html#a2cb39bf29225f216feb33c5b9740ae8c">00289</a> <span class="keywordtype">bool</span> <a class="code" href="classGoBoard.html#a2cb39bf29225f216feb33c5b9740ae8c">GoBoard::IsAdjacentTo</a>(<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a49c23409e7e51c1edc053b56d3dd248c">SgPoint</a> p, <span class="keyword">const</span> <a class="code" href="classGoBoard_1_1Block.html" title="Data related to a block of stones on the board.">GoBoard::Block</a>* block)<span class="keyword"> const</span>
<a name="l00290"></a>00290 <span class="keyword"></span>{
<a name="l00291"></a>00291     <span class="keywordflow">return</span>   <a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#a00185ccd3db04f9e7f5dd904da6190e8">m_block</a>[p - <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a726feea95b2c5be4029aa2ed376a33b7">SG_NS</a>] == block
<a name="l00292"></a>00292           || <a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#a00185ccd3db04f9e7f5dd904da6190e8">m_block</a>[p - <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#afd67524077b0f6fe53c8a736b72fb4de">SG_WE</a>] == block
<a name="l00293"></a>00293           || <a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#a00185ccd3db04f9e7f5dd904da6190e8">m_block</a>[p + <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#afd67524077b0f6fe53c8a736b72fb4de">SG_WE</a>] == block
<a name="l00294"></a>00294           || <a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#a00185ccd3db04f9e7f5dd904da6190e8">m_block</a>[p + <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a726feea95b2c5be4029aa2ed376a33b7">SG_NS</a>] == block;
<a name="l00295"></a>00295 }
<a name="l00296"></a>00296 
<a name="l00297"></a><a class="code" href="classGoBoard.html#a71f452b60b678a2e9b00ed8d5ab2d1d7">00297</a> <span class="keywordtype">void</span> <a class="code" href="classGoBoard.html#a71f452b60b678a2e9b00ed8d5ab2d1d7">GoBoard::MergeBlocks</a>(<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a49c23409e7e51c1edc053b56d3dd248c">SgPoint</a> p, <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgBlackWhite_8h.html#afd337f4ec449af4cfe657b21993d556d">SgBlackWhite</a> c,
<a name="l00298"></a>00298                           <span class="keyword">const</span> <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArrayList.html">SgArrayList&lt;Block*,4&gt;</a>&amp; adjBlocks)
<a name="l00299"></a>00299 {
<a name="l00300"></a>00300     <span class="comment">// Stone already placed</span>
<a name="l00301"></a>00301     <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgSystem_8h.html#a558b618265a6c7bf8eed5bd947f3a64f">SG_ASSERT</a>(<a class="code" href="classGoBoard.html#a1d4d7a363de12249748cae5d19bf4121">IsColor</a>(p, c));
<a name="l00302"></a>00302     <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgSystem_8h.html#a558b618265a6c7bf8eed5bd947f3a64f">SG_ASSERT</a>(<a class="code" href="classGoBoard.html#aa4d02b4432b92b11ab755b855be40c98">NumNeighbors</a>(p, c) &gt; 1);
<a name="l00303"></a>00303     <a class="code" href="classGoBoard_1_1Block.html" title="Data related to a block of stones on the board.">Block</a>&amp; block = <a class="code" href="classGoBoard.html#a7b0b6d58b29c8c84fcc00d1ff4d45593">CreateNewBlock</a>();
<a name="l00304"></a>00304     block.<a class="code" href="classGoBoard_1_1Block.html#a07069fb91a2bf268ff5a830c5197fb1e">Init</a>(c, p);
<a name="l00305"></a>00305     <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgReserveMarker.html">SgReserveMarker</a> reserve(<a class="code" href="classGoBoard.html#a1a9b5054a866b52e014a60854f5db92e">m_marker</a>);
<a name="l00306"></a>00306     <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgSystem_8h.html#a6767f80f1f4bdf884e7f961b978d5980">SG_UNUSED</a>(reserve);
<a name="l00307"></a>00307     <a class="code" href="classGoBoard.html#a1a9b5054a866b52e014a60854f5db92e">m_marker</a>.<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgMarker.html#ab6e7541ccff2fc17734048cd09fa8ce6">Clear</a>();
<a name="l00308"></a>00308     <span class="keywordflow">for</span> (<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArrayList.html">SgArrayList&lt;Block*,4&gt;::Iterator</a> it(adjBlocks); it; ++it)
<a name="l00309"></a>00309     {
<a name="l00310"></a>00310         <a class="code" href="classGoBoard_1_1Block.html" title="Data related to a block of stones on the board.">Block</a>* adjBlock = *it;
<a name="l00311"></a>00311         <span class="keywordflow">for</span> (<a class="code" href="classGoBoard_1_1Block.html#a39df6bc4bff14f41d181d7e2fbcc83d1">Block::StoneIterator</a> stn(adjBlock-&gt;<a class="code" href="classGoBoard_1_1Block.html#a85c7a66bc16b8ea8eb2aa9b1f4c5d6b4">Stones</a>()); stn; ++stn)
<a name="l00312"></a>00312         {
<a name="l00313"></a>00313             block.<a class="code" href="classGoBoard_1_1Block.html#a01cb7e47371d4469dba52a7259f60e62">AppendStone</a>(*stn);
<a name="l00314"></a>00314             <a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#a00185ccd3db04f9e7f5dd904da6190e8">m_block</a>[*stn] = &amp;block;
<a name="l00315"></a>00315         }
<a name="l00316"></a>00316         <span class="keywordflow">for</span> (<a class="code" href="classGoBoard_1_1Block.html#a765561fdad98268314ae2934531de0fb">Block::LibertyIterator</a> lib(adjBlock-&gt;<a class="code" href="classGoBoard_1_1Block.html#a6cc859fc5e7127ed164203ce005eb612">Liberties</a>()); lib; ++lib)
<a name="l00317"></a>00317             <span class="keywordflow">if</span> (<a class="code" href="classGoBoard.html#a1a9b5054a866b52e014a60854f5db92e">m_marker</a>.<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgMarker.html#acdb6f08dbdf604f8b337855c4d5b2970">NewMark</a>(*lib))
<a name="l00318"></a>00318                 block.<a class="code" href="classGoBoard_1_1Block.html#af1aad960454ce8ccc6e2e86d650f9db6">AppendLiberty</a>(*lib);
<a name="l00319"></a>00319         block.<a class="code" href="classGoBoard_1_1Block.html#aecfe3f42940e5cb8efd8b79d12244532">UpdateAnchor</a>(adjBlock-&gt;<a class="code" href="classGoBoard_1_1Block.html#acd39c77410c2bbfd0e79a89fad7f1dfa">Anchor</a>());
<a name="l00320"></a>00320     }
<a name="l00321"></a>00321     <a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#a00185ccd3db04f9e7f5dd904da6190e8">m_block</a>[p] = &amp;block;
<a name="l00322"></a>00322     <span class="keywordflow">if</span> (<a class="code" href="classGoBoard.html#a99ac3cb812980a72bfa6e3cdc5eac50c">IsEmpty</a>(p - <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a726feea95b2c5be4029aa2ed376a33b7">SG_NS</a>) &amp;&amp; <a class="code" href="classGoBoard.html#a1a9b5054a866b52e014a60854f5db92e">m_marker</a>.<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgMarker.html#acdb6f08dbdf604f8b337855c4d5b2970">NewMark</a>(p - <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a726feea95b2c5be4029aa2ed376a33b7">SG_NS</a>))
<a name="l00323"></a>00323         block.<a class="code" href="classGoBoard_1_1Block.html#af1aad960454ce8ccc6e2e86d650f9db6">AppendLiberty</a>(p - <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a726feea95b2c5be4029aa2ed376a33b7">SG_NS</a>);
<a name="l00324"></a>00324     <span class="keywordflow">if</span> (<a class="code" href="classGoBoard.html#a99ac3cb812980a72bfa6e3cdc5eac50c">IsEmpty</a>(p - <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#afd67524077b0f6fe53c8a736b72fb4de">SG_WE</a>) &amp;&amp; <a class="code" href="classGoBoard.html#a1a9b5054a866b52e014a60854f5db92e">m_marker</a>.<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgMarker.html#acdb6f08dbdf604f8b337855c4d5b2970">NewMark</a>(p - <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#afd67524077b0f6fe53c8a736b72fb4de">SG_WE</a>))
<a name="l00325"></a>00325         block.<a class="code" href="classGoBoard_1_1Block.html#af1aad960454ce8ccc6e2e86d650f9db6">AppendLiberty</a>(p - <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#afd67524077b0f6fe53c8a736b72fb4de">SG_WE</a>);
<a name="l00326"></a>00326     <span class="keywordflow">if</span> (<a class="code" href="classGoBoard.html#a99ac3cb812980a72bfa6e3cdc5eac50c">IsEmpty</a>(p + <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#afd67524077b0f6fe53c8a736b72fb4de">SG_WE</a>) &amp;&amp; <a class="code" href="classGoBoard.html#a1a9b5054a866b52e014a60854f5db92e">m_marker</a>.<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgMarker.html#acdb6f08dbdf604f8b337855c4d5b2970">NewMark</a>(p + <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#afd67524077b0f6fe53c8a736b72fb4de">SG_WE</a>))
<a name="l00327"></a>00327         block.<a class="code" href="classGoBoard_1_1Block.html#af1aad960454ce8ccc6e2e86d650f9db6">AppendLiberty</a>(p + <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#afd67524077b0f6fe53c8a736b72fb4de">SG_WE</a>);
<a name="l00328"></a>00328     <span class="keywordflow">if</span> (<a class="code" href="classGoBoard.html#a99ac3cb812980a72bfa6e3cdc5eac50c">IsEmpty</a>(p + <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a726feea95b2c5be4029aa2ed376a33b7">SG_NS</a>) &amp;&amp; <a class="code" href="classGoBoard.html#a1a9b5054a866b52e014a60854f5db92e">m_marker</a>.<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgMarker.html#acdb6f08dbdf604f8b337855c4d5b2970">NewMark</a>(p + <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a726feea95b2c5be4029aa2ed376a33b7">SG_NS</a>))
<a name="l00329"></a>00329         block.<a class="code" href="classGoBoard_1_1Block.html#af1aad960454ce8ccc6e2e86d650f9db6">AppendLiberty</a>(p + <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a726feea95b2c5be4029aa2ed376a33b7">SG_NS</a>);
<a name="l00330"></a>00330 }
<a name="l00331"></a>00331 
<a name="l00332"></a><a class="code" href="classGoBoard.html#a4626fc54bee7e1c29ddeb212a8dfc6b0">00332</a> <span class="keywordtype">void</span> <a class="code" href="classGoBoard.html#a4626fc54bee7e1c29ddeb212a8dfc6b0">GoBoard::RemoveLibFromAdjBlocks</a>(<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a49c23409e7e51c1edc053b56d3dd248c">SgPoint</a> p, <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgBlackWhite_8h.html#afd337f4ec449af4cfe657b21993d556d">SgBlackWhite</a> c)
<a name="l00333"></a>00333 {
<a name="l00334"></a>00334     <span class="keywordflow">if</span> (<a class="code" href="classGoBoard.html#aa4d02b4432b92b11ab755b855be40c98">NumNeighbors</a>(p, c) == 0)
<a name="l00335"></a>00335         <span class="keywordflow">return</span>;
<a name="l00336"></a>00336     <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArrayList.html">SgArrayList&lt;Block*,4&gt;</a> blocks = <a class="code" href="classGoBoard.html#a0eb6dc664760e2bbce80879ebe29dd86">GetAdjacentBlocks</a>(p, c);
<a name="l00337"></a>00337     <span class="keywordflow">for</span> (<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArrayList.html">SgArrayList&lt;Block*,4&gt;::Iterator</a> it(blocks); it; ++it)
<a name="l00338"></a>00338         (*it)-&gt;ExcludeLiberty(p);
<a name="l00339"></a>00339 }
<a name="l00340"></a>00340 
<a name="l00341"></a><a class="code" href="classGoBoard.html#a3d5fc07289a980bc03e75094220fc290">00341</a> <span class="keywordtype">void</span> <a class="code" href="classGoBoard.html#a3d5fc07289a980bc03e75094220fc290">GoBoard::RestoreKill</a>(<a class="code" href="classGoBoard_1_1Block.html" title="Data related to a block of stones on the board.">Block</a>* block, <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgBlackWhite_8h.html#afd337f4ec449af4cfe657b21993d556d">SgBlackWhite</a> c)
<a name="l00342"></a>00342 {
<a name="l00343"></a>00343     <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgBlackWhite_8h.html#afd337f4ec449af4cfe657b21993d556d">SgBlackWhite</a> opp = <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgBlackWhite_8h.html#ad46e340d4ffa744bb5011cdb21991f80">SgOppBW</a>(c);
<a name="l00344"></a>00344     <span class="keywordflow">for</span> (<a class="code" href="classGoBoard_1_1Block.html#a39df6bc4bff14f41d181d7e2fbcc83d1">Block::StoneIterator</a> it(block-&gt;<a class="code" href="classGoBoard_1_1Block.html#a85c7a66bc16b8ea8eb2aa9b1f4c5d6b4">Stones</a>()); it; ++it)
<a name="l00345"></a>00345     {
<a name="l00346"></a>00346         <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a49c23409e7e51c1edc053b56d3dd248c">SgPoint</a> stn = *it;
<a name="l00347"></a>00347         <a class="code" href="classGoBoard.html#aa02e5c82b9ea92b05c9d7f23920c9874">AddStone</a>(stn, c);
<a name="l00348"></a>00348         <a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#a00185ccd3db04f9e7f5dd904da6190e8">m_block</a>[stn] = block;
<a name="l00349"></a>00349         <a class="code" href="classGoBoard.html#a4626fc54bee7e1c29ddeb212a8dfc6b0">RemoveLibFromAdjBlocks</a>(stn, opp);
<a name="l00350"></a>00350     }
<a name="l00351"></a>00351     <span class="keywordtype">int</span> nuStones = block-&gt;<a class="code" href="classGoBoard_1_1Block.html#a85c7a66bc16b8ea8eb2aa9b1f4c5d6b4">Stones</a>().<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArrayList.html#a1470039542aee4ce46aa9919a5199af2">Length</a>();
<a name="l00352"></a>00352     <a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#a4d34948e76acbb24099998185fb67df6" title="Number of stones currently on the board.">m_numStones</a>[c] += nuStones;
<a name="l00353"></a>00353     <a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#acb94f242ba7731f76aed8eeb0e731b93" title="Number of prisoners of each color.">m_prisoners</a>[c] -= nuStones;
<a name="l00354"></a>00354     <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgSystem_8h.html#a558b618265a6c7bf8eed5bd947f3a64f">SG_ASSERT</a>(<a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#acb94f242ba7731f76aed8eeb0e731b93" title="Number of prisoners of each color.">m_prisoners</a>[c] &gt;= 0);
<a name="l00355"></a>00355 }
<a name="l00356"></a>00356 
<a name="l00357"></a><a class="code" href="classGoBoard.html#acd3a0808b585802e8ec3794c8eaa2687">00357</a> <span class="keywordtype">void</span> <a class="code" href="classGoBoard.html#acd3a0808b585802e8ec3794c8eaa2687">GoBoard::UpdateBlocksAfterAddStone</a>(<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a49c23409e7e51c1edc053b56d3dd248c">SgPoint</a> p, <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgBlackWhite_8h.html#afd337f4ec449af4cfe657b21993d556d">SgBlackWhite</a> c,
<a name="l00358"></a>00358                                         <a class="code" href="structGoBoard_1_1StackEntry.html" title="Information to undo a move.">StackEntry</a>&amp; entry)
<a name="l00359"></a>00359 {
<a name="l00360"></a>00360     <span class="comment">// Stone already placed</span>
<a name="l00361"></a>00361     <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgSystem_8h.html#a558b618265a6c7bf8eed5bd947f3a64f">SG_ASSERT</a>(<a class="code" href="classGoBoard.html#a1d4d7a363de12249748cae5d19bf4121">IsColor</a>(p, c));
<a name="l00362"></a>00362     <span class="keywordflow">if</span> (<a class="code" href="classGoBoard.html#aa4d02b4432b92b11ab755b855be40c98">NumNeighbors</a>(p, c) == 0)
<a name="l00363"></a>00363     {
<a name="l00364"></a>00364         entry.<a class="code" href="structGoBoard_1_1StackEntry.html#adf74b52a278e007348432c8d3da60249">m_stoneAddedTo</a> = 0;
<a name="l00365"></a>00365         <a class="code" href="classGoBoard.html#a76da2676e7634d18915152f812b5f882">CreateSingleStoneBlock</a>(p, c);
<a name="l00366"></a>00366         entry.<a class="code" href="structGoBoard_1_1StackEntry.html#a48bcac3e43f001dc42d8bff01da491c9">m_merged</a>.<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArrayList.html#a21d2cbab56be28ba17436ce4d55570a4">Clear</a>();
<a name="l00367"></a>00367     }
<a name="l00368"></a>00368     <span class="keywordflow">else</span>
<a name="l00369"></a>00369     {
<a name="l00370"></a>00370         <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArrayList.html">SgArrayList&lt;Block*,4&gt;</a> adjBlocks = <a class="code" href="classGoBoard.html#a0eb6dc664760e2bbce80879ebe29dd86">GetAdjacentBlocks</a>(p, c);
<a name="l00371"></a>00371         <span class="keywordflow">if</span> (adjBlocks.<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArrayList.html#a1470039542aee4ce46aa9919a5199af2">Length</a>() == 1)
<a name="l00372"></a>00372         {
<a name="l00373"></a>00373             <a class="code" href="classGoBoard_1_1Block.html" title="Data related to a block of stones on the board.">Block</a>* block = adjBlocks[0];
<a name="l00374"></a>00374             <a class="code" href="classGoBoard.html#a927e45ada34a55e7aa98666ef8e0f66b">AddStoneToBlock</a>(p, c, block, entry);
<a name="l00375"></a>00375             entry.<a class="code" href="structGoBoard_1_1StackEntry.html#adf74b52a278e007348432c8d3da60249">m_stoneAddedTo</a> = block;
<a name="l00376"></a>00376         }
<a name="l00377"></a>00377         <span class="keywordflow">else</span>
<a name="l00378"></a>00378         {
<a name="l00379"></a>00379             entry.<a class="code" href="structGoBoard_1_1StackEntry.html#adf74b52a278e007348432c8d3da60249">m_stoneAddedTo</a> = 0;
<a name="l00380"></a>00380             <a class="code" href="classGoBoard.html#a71f452b60b678a2e9b00ed8d5ab2d1d7">MergeBlocks</a>(p, c, adjBlocks);
<a name="l00381"></a>00381             entry.<a class="code" href="structGoBoard_1_1StackEntry.html#a48bcac3e43f001dc42d8bff01da491c9">m_merged</a> = adjBlocks;
<a name="l00382"></a>00382         }
<a name="l00383"></a>00383     }
<a name="l00384"></a>00384 }
<a name="l00385"></a>00385 
<a name="l00386"></a><a class="code" href="classGoBoard.html#a09e1b440717cb9d9c66dc29e99bec694">00386</a> <span class="keywordtype">void</span> <a class="code" href="classGoBoard.html#a09e1b440717cb9d9c66dc29e99bec694">GoBoard::UpdateBlocksAfterUndo</a>(<span class="keyword">const</span> <a class="code" href="structGoBoard_1_1StackEntry.html" title="Information to undo a move.">StackEntry</a>&amp; entry)
<a name="l00387"></a>00387 {
<a name="l00388"></a>00388     <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a49c23409e7e51c1edc053b56d3dd248c">SgPoint</a> p = entry.<a class="code" href="structGoBoard_1_1StackEntry.html#a274396f31ada4a78997d15f31aca72d2" title="Location of the move.">m_point</a>;
<a name="l00389"></a>00389     <span class="keywordflow">if</span> (<a class="code" href="classGoBoard.html#a99aabe9f76a3d21ffa424cc64ab0b956" title="Check if point is a pass move or a coupon move, which is handled like a pass move.">IsPass</a>(p))
<a name="l00390"></a>00390         <span class="keywordflow">return</span>;
<a name="l00391"></a>00391     <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgBlackWhite_8h.html#afd337f4ec449af4cfe657b21993d556d">SgBlackWhite</a> c = entry.<a class="code" href="structGoBoard_1_1StackEntry.html#aed3155cadafbea362742b59b90416000" title="Color of the move.">m_color</a>;
<a name="l00392"></a>00392     <a class="code" href="classGoBoard_1_1Block.html" title="Data related to a block of stones on the board.">Block</a>* block = entry.<a class="code" href="structGoBoard_1_1StackEntry.html#ac1108f6416b0347335ab13643a7bdb3e">m_suicide</a>;
<a name="l00393"></a>00393     <span class="keywordflow">if</span> (block != 0)
<a name="l00394"></a>00394         <a class="code" href="classGoBoard.html#a3d5fc07289a980bc03e75094220fc290">RestoreKill</a>(block, c);
<a name="l00395"></a>00395     <a class="code" href="classGoBoard.html#a77d2565fcff51da4f2f13d488141be4f">RemoveStone</a>(p);
<a name="l00396"></a>00396     --<a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#a4d34948e76acbb24099998185fb67df6" title="Number of stones currently on the board.">m_numStones</a>[c];
<a name="l00397"></a>00397     <a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#a00185ccd3db04f9e7f5dd904da6190e8">m_block</a>[p] = 0;
<a name="l00398"></a>00398     <a class="code" href="classGoBoard_1_1Block.html" title="Data related to a block of stones on the board.">Block</a>* stoneAddedTo = entry.<a class="code" href="structGoBoard_1_1StackEntry.html#adf74b52a278e007348432c8d3da60249">m_stoneAddedTo</a>;
<a name="l00399"></a>00399     <span class="keywordflow">if</span> (stoneAddedTo != 0)
<a name="l00400"></a>00400     {
<a name="l00401"></a>00401         stoneAddedTo-&gt;<a class="code" href="classGoBoard_1_1Block.html#a3665c4b77b84e184a1e3d2f274b95b41">PopStone</a>();
<a name="l00402"></a>00402         <span class="keywordflow">for</span> (<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArrayList.html">SgArrayList&lt;SgPoint,4&gt;::Iterator</a> it(entry.<a class="code" href="structGoBoard_1_1StackEntry.html#a4460b7997b858f13dd2f0cad7b2194ce">m_newLibs</a>); it; ++it)
<a name="l00403"></a>00403             stoneAddedTo-&gt;<a class="code" href="classGoBoard_1_1Block.html#a046f63fe52f5679e3bf15edda7829647">ExcludeLiberty</a>(*it);
<a name="l00404"></a>00404         stoneAddedTo-&gt;<a class="code" href="classGoBoard_1_1Block.html#ad0596cfc269accdd03244c4ce9b74ecd">SetAnchor</a>(entry.<a class="code" href="structGoBoard_1_1StackEntry.html#aa887908af82a3d7f2a1d10fc40ceb1fd">m_oldAnchor</a>);
<a name="l00405"></a>00405     }
<a name="l00406"></a>00406     <span class="keywordflow">else</span>
<a name="l00407"></a>00407     {
<a name="l00408"></a>00408         <span class="keywordflow">for</span> (<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArrayList.html">SgArrayList&lt;Block*,4&gt;::Iterator</a> it(entry.<a class="code" href="structGoBoard_1_1StackEntry.html#a48bcac3e43f001dc42d8bff01da491c9">m_merged</a>); it; ++it)
<a name="l00409"></a>00409         {
<a name="l00410"></a>00410             <a class="code" href="classGoBoard_1_1Block.html" title="Data related to a block of stones on the board.">Block</a>* block = *it;
<a name="l00411"></a>00411             <span class="keywordflow">for</span> (<a class="code" href="classGoBoard_1_1Block.html#a39df6bc4bff14f41d181d7e2fbcc83d1">Block::StoneIterator</a> stn(block-&gt;<a class="code" href="classGoBoard_1_1Block.html#a85c7a66bc16b8ea8eb2aa9b1f4c5d6b4">Stones</a>()); stn; ++stn)
<a name="l00412"></a>00412                 <a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#a00185ccd3db04f9e7f5dd904da6190e8">m_block</a>[*stn] = block;
<a name="l00413"></a>00413         }
<a name="l00414"></a>00414         <a class="code" href="classGoBoard.html#a0656b6f91327e51539fb09aee43716c1" title="Block data (stored in a stack).">m_blockList</a>-&gt;<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArrayList.html#a9f4fc87143c566580bc313638395bf20">PopBack</a>();
<a name="l00415"></a>00415     }
<a name="l00416"></a>00416     <span class="keywordflow">for</span> (<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArrayList.html">SgArrayList&lt;Block*,4&gt;::Iterator</a> it(entry.<a class="code" href="structGoBoard_1_1StackEntry.html#a19e447ffb88fd4813c218ce030a2c511">m_killed</a>); it; ++it)
<a name="l00417"></a>00417         <a class="code" href="classGoBoard.html#a3d5fc07289a980bc03e75094220fc290">RestoreKill</a>(*it, <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgBlackWhite_8h.html#ad46e340d4ffa744bb5011cdb21991f80">SgOppBW</a>(entry.<a class="code" href="structGoBoard_1_1StackEntry.html#aed3155cadafbea362742b59b90416000" title="Color of the move.">m_color</a>));
<a name="l00418"></a>00418     <a class="code" href="classGoBoard.html#a992397809ec55146f28f2771dcb87b0c">AddLibToAdjBlocks</a>(p);
<a name="l00419"></a>00419 }
<a name="l00420"></a>00420 
<a name="l00421"></a><a class="code" href="classGoBoard.html#acf7c7562b2007048200eba524345112f">00421</a> <span class="keywordtype">void</span> <a class="code" href="classGoBoard.html#aa10fa1ed0a1666f064058751347437d7" title="Re-initializes the board with new size.">GoBoard::Init</a>(<span class="keywordtype">int</span> size, <span class="keyword">const</span> <a class="code" href="classGoRules.html" title="Parameters describing game rules and handicap.">GoRules</a>&amp; rules, <span class="keyword">const</span> <a class="code" href="classGoSetup.html" title="Setup information for start position in GoBoard.">GoSetup</a>&amp; setup)
<a name="l00422"></a>00422 {
<a name="l00423"></a>00423     <a class="code" href="classGoBoard.html#ae1744e3b0e35ead2dbb529a671aee1cf" title="Rules for this board.">m_rules</a> = rules;
<a name="l00424"></a>00424     <a class="code" href="classGoBoard.html#a53a1203ea9e5d4c75ff91b73aa9f9870" title="The current board size.">m_size</a> = size;
<a name="l00425"></a>00425     <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgSystem_8h.html#ac4c9798f217d73b924d2f530ccbc781d">SG_ASSERTRANGE</a>(<a class="code" href="classGoBoard.html#a53a1203ea9e5d4c75ff91b73aa9f9870" title="The current board size.">m_size</a>, <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a7b015fdfe3599add4d6a1c4085cd29e1">SG_MIN_SIZE</a>, <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a4a52d23a745b8b436f26a26d07ef055a">SG_MAX_SIZE</a>);
<a name="l00426"></a>00426     <a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#ae4716b98e7aaebea7737522cf0d69a59" title="Hash code for this board position.">m_hash</a>.<a class="code" href="classGoBoard_1_1HashCode.html#aa2b9a0d8603440d62879db3886d5c473">Clear</a>();
<a name="l00427"></a>00427     <a class="code" href="classGoBoard.html#a222faf237e7f509e5cc8e58adb8607d2">m_moves</a>-&gt;<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArrayList.html#a21d2cbab56be28ba17436ce4d55570a4">Clear</a>();
<a name="l00428"></a>00428     <a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#acb94f242ba7731f76aed8eeb0e731b93" title="Number of prisoners of each color.">m_prisoners</a>[<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgBlackWhite_8h.html#a455e66a4a6ccc0a446eb2d10814c93a5">SG_BLACK</a>] = 0;
<a name="l00429"></a>00429     <a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#acb94f242ba7731f76aed8eeb0e731b93" title="Number of prisoners of each color.">m_prisoners</a>[<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgBlackWhite_8h.html#ae2543fbfd95354255bd12a052598b3ac">SG_WHITE</a>] = 0;
<a name="l00430"></a>00430     <a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#a4d34948e76acbb24099998185fb67df6" title="Number of stones currently on the board.">m_numStones</a>[<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgBlackWhite_8h.html#a455e66a4a6ccc0a446eb2d10814c93a5">SG_BLACK</a>] = 0;
<a name="l00431"></a>00431     <a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#a4d34948e76acbb24099998185fb67df6" title="Number of stones currently on the board.">m_numStones</a>[<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgBlackWhite_8h.html#ae2543fbfd95354255bd12a052598b3ac">SG_WHITE</a>] = 0;
<a name="l00432"></a>00432     <a class="code" href="classGoBoard.html#a36fefa39b5cd7adb2f9cdfc7eeae7bfc" title="See CountPlay.">m_countPlay</a> = 0;
<a name="l00433"></a>00433     <a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#a9ff7cfac9857d4de2796e64d7fe3fbdf" title="Point which is currently illegal for simple Ko rule.">m_koPoint</a> = <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a76c9b1c6d30853b22ada76507686dce6">SG_NULLPOINT</a>;
<a name="l00434"></a>00434     <a class="code" href="classGoBoard.html#a13cf041e58362edd599b9bdd177375ae" title="Arbitrary repetition for both players.">m_allowAnyRepetition</a> = <span class="keyword">false</span>;
<a name="l00435"></a>00435     <a class="code" href="classGoBoard.html#ab43179b9e4f7b8ace525535c8e017da3" title="Allow take-back of ko repetition.">m_allowKoRepetition</a> = <span class="keyword">false</span>;
<a name="l00436"></a>00436     <a class="code" href="classGoBoard.html#ae662770269330b227b770a701125925c">m_koColor</a> = <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgBoardColor_8h.html#afcd4fcc69c2fd33d72fc27f201cca3ab">SG_EMPTY</a>;
<a name="l00437"></a>00437     <a class="code" href="classGoBoard.html#a112c8fd60baad172486c4ae69faa3187" title="m_koLoser can never become m_koColor.">m_koLoser</a> = <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgBoardColor_8h.html#afcd4fcc69c2fd33d72fc27f201cca3ab">SG_EMPTY</a>;
<a name="l00438"></a>00438     <a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#aaae7723d1dfc9852522c3dd4fb4b2326" title="Number of &amp;#39;illegal&amp;#39; ko recaptures by m_koColor.">m_koLevel</a> = 0;
<a name="l00439"></a>00439     <a class="code" href="classGoBoard.html#a9463b5518c6e5b6f5f85a102271d7c89">m_koModifiesHash</a> = <span class="keyword">true</span>;
<a name="l00440"></a>00440     <a class="code" href="classGoBoard.html#ae4426c69063d19884f8f9cde345b112e" title="Data that&amp;#39;s constant for this board size.">m_const</a>.<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgBoardConst.html#ac0be6db9c859ed817fb5b6c8e2eb6794">ChangeSize</a>(<a class="code" href="classGoBoard.html#a53a1203ea9e5d4c75ff91b73aa9f9870" title="The current board size.">m_size</a>);
<a name="l00441"></a>00441     <span class="keywordflow">for</span> (<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a49c23409e7e51c1edc053b56d3dd248c">SgPoint</a> p = 0; p &lt; <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a26cdacdd8fefb18273b76eb1c0a00a18">SG_MAXPOINT</a>; ++p)
<a name="l00442"></a>00442     {
<a name="l00443"></a>00443         <a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#ada6f5802c8d808bea3be63ec224a3e8a" title="The current board position.">m_color</a>[p] = <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgBoardColor_8h.html#a989216669713e4200e43f159a9fca768">SG_BORDER</a>;
<a name="l00444"></a>00444         <a class="code" href="classGoBoard.html#a89465204a25c42be9b87d78e8ba1ca83">m_isBorder</a>[p] = <span class="keyword">true</span>;
<a name="l00445"></a>00445     }
<a name="l00446"></a>00446     <a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#afb2cf38dc6ac7026e4395665796b644b" title="Flag if point has not been modified yet.">m_isFirst</a>.<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArray.html#a654905b8b1a6ff9adc7fc8f941fbe24d">Fill</a>(<span class="keyword">true</span>);
<a name="l00447"></a>00447     <a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#ac4d8b66ea60c074937f6e282137537d1" title="Flag if position is definitely new (no possibility of repetition), set to true when move is played at...">m_isNewPosition</a> = <span class="keyword">true</span>;
<a name="l00448"></a>00448     <span class="keywordflow">for</span> (<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a2dcfe0d89ac17715f2923a4d667e0faa">SgGrid</a> row = 1; row &lt;= <a class="code" href="classGoBoard.html#a53a1203ea9e5d4c75ff91b73aa9f9870" title="The current board size.">m_size</a>; ++row)
<a name="l00449"></a>00449         <span class="keywordflow">for</span> (<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a2dcfe0d89ac17715f2923a4d667e0faa">SgGrid</a> col = 1; col &lt;= <a class="code" href="classGoBoard.html#a53a1203ea9e5d4c75ff91b73aa9f9870" title="The current board size.">m_size</a>; ++col)
<a name="l00450"></a>00450         {
<a name="l00451"></a>00451             <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a49c23409e7e51c1edc053b56d3dd248c">SgPoint</a> p = <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/namespaceSgPointUtil.html#acd0bab337dbb13ea1a0a5bdc68144935">SgPointUtil::Pt</a>(col, row);
<a name="l00452"></a>00452             <a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#ada6f5802c8d808bea3be63ec224a3e8a" title="The current board position.">m_color</a>[p] = <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgBoardColor_8h.html#afcd4fcc69c2fd33d72fc27f201cca3ab">SG_EMPTY</a>;
<a name="l00453"></a>00453             <a class="code" href="classGoBoard.html#a89465204a25c42be9b87d78e8ba1ca83">m_isBorder</a>[p] = <span class="keyword">false</span>;
<a name="l00454"></a>00454         }
<a name="l00455"></a>00455     <a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#a959e9fc3fcd5b9cad5eaeb888aa0c6da">m_all</a>.<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgBWSet.html#accc3612429287f408b028ec230a2b591">Clear</a>();
<a name="l00456"></a>00456     <a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#a609510f24f90075dead8469e182d77f5">m_empty</a>.<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgPointSet.html#a48c934600ab21257fd7bee9cec6c8ac2">Clear</a>();
<a name="l00457"></a>00457     <span class="keywordflow">for</span> (<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a49c23409e7e51c1edc053b56d3dd248c">SgPoint</a> p = 0; p &lt; SG_MAXPOINT; ++p)
<a name="l00458"></a>00458     {
<a name="l00459"></a>00459         <a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#afd40b5e372648bd4c9a46d09c5ab7150" title="Number of black and white neighbors.">m_nuNeighbors</a>[<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgBlackWhite_8h.html#a455e66a4a6ccc0a446eb2d10814c93a5">SG_BLACK</a>][p] = 0;
<a name="l00460"></a>00460         <a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#afd40b5e372648bd4c9a46d09c5ab7150" title="Number of black and white neighbors.">m_nuNeighbors</a>[<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgBlackWhite_8h.html#ae2543fbfd95354255bd12a052598b3ac">SG_WHITE</a>][p] = 0;
<a name="l00461"></a>00461         <span class="keywordflow">if</span> (<a class="code" href="classGoBoard.html#a839f4ad17024871f3568d58a850b4860">IsBorder</a>(p))
<a name="l00462"></a>00462             <a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#aea0b47ba19c5116c550ad8e35417e72c" title="Number of black and white neighbors.">m_nuNeighborsEmpty</a>[p] = 4;
<a name="l00463"></a>00463         <span class="keywordflow">else</span>
<a name="l00464"></a>00464         {
<a name="l00465"></a>00465             <a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#a609510f24f90075dead8469e182d77f5">m_empty</a>.<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgPointSet.html#a1a856bc30050741b78b2ed904c862473">Include</a>(p);
<a name="l00466"></a>00466             <a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#aea0b47ba19c5116c550ad8e35417e72c" title="Number of black and white neighbors.">m_nuNeighborsEmpty</a>[p] = 0;
<a name="l00467"></a>00467             <span class="keywordflow">for</span> (<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgNb4Iterator.html">SgNb4Iterator</a> it(p); it; ++it)
<a name="l00468"></a>00468                 <span class="keywordflow">if</span> (<a class="code" href="classGoBoard.html#a99ac3cb812980a72bfa6e3cdc5eac50c">IsEmpty</a>(*it))
<a name="l00469"></a>00469                     ++<a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#aea0b47ba19c5116c550ad8e35417e72c" title="Number of black and white neighbors.">m_nuNeighborsEmpty</a>[p];
<a name="l00470"></a>00470         }
<a name="l00471"></a>00471     }
<a name="l00472"></a>00472     <a class="code" href="classGoBoard.html#a635fcc0213fbea8ec307a6cda4b3012f" title="Setup stones in the root position.">m_setup</a> = setup;
<a name="l00473"></a>00473     <span class="keywordflow">for</span> (<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgBWIterator.html">SgBWIterator</a> c; c; ++c)
<a name="l00474"></a>00474         <span class="keywordflow">for</span> (<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgSetIterator.html">SgSetIterator</a> it(setup.<a class="code" href="classGoSetup.html#af7e856aed9b58aa52a8905c6155c8d6a">m_stones</a>[*c]); it; ++it)
<a name="l00475"></a>00475         {
<a name="l00476"></a>00476             <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a49c23409e7e51c1edc053b56d3dd248c">SgPoint</a> p = *it;
<a name="l00477"></a>00477             <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgSystem_8h.html#a558b618265a6c7bf8eed5bd947f3a64f">SG_ASSERT</a>(<a class="code" href="classGoBoard.html#ab89ea31ab0667787438b678810e70062">IsValidPoint</a>(p));
<a name="l00478"></a>00478             <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgSystem_8h.html#a558b618265a6c7bf8eed5bd947f3a64f">SG_ASSERT</a>(<a class="code" href="classGoBoard.html#a99ac3cb812980a72bfa6e3cdc5eac50c">IsEmpty</a>(p));
<a name="l00479"></a>00479             <a class="code" href="classGoBoard.html#aa02e5c82b9ea92b05c9d7f23920c9874">AddStone</a>(p, *c);
<a name="l00480"></a>00480             ++<a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#a4d34948e76acbb24099998185fb67df6" title="Number of stones currently on the board.">m_numStones</a>[*c];
<a name="l00481"></a>00481             <a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#ae4716b98e7aaebea7737522cf0d69a59" title="Hash code for this board position.">m_hash</a>.<a class="code" href="classGoBoard_1_1HashCode.html#ad72fba48deb19508aca9081d7082cfac">XorStone</a>(p, *c);
<a name="l00482"></a>00482             <a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#afb2cf38dc6ac7026e4395665796b644b" title="Flag if point has not been modified yet.">m_isFirst</a>[p] = <span class="keyword">false</span>;
<a name="l00483"></a>00483         }
<a name="l00484"></a>00484     <a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#af49ee862764907dd8b80d7668c68f4fc" title="Whose turn it is to play.">m_toPlay</a> = setup.<a class="code" href="classGoSetup.html#a506b96bc16fafa4b00d338f41e7512a7">m_player</a>;
<a name="l00485"></a>00485     <a class="code" href="classGoBoard.html#a0656b6f91327e51539fb09aee43716c1" title="Block data (stored in a stack).">m_blockList</a>-&gt;<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArrayList.html#a21d2cbab56be28ba17436ce4d55570a4">Clear</a>();
<a name="l00486"></a>00486     <a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#a00185ccd3db04f9e7f5dd904da6190e8">m_block</a>.<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArray.html#a654905b8b1a6ff9adc7fc8f941fbe24d">Fill</a>(0);
<a name="l00487"></a>00487     <span class="keywordflow">for</span> (<a class="code" href="classGoBoard_1_1Iterator.html" title="Iterate through all points.">GoBoard::Iterator</a> it(*<span class="keyword">this</span>); it; ++it)
<a name="l00488"></a>00488     {
<a name="l00489"></a>00489         <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgBoardColor_8h.html#aba6c9242981dd8cd50217548ced5fc39">SgBoardColor</a> c = <a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#ada6f5802c8d808bea3be63ec224a3e8a" title="The current board position.">m_color</a>[*it];
<a name="l00490"></a>00490         <span class="keywordflow">if</span> (c != <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgBoardColor_8h.html#afcd4fcc69c2fd33d72fc27f201cca3ab">SG_EMPTY</a> &amp;&amp; <a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#a00185ccd3db04f9e7f5dd904da6190e8">m_block</a>[*it] == 0)
<a name="l00491"></a>00491         {
<a name="l00492"></a>00492             <a class="code" href="classGoBoard_1_1Block.html" title="Data related to a block of stones on the board.">GoBoard::Block</a>&amp; block = <a class="code" href="classGoBoard.html#a7b0b6d58b29c8c84fcc00d1ff4d45593">CreateNewBlock</a>();
<a name="l00493"></a>00493             <a class="code" href="classGoBoard.html#a7179b440d655f7ef7f3a22cdf388346f">InitBlock</a>(block, c, *it);
<a name="l00494"></a>00494         }
<a name="l00495"></a>00495     }
<a name="l00496"></a>00496     <a class="code" href="classGoBoard.html#a231c0837fea485da089a0619cd559708">m_snapshot</a>-&gt;m_moveNumber = -1;
<a name="l00497"></a>00497     <a class="code" href="classGoBoard.html#a1ebebb504e470488697449e224299c80" title="Checks whether all the board data structures are in a consistent state.">CheckConsistency</a>();
<a name="l00498"></a>00498 }
<a name="l00499"></a>00499 
<a name="l00500"></a><a class="code" href="classGoBoard.html#a7179b440d655f7ef7f3a22cdf388346f">00500</a> <span class="keywordtype">void</span> <a class="code" href="classGoBoard.html#a7179b440d655f7ef7f3a22cdf388346f">GoBoard::InitBlock</a>(<a class="code" href="classGoBoard_1_1Block.html" title="Data related to a block of stones on the board.">GoBoard::Block</a>&amp; block, <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgBlackWhite_8h.html#afd337f4ec449af4cfe657b21993d556d">SgBlackWhite</a> c, <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a49c23409e7e51c1edc053b56d3dd248c">SgPoint</a> anchor)
<a name="l00501"></a>00501 {
<a name="l00502"></a>00502     <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgBlackWhite_8h.html#a23033edf6e01fe4c33c74b70654ca0b1">SG_ASSERT_BW</a>(c);
<a name="l00503"></a>00503     <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArrayList.html">Block::LibertyList</a> liberties;
<a name="l00504"></a>00504     <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArrayList.html">GoPointList</a> stones;
<a name="l00505"></a>00505     <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgReserveMarker.html">SgReserveMarker</a> reserve(<a class="code" href="classGoBoard.html#a1a9b5054a866b52e014a60854f5db92e">m_marker</a>);
<a name="l00506"></a>00506     <a class="code" href="classGoBoard.html#a1a9b5054a866b52e014a60854f5db92e">m_marker</a>.<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgMarker.html#ab6e7541ccff2fc17734048cd09fa8ce6">Clear</a>();
<a name="l00507"></a>00507     <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgStack.html">SgStack&lt;SgPoint,SG_MAX_ONBOARD&gt;</a> stack;
<a name="l00508"></a>00508     stack.<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgStack.html#a96d6dc1c9a9b2dedf10e3ceb5fb2d85a">Push</a>(anchor);
<a name="l00509"></a>00509     <a class="code" href="classGoBoard.html#a1a9b5054a866b52e014a60854f5db92e">m_marker</a>.<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgMarker.html#acdb6f08dbdf604f8b337855c4d5b2970">NewMark</a>(anchor);
<a name="l00510"></a>00510     <span class="keywordflow">while</span> (! stack.<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgStack.html#a895f59e9317c624826f6fc5de35e958b">IsEmpty</a>())
<a name="l00511"></a>00511     {
<a name="l00512"></a>00512         <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a49c23409e7e51c1edc053b56d3dd248c">SgPoint</a> p = stack.<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgStack.html#a76e712efd859df9923a2d25a77d04238">Pop</a>();
<a name="l00513"></a>00513         <span class="keywordflow">if</span> (<a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#ada6f5802c8d808bea3be63ec224a3e8a" title="The current board position.">m_color</a>[p] == <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgBoardColor_8h.html#afcd4fcc69c2fd33d72fc27f201cca3ab">SG_EMPTY</a>)
<a name="l00514"></a>00514         {
<a name="l00515"></a>00515             <span class="keywordflow">if</span> (! liberties.<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArrayList.html#a2db26af96e6e0b5d515f66e9d7e097ef">Contains</a>(p))
<a name="l00516"></a>00516                 liberties.<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArrayList.html#a4e7298e5120e06581fcdeba3f5a81295">PushBack</a>(p);
<a name="l00517"></a>00517         }
<a name="l00518"></a>00518         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#ada6f5802c8d808bea3be63ec224a3e8a" title="The current board position.">m_color</a>[p] == c)
<a name="l00519"></a>00519         {
<a name="l00520"></a>00520             stones.<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArrayList.html#a4e7298e5120e06581fcdeba3f5a81295">PushBack</a>(p);
<a name="l00521"></a>00521             <a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#a00185ccd3db04f9e7f5dd904da6190e8">m_block</a>[p] = &amp;block;
<a name="l00522"></a>00522             <span class="keywordflow">for</span> (<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgNb4Iterator.html">SgNb4Iterator</a> it(p); it; ++it)
<a name="l00523"></a>00523                 <span class="keywordflow">if</span> (! <a class="code" href="classGoBoard.html#a89465204a25c42be9b87d78e8ba1ca83">m_isBorder</a>[*it] &amp;&amp; <a class="code" href="classGoBoard.html#a1a9b5054a866b52e014a60854f5db92e">m_marker</a>.<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgMarker.html#acdb6f08dbdf604f8b337855c4d5b2970">NewMark</a>(*it))
<a name="l00524"></a>00524                     stack.<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgStack.html#a96d6dc1c9a9b2dedf10e3ceb5fb2d85a">Push</a>(*it);
<a name="l00525"></a>00525         }
<a name="l00526"></a>00526     }
<a name="l00527"></a>00527     block.<a class="code" href="classGoBoard_1_1Block.html#a07069fb91a2bf268ff5a830c5197fb1e">Init</a>(c, anchor, stones, liberties);
<a name="l00528"></a>00528 }
<a name="l00529"></a>00529 
<a name="l00530"></a><a class="code" href="classGoBoard.html#a4dc82861e1c867f724bff557858f67c1">00530</a> <a class="code" href="classGoPlayerMove.html" title="Move and color of player who plays it.">GoPlayerMove</a> <a class="code" href="classGoBoard.html#a4dc82861e1c867f724bff557858f67c1" title="Return move with a certain move number.">GoBoard::Move</a>(<span class="keywordtype">int</span> i)<span class="keyword"> const</span>
<a name="l00531"></a>00531 <span class="keyword"></span>{
<a name="l00532"></a>00532     <span class="keyword">const</span> <a class="code" href="structGoBoard_1_1StackEntry.html" title="Information to undo a move.">StackEntry</a>&amp; entry = (*m_moves)[i];
<a name="l00533"></a>00533     <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a49c23409e7e51c1edc053b56d3dd248c">SgPoint</a> p = entry.<a class="code" href="structGoBoard_1_1StackEntry.html#a274396f31ada4a78997d15f31aca72d2" title="Location of the move.">m_point</a>;
<a name="l00534"></a>00534     <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgBlackWhite_8h.html#afd337f4ec449af4cfe657b21993d556d">SgBlackWhite</a> c = entry.<a class="code" href="structGoBoard_1_1StackEntry.html#aed3155cadafbea362742b59b90416000" title="Color of the move.">m_color</a>;
<a name="l00535"></a>00535     <span class="keywordflow">return</span> <a class="code" href="classGoPlayerMove.html" title="Move and color of player who plays it.">GoPlayerMove</a>(c, p);
<a name="l00536"></a>00536 }
<a name="l00537"></a>00537 
<a name="l00538"></a><a class="code" href="classGoBoard.html#aa731e33db85681af2fdc5107732f71ba">00538</a> <span class="keywordtype">bool</span> <a class="code" href="classGoBoard.html#aa731e33db85681af2fdc5107732f71ba" title="Check if sufficient space on internal stacks.">GoBoard::StackOverflowLikely</a>()<span class="keyword"> const</span>
<a name="l00539"></a>00539 <span class="keyword"></span>{
<a name="l00540"></a>00540     <span class="keywordflow">return</span> (<a class="code" href="classGoBoard.html#aafca51e49debbebb8d9a99d5f95989b2" title="Return the current number moves.">MoveNumber</a>() &gt; <a class="code" href="GoBoard_8h.html#accfde8d2c95d56051afaae5e35ebade9" title="Maximum number of moves in game.">GO_MAX_NUM_MOVES</a> - 50);
<a name="l00541"></a>00541 }
<a name="l00542"></a>00542 
<a name="l00543"></a><a class="code" href="classGoBoard.html#abbc9d296be64c6b346f3f6ff6f40e62d">00543</a> <span class="keywordtype">int</span> <a class="code" href="classGoBoard.html#abbc9d296be64c6b346f3f6ff6f40e62d" title="Get adjacent opponent blocks with a maximum number of liberties for a given block.">GoBoard::AdjacentBlocks</a>(<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a49c23409e7e51c1edc053b56d3dd248c">SgPoint</a> point, <span class="keywordtype">int</span> maxLib, <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a49c23409e7e51c1edc053b56d3dd248c">SgPoint</a> anchors[],
<a name="l00544"></a>00544                             <span class="keywordtype">int</span> maxAnchors)<span class="keyword"> const</span>
<a name="l00545"></a>00545 <span class="keyword"></span>{
<a name="l00546"></a>00546     <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgSystem_8h.html#a159c48e508767cc286c21fe582681586">SG_DEBUG_ONLY</a>(maxAnchors);
<a name="l00547"></a>00547     <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgSystem_8h.html#a558b618265a6c7bf8eed5bd947f3a64f">SG_ASSERT</a>(<a class="code" href="classGoBoard.html#a54a260ff19ea4d1aea4ea1209eceb09e">Occupied</a>(point));
<a name="l00548"></a>00548     <span class="keyword">const</span> <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgBlackWhite_8h.html#afd337f4ec449af4cfe657b21993d556d">SgBlackWhite</a> other = <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgBlackWhite_8h.html#ad46e340d4ffa744bb5011cdb21991f80">SgOppBW</a>(<a class="code" href="classGoBoard.html#a911a29198a14d7bb65f2c9504f3a410c">GetStone</a>(point));
<a name="l00549"></a>00549     <span class="keywordtype">int</span> n = 0;
<a name="l00550"></a>00550     <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgReserveMarker.html">SgReserveMarker</a> reserve(<a class="code" href="classGoBoard.html#a1a9b5054a866b52e014a60854f5db92e">m_marker</a>);
<a name="l00551"></a>00551     <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgSystem_8h.html#a6767f80f1f4bdf884e7f961b978d5980">SG_UNUSED</a>(reserve);
<a name="l00552"></a>00552     <a class="code" href="classGoBoard.html#a1a9b5054a866b52e014a60854f5db92e">m_marker</a>.<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgMarker.html#ab6e7541ccff2fc17734048cd09fa8ce6">Clear</a>();
<a name="l00553"></a>00553     <span class="keywordflow">for</span> (<a class="code" href="classGoBoard_1_1StoneIterator.html" title="Iterate through all the stones of a block.">GoBoard::StoneIterator</a> it(*<span class="keyword">this</span>, point); it; ++it)
<a name="l00554"></a>00554     {
<a name="l00555"></a>00555         <span class="keywordflow">if</span> (<a class="code" href="classGoBoard.html#aa4d02b4432b92b11ab755b855be40c98">NumNeighbors</a>(*it, other) &gt; 0)
<a name="l00556"></a>00556         {
<a name="l00557"></a>00557             <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a49c23409e7e51c1edc053b56d3dd248c">SgPoint</a> p = *it;
<a name="l00558"></a>00558             <span class="keywordflow">if</span> (<a class="code" href="classGoBoard.html#a1d4d7a363de12249748cae5d19bf4121">IsColor</a>(p - <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a726feea95b2c5be4029aa2ed376a33b7">SG_NS</a>, other)
<a name="l00559"></a>00559                 &amp;&amp; <a class="code" href="classGoBoard.html#a1a9b5054a866b52e014a60854f5db92e">m_marker</a>.<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgMarker.html#acdb6f08dbdf604f8b337855c4d5b2970">NewMark</a>(<a class="code" href="classGoBoard.html#ad82ae71592260948426920524c45a032" title="Return the smallest point of the block at a point.">Anchor</a>(p - <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a726feea95b2c5be4029aa2ed376a33b7">SG_NS</a>))
<a name="l00560"></a>00560                 &amp;&amp; <a class="code" href="classGoBoard.html#abbb80961b7ddbc0591b719523484dbca" title="Return whether block has at most n liberties.">AtMostNumLibs</a>(p - <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a726feea95b2c5be4029aa2ed376a33b7">SG_NS</a>, maxLib))
<a name="l00561"></a>00561                 anchors[n++] = <a class="code" href="classGoBoard.html#ad82ae71592260948426920524c45a032" title="Return the smallest point of the block at a point.">Anchor</a>(p - <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a726feea95b2c5be4029aa2ed376a33b7">SG_NS</a>);
<a name="l00562"></a>00562             <span class="keywordflow">if</span> (<a class="code" href="classGoBoard.html#a1d4d7a363de12249748cae5d19bf4121">IsColor</a>(p - <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#afd67524077b0f6fe53c8a736b72fb4de">SG_WE</a>, other)
<a name="l00563"></a>00563                 &amp;&amp; <a class="code" href="classGoBoard.html#a1a9b5054a866b52e014a60854f5db92e">m_marker</a>.<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgMarker.html#acdb6f08dbdf604f8b337855c4d5b2970">NewMark</a>(<a class="code" href="classGoBoard.html#ad82ae71592260948426920524c45a032" title="Return the smallest point of the block at a point.">Anchor</a>(p - <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#afd67524077b0f6fe53c8a736b72fb4de">SG_WE</a>))
<a name="l00564"></a>00564                 &amp;&amp; <a class="code" href="classGoBoard.html#abbb80961b7ddbc0591b719523484dbca" title="Return whether block has at most n liberties.">AtMostNumLibs</a>(p - <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#afd67524077b0f6fe53c8a736b72fb4de">SG_WE</a>, maxLib))
<a name="l00565"></a>00565                 anchors[n++] = <a class="code" href="classGoBoard.html#ad82ae71592260948426920524c45a032" title="Return the smallest point of the block at a point.">Anchor</a>(p - <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#afd67524077b0f6fe53c8a736b72fb4de">SG_WE</a>);
<a name="l00566"></a>00566             <span class="keywordflow">if</span> (<a class="code" href="classGoBoard.html#a1d4d7a363de12249748cae5d19bf4121">IsColor</a>(p + <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#afd67524077b0f6fe53c8a736b72fb4de">SG_WE</a>, other)
<a name="l00567"></a>00567                 &amp;&amp; <a class="code" href="classGoBoard.html#a1a9b5054a866b52e014a60854f5db92e">m_marker</a>.<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgMarker.html#acdb6f08dbdf604f8b337855c4d5b2970">NewMark</a>(<a class="code" href="classGoBoard.html#ad82ae71592260948426920524c45a032" title="Return the smallest point of the block at a point.">Anchor</a>(p + <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#afd67524077b0f6fe53c8a736b72fb4de">SG_WE</a>))
<a name="l00568"></a>00568                 &amp;&amp; <a class="code" href="classGoBoard.html#abbb80961b7ddbc0591b719523484dbca" title="Return whether block has at most n liberties.">AtMostNumLibs</a>(p + <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#afd67524077b0f6fe53c8a736b72fb4de">SG_WE</a>, maxLib))
<a name="l00569"></a>00569                 anchors[n++] = <a class="code" href="classGoBoard.html#ad82ae71592260948426920524c45a032" title="Return the smallest point of the block at a point.">Anchor</a>(p + <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#afd67524077b0f6fe53c8a736b72fb4de">SG_WE</a>);
<a name="l00570"></a>00570             <span class="keywordflow">if</span> (<a class="code" href="classGoBoard.html#a1d4d7a363de12249748cae5d19bf4121">IsColor</a>(p + <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a726feea95b2c5be4029aa2ed376a33b7">SG_NS</a>, other)
<a name="l00571"></a>00571                 &amp;&amp; <a class="code" href="classGoBoard.html#a1a9b5054a866b52e014a60854f5db92e">m_marker</a>.<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgMarker.html#acdb6f08dbdf604f8b337855c4d5b2970">NewMark</a>(<a class="code" href="classGoBoard.html#ad82ae71592260948426920524c45a032" title="Return the smallest point of the block at a point.">Anchor</a>(p + <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a726feea95b2c5be4029aa2ed376a33b7">SG_NS</a>))
<a name="l00572"></a>00572                 &amp;&amp; <a class="code" href="classGoBoard.html#abbb80961b7ddbc0591b719523484dbca" title="Return whether block has at most n liberties.">AtMostNumLibs</a>(p + <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a726feea95b2c5be4029aa2ed376a33b7">SG_NS</a>, maxLib))
<a name="l00573"></a>00573                 anchors[n++] = <a class="code" href="classGoBoard.html#ad82ae71592260948426920524c45a032" title="Return the smallest point of the block at a point.">Anchor</a>(p + <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a726feea95b2c5be4029aa2ed376a33b7">SG_NS</a>);
<a name="l00574"></a>00574         }
<a name="l00575"></a>00575     };
<a name="l00576"></a>00576     <span class="comment">// Detect array overflow.</span>
<a name="l00577"></a>00577     <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgSystem_8h.html#a558b618265a6c7bf8eed5bd947f3a64f">SG_ASSERT</a>(n &lt; maxAnchors);
<a name="l00578"></a>00578     anchors[n] = <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#ae18b6a50e32d6ccb2d18e484ceb736cf">SG_ENDPOINT</a>;
<a name="l00579"></a>00579     <span class="keywordflow">return</span> n;
<a name="l00580"></a>00580 }
<a name="l00581"></a>00581 
<a name="l00582"></a><a class="code" href="classGoBoard.html#a476929d4748d43b610d4e017d4c66077">00582</a> <span class="keywordtype">void</span> <a class="code" href="classGoBoard.html#a476929d4748d43b610d4e017d4c66077" title="List anchor of each block of color &amp;#39;c&amp;#39; adjacent to the empty point &amp;#39;p&amp;#39;.">GoBoard::NeighborBlocks</a>(<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a49c23409e7e51c1edc053b56d3dd248c">SgPoint</a> p, <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgBlackWhite_8h.html#afd337f4ec449af4cfe657b21993d556d">SgBlackWhite</a> c,
<a name="l00583"></a>00583                              <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a49c23409e7e51c1edc053b56d3dd248c">SgPoint</a> anchors[])<span class="keyword"> const</span>
<a name="l00584"></a>00584 <span class="keyword"></span>{
<a name="l00585"></a>00585     <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgSystem_8h.html#a558b618265a6c7bf8eed5bd947f3a64f">SG_ASSERT</a>(<a class="code" href="classGoBoard.html#a99ac3cb812980a72bfa6e3cdc5eac50c">IsEmpty</a>(p));
<a name="l00586"></a>00586     <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgReserveMarker.html">SgReserveMarker</a> reserve(<a class="code" href="classGoBoard.html#a1a9b5054a866b52e014a60854f5db92e">m_marker</a>);
<a name="l00587"></a>00587     <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgSystem_8h.html#a6767f80f1f4bdf884e7f961b978d5980">SG_UNUSED</a>(reserve);
<a name="l00588"></a>00588     <a class="code" href="classGoBoard.html#a1a9b5054a866b52e014a60854f5db92e">m_marker</a>.<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgMarker.html#ab6e7541ccff2fc17734048cd09fa8ce6">Clear</a>();
<a name="l00589"></a>00589     <span class="keywordtype">int</span> i = 0;
<a name="l00590"></a>00590     <span class="keywordflow">if</span> (<a class="code" href="classGoBoard.html#aa4d02b4432b92b11ab755b855be40c98">NumNeighbors</a>(p, c) &gt; 0)
<a name="l00591"></a>00591     {
<a name="l00592"></a>00592         <span class="keywordflow">if</span> (<a class="code" href="classGoBoard.html#a1d4d7a363de12249748cae5d19bf4121">IsColor</a>(p - <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a726feea95b2c5be4029aa2ed376a33b7">SG_NS</a>, c) &amp;&amp; <a class="code" href="classGoBoard.html#a1a9b5054a866b52e014a60854f5db92e">m_marker</a>.<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgMarker.html#acdb6f08dbdf604f8b337855c4d5b2970">NewMark</a>(<a class="code" href="classGoBoard.html#ad82ae71592260948426920524c45a032" title="Return the smallest point of the block at a point.">Anchor</a>(p - <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a726feea95b2c5be4029aa2ed376a33b7">SG_NS</a>)))
<a name="l00593"></a>00593             anchors[i++] = <a class="code" href="classGoBoard.html#ad82ae71592260948426920524c45a032" title="Return the smallest point of the block at a point.">Anchor</a>(p - <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a726feea95b2c5be4029aa2ed376a33b7">SG_NS</a>);
<a name="l00594"></a>00594         <span class="keywordflow">if</span> (<a class="code" href="classGoBoard.html#a1d4d7a363de12249748cae5d19bf4121">IsColor</a>(p - <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#afd67524077b0f6fe53c8a736b72fb4de">SG_WE</a>, c) &amp;&amp; <a class="code" href="classGoBoard.html#a1a9b5054a866b52e014a60854f5db92e">m_marker</a>.<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgMarker.html#acdb6f08dbdf604f8b337855c4d5b2970">NewMark</a>(<a class="code" href="classGoBoard.html#ad82ae71592260948426920524c45a032" title="Return the smallest point of the block at a point.">Anchor</a>(p - <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#afd67524077b0f6fe53c8a736b72fb4de">SG_WE</a>)))
<a name="l00595"></a>00595             anchors[i++] = <a class="code" href="classGoBoard.html#ad82ae71592260948426920524c45a032" title="Return the smallest point of the block at a point.">Anchor</a>(p - <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#afd67524077b0f6fe53c8a736b72fb4de">SG_WE</a>);
<a name="l00596"></a>00596         <span class="keywordflow">if</span> (<a class="code" href="classGoBoard.html#a1d4d7a363de12249748cae5d19bf4121">IsColor</a>(p + <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#afd67524077b0f6fe53c8a736b72fb4de">SG_WE</a>, c) &amp;&amp; <a class="code" href="classGoBoard.html#a1a9b5054a866b52e014a60854f5db92e">m_marker</a>.<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgMarker.html#acdb6f08dbdf604f8b337855c4d5b2970">NewMark</a>(<a class="code" href="classGoBoard.html#ad82ae71592260948426920524c45a032" title="Return the smallest point of the block at a point.">Anchor</a>(p + <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#afd67524077b0f6fe53c8a736b72fb4de">SG_WE</a>)))
<a name="l00597"></a>00597             anchors[i++] = <a class="code" href="classGoBoard.html#ad82ae71592260948426920524c45a032" title="Return the smallest point of the block at a point.">Anchor</a>(p + <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#afd67524077b0f6fe53c8a736b72fb4de">SG_WE</a>);
<a name="l00598"></a>00598         <span class="keywordflow">if</span> (<a class="code" href="classGoBoard.html#a1d4d7a363de12249748cae5d19bf4121">IsColor</a>(p + <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a726feea95b2c5be4029aa2ed376a33b7">SG_NS</a>, c) &amp;&amp; <a class="code" href="classGoBoard.html#a1a9b5054a866b52e014a60854f5db92e">m_marker</a>.<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgMarker.html#acdb6f08dbdf604f8b337855c4d5b2970">NewMark</a>(<a class="code" href="classGoBoard.html#ad82ae71592260948426920524c45a032" title="Return the smallest point of the block at a point.">Anchor</a>(p + <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a726feea95b2c5be4029aa2ed376a33b7">SG_NS</a>)))
<a name="l00599"></a>00599             anchors[i++] = <a class="code" href="classGoBoard.html#ad82ae71592260948426920524c45a032" title="Return the smallest point of the block at a point.">Anchor</a>(p + <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a726feea95b2c5be4029aa2ed376a33b7">SG_NS</a>);
<a name="l00600"></a>00600     }
<a name="l00601"></a>00601     anchors[i] = <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#ae18b6a50e32d6ccb2d18e484ceb736cf">SG_ENDPOINT</a>;
<a name="l00602"></a>00602 }
<a name="l00603"></a>00603 
<a name="l00604"></a><a class="code" href="classGoBoard.html#ae3396a1c3f53bc07bcd27e5894cef0d6">00604</a> <span class="keywordtype">void</span> <a class="code" href="classGoBoard.html#a476929d4748d43b610d4e017d4c66077" title="List anchor of each block of color &amp;#39;c&amp;#39; adjacent to the empty point &amp;#39;p&amp;#39;.">GoBoard::NeighborBlocks</a>(<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a49c23409e7e51c1edc053b56d3dd248c">SgPoint</a> p, <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgBlackWhite_8h.html#afd337f4ec449af4cfe657b21993d556d">SgBlackWhite</a> c, <span class="keywordtype">int</span> maxLib,
<a name="l00605"></a>00605                              <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a49c23409e7e51c1edc053b56d3dd248c">SgPoint</a> anchors[])<span class="keyword"> const</span>
<a name="l00606"></a>00606 <span class="keyword"></span>{
<a name="l00607"></a>00607     <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgSystem_8h.html#a558b618265a6c7bf8eed5bd947f3a64f">SG_ASSERT</a>(<a class="code" href="classGoBoard.html#a99ac3cb812980a72bfa6e3cdc5eac50c">IsEmpty</a>(p));
<a name="l00608"></a>00608     <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgReserveMarker.html">SgReserveMarker</a> reserve(<a class="code" href="classGoBoard.html#a1a9b5054a866b52e014a60854f5db92e">m_marker</a>);
<a name="l00609"></a>00609     <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgSystem_8h.html#a6767f80f1f4bdf884e7f961b978d5980">SG_UNUSED</a>(reserve);
<a name="l00610"></a>00610     <a class="code" href="classGoBoard.html#a1a9b5054a866b52e014a60854f5db92e">m_marker</a>.<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgMarker.html#ab6e7541ccff2fc17734048cd09fa8ce6">Clear</a>();
<a name="l00611"></a>00611     <span class="keywordtype">int</span> i = 0;
<a name="l00612"></a>00612     <span class="keywordflow">if</span> (<a class="code" href="classGoBoard.html#aa4d02b4432b92b11ab755b855be40c98">NumNeighbors</a>(p, c) &gt; 0)
<a name="l00613"></a>00613     {
<a name="l00614"></a>00614         <span class="keywordflow">if</span> (<a class="code" href="classGoBoard.html#a1d4d7a363de12249748cae5d19bf4121">IsColor</a>(p - <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a726feea95b2c5be4029aa2ed376a33b7">SG_NS</a>, c) &amp;&amp; <a class="code" href="classGoBoard.html#a1a9b5054a866b52e014a60854f5db92e">m_marker</a>.<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgMarker.html#acdb6f08dbdf604f8b337855c4d5b2970">NewMark</a>(<a class="code" href="classGoBoard.html#ad82ae71592260948426920524c45a032" title="Return the smallest point of the block at a point.">Anchor</a>(p - <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a726feea95b2c5be4029aa2ed376a33b7">SG_NS</a>))
<a name="l00615"></a>00615             &amp;&amp; <a class="code" href="classGoBoard.html#abbb80961b7ddbc0591b719523484dbca" title="Return whether block has at most n liberties.">AtMostNumLibs</a>(p - <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a726feea95b2c5be4029aa2ed376a33b7">SG_NS</a>, maxLib))
<a name="l00616"></a>00616             anchors[i++] = <a class="code" href="classGoBoard.html#ad82ae71592260948426920524c45a032" title="Return the smallest point of the block at a point.">Anchor</a>(p - <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a726feea95b2c5be4029aa2ed376a33b7">SG_NS</a>);
<a name="l00617"></a>00617         <span class="keywordflow">if</span> (<a class="code" href="classGoBoard.html#a1d4d7a363de12249748cae5d19bf4121">IsColor</a>(p - <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#afd67524077b0f6fe53c8a736b72fb4de">SG_WE</a>, c) &amp;&amp; <a class="code" href="classGoBoard.html#a1a9b5054a866b52e014a60854f5db92e">m_marker</a>.<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgMarker.html#acdb6f08dbdf604f8b337855c4d5b2970">NewMark</a>(<a class="code" href="classGoBoard.html#ad82ae71592260948426920524c45a032" title="Return the smallest point of the block at a point.">Anchor</a>(p - <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#afd67524077b0f6fe53c8a736b72fb4de">SG_WE</a>))
<a name="l00618"></a>00618             &amp;&amp; <a class="code" href="classGoBoard.html#abbb80961b7ddbc0591b719523484dbca" title="Return whether block has at most n liberties.">AtMostNumLibs</a>(p - <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#afd67524077b0f6fe53c8a736b72fb4de">SG_WE</a>, maxLib))
<a name="l00619"></a>00619             anchors[i++] = <a class="code" href="classGoBoard.html#ad82ae71592260948426920524c45a032" title="Return the smallest point of the block at a point.">Anchor</a>(p - <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#afd67524077b0f6fe53c8a736b72fb4de">SG_WE</a>);
<a name="l00620"></a>00620         <span class="keywordflow">if</span> (<a class="code" href="classGoBoard.html#a1d4d7a363de12249748cae5d19bf4121">IsColor</a>(p + <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#afd67524077b0f6fe53c8a736b72fb4de">SG_WE</a>, c) &amp;&amp; <a class="code" href="classGoBoard.html#a1a9b5054a866b52e014a60854f5db92e">m_marker</a>.<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgMarker.html#acdb6f08dbdf604f8b337855c4d5b2970">NewMark</a>(<a class="code" href="classGoBoard.html#ad82ae71592260948426920524c45a032" title="Return the smallest point of the block at a point.">Anchor</a>(p + <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#afd67524077b0f6fe53c8a736b72fb4de">SG_WE</a>))
<a name="l00621"></a>00621             &amp;&amp; <a class="code" href="classGoBoard.html#abbb80961b7ddbc0591b719523484dbca" title="Return whether block has at most n liberties.">AtMostNumLibs</a>(p + <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#afd67524077b0f6fe53c8a736b72fb4de">SG_WE</a>, maxLib))
<a name="l00622"></a>00622             anchors[i++] = <a class="code" href="classGoBoard.html#ad82ae71592260948426920524c45a032" title="Return the smallest point of the block at a point.">Anchor</a>(p + <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#afd67524077b0f6fe53c8a736b72fb4de">SG_WE</a>);
<a name="l00623"></a>00623         <span class="keywordflow">if</span> (<a class="code" href="classGoBoard.html#a1d4d7a363de12249748cae5d19bf4121">IsColor</a>(p + <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a726feea95b2c5be4029aa2ed376a33b7">SG_NS</a>, c) &amp;&amp; <a class="code" href="classGoBoard.html#a1a9b5054a866b52e014a60854f5db92e">m_marker</a>.<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgMarker.html#acdb6f08dbdf604f8b337855c4d5b2970">NewMark</a>(<a class="code" href="classGoBoard.html#ad82ae71592260948426920524c45a032" title="Return the smallest point of the block at a point.">Anchor</a>(p + <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a726feea95b2c5be4029aa2ed376a33b7">SG_NS</a>))
<a name="l00624"></a>00624             &amp;&amp; <a class="code" href="classGoBoard.html#abbb80961b7ddbc0591b719523484dbca" title="Return whether block has at most n liberties.">AtMostNumLibs</a>(p + <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a726feea95b2c5be4029aa2ed376a33b7">SG_NS</a>, maxLib))
<a name="l00625"></a>00625             anchors[i++] = <a class="code" href="classGoBoard.html#ad82ae71592260948426920524c45a032" title="Return the smallest point of the block at a point.">Anchor</a>(p + <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a726feea95b2c5be4029aa2ed376a33b7">SG_NS</a>);
<a name="l00626"></a>00626     }
<a name="l00627"></a>00627     anchors[i] = <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#ae18b6a50e32d6ccb2d18e484ceb736cf">SG_ENDPOINT</a>;
<a name="l00628"></a>00628 }
<a name="l00629"></a>00629 
<a name="l00630"></a><a class="code" href="classGoBoard.html#aa02e5c82b9ea92b05c9d7f23920c9874">00630</a> <span class="keywordtype">void</span> <a class="code" href="classGoBoard.html#aa02e5c82b9ea92b05c9d7f23920c9874">GoBoard::AddStone</a>(<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a49c23409e7e51c1edc053b56d3dd248c">SgPoint</a> p, <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgBlackWhite_8h.html#afd337f4ec449af4cfe657b21993d556d">SgBlackWhite</a> c)
<a name="l00631"></a>00631 {
<a name="l00632"></a>00632     <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgSystem_8h.html#a558b618265a6c7bf8eed5bd947f3a64f">SG_ASSERT</a>(<a class="code" href="classGoBoard.html#a99ac3cb812980a72bfa6e3cdc5eac50c">IsEmpty</a>(p));
<a name="l00633"></a>00633     <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgBlackWhite_8h.html#a23033edf6e01fe4c33c74b70654ca0b1">SG_ASSERT_BW</a>(c);
<a name="l00634"></a>00634     <a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#ada6f5802c8d808bea3be63ec224a3e8a" title="The current board position.">m_color</a>[p] = c;
<a name="l00635"></a>00635     <a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#a609510f24f90075dead8469e182d77f5">m_empty</a>.<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgPointSet.html#a31a88eac185dd2415c3a1fec00fafe71">Exclude</a>(p);
<a name="l00636"></a>00636     <a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#a959e9fc3fcd5b9cad5eaeb888aa0c6da">m_all</a>[c].Include(p);
<a name="l00637"></a>00637     --<a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#aea0b47ba19c5116c550ad8e35417e72c" title="Number of black and white neighbors.">m_nuNeighborsEmpty</a>[p - <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a726feea95b2c5be4029aa2ed376a33b7">SG_NS</a>];
<a name="l00638"></a>00638     --<a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#aea0b47ba19c5116c550ad8e35417e72c" title="Number of black and white neighbors.">m_nuNeighborsEmpty</a>[p - <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#afd67524077b0f6fe53c8a736b72fb4de">SG_WE</a>];
<a name="l00639"></a>00639     --<a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#aea0b47ba19c5116c550ad8e35417e72c" title="Number of black and white neighbors.">m_nuNeighborsEmpty</a>[p + <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#afd67524077b0f6fe53c8a736b72fb4de">SG_WE</a>];
<a name="l00640"></a>00640     --<a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#aea0b47ba19c5116c550ad8e35417e72c" title="Number of black and white neighbors.">m_nuNeighborsEmpty</a>[p + <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a726feea95b2c5be4029aa2ed376a33b7">SG_NS</a>];
<a name="l00641"></a>00641     <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArray.html">SgArray&lt;int,SG_MAXPOINT&gt;</a>&amp; nuNeighbors = <a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#afd40b5e372648bd4c9a46d09c5ab7150" title="Number of black and white neighbors.">m_nuNeighbors</a>[c];
<a name="l00642"></a>00642     ++nuNeighbors[p - <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a726feea95b2c5be4029aa2ed376a33b7">SG_NS</a>];
<a name="l00643"></a>00643     ++nuNeighbors[p - <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#afd67524077b0f6fe53c8a736b72fb4de">SG_WE</a>];
<a name="l00644"></a>00644     ++nuNeighbors[p + <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#afd67524077b0f6fe53c8a736b72fb4de">SG_WE</a>];
<a name="l00645"></a>00645     ++nuNeighbors[p + <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a726feea95b2c5be4029aa2ed376a33b7">SG_NS</a>];
<a name="l00646"></a>00646 }
<a name="l00647"></a>00647 
<a name="l00648"></a><a class="code" href="classGoBoard.html#a77d2565fcff51da4f2f13d488141be4f">00648</a> <span class="keywordtype">void</span> <a class="code" href="classGoBoard.html#a77d2565fcff51da4f2f13d488141be4f">GoBoard::RemoveStone</a>(<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a49c23409e7e51c1edc053b56d3dd248c">SgPoint</a> p)
<a name="l00649"></a>00649 {
<a name="l00650"></a>00650     <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgBlackWhite_8h.html#afd337f4ec449af4cfe657b21993d556d">SgBlackWhite</a> c = <a class="code" href="classGoBoard.html#a911a29198a14d7bb65f2c9504f3a410c">GetStone</a>(p);
<a name="l00651"></a>00651     <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgBlackWhite_8h.html#a23033edf6e01fe4c33c74b70654ca0b1">SG_ASSERT_BW</a>(c);
<a name="l00652"></a>00652     <a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#ada6f5802c8d808bea3be63ec224a3e8a" title="The current board position.">m_color</a>[p] = <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgBoardColor_8h.html#afcd4fcc69c2fd33d72fc27f201cca3ab">SG_EMPTY</a>;
<a name="l00653"></a>00653     <a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#a609510f24f90075dead8469e182d77f5">m_empty</a>.<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgPointSet.html#a1a856bc30050741b78b2ed904c862473">Include</a>(p);
<a name="l00654"></a>00654     <a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#a959e9fc3fcd5b9cad5eaeb888aa0c6da">m_all</a>[c].Exclude(p);
<a name="l00655"></a>00655     ++<a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#aea0b47ba19c5116c550ad8e35417e72c" title="Number of black and white neighbors.">m_nuNeighborsEmpty</a>[p - <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a726feea95b2c5be4029aa2ed376a33b7">SG_NS</a>];
<a name="l00656"></a>00656     ++<a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#aea0b47ba19c5116c550ad8e35417e72c" title="Number of black and white neighbors.">m_nuNeighborsEmpty</a>[p - <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#afd67524077b0f6fe53c8a736b72fb4de">SG_WE</a>];
<a name="l00657"></a>00657     ++<a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#aea0b47ba19c5116c550ad8e35417e72c" title="Number of black and white neighbors.">m_nuNeighborsEmpty</a>[p + <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#afd67524077b0f6fe53c8a736b72fb4de">SG_WE</a>];
<a name="l00658"></a>00658     ++<a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#aea0b47ba19c5116c550ad8e35417e72c" title="Number of black and white neighbors.">m_nuNeighborsEmpty</a>[p + <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a726feea95b2c5be4029aa2ed376a33b7">SG_NS</a>];
<a name="l00659"></a>00659     <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArray.html">SgArray&lt;int,SG_MAXPOINT&gt;</a>&amp; nuNeighbors = <a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#afd40b5e372648bd4c9a46d09c5ab7150" title="Number of black and white neighbors.">m_nuNeighbors</a>[c];
<a name="l00660"></a>00660     --nuNeighbors[p - <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a726feea95b2c5be4029aa2ed376a33b7">SG_NS</a>];
<a name="l00661"></a>00661     --nuNeighbors[p - <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#afd67524077b0f6fe53c8a736b72fb4de">SG_WE</a>];
<a name="l00662"></a>00662     --nuNeighbors[p + <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#afd67524077b0f6fe53c8a736b72fb4de">SG_WE</a>];
<a name="l00663"></a>00663     --nuNeighbors[p + <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a726feea95b2c5be4029aa2ed376a33b7">SG_NS</a>];
<a name="l00664"></a>00664 }
<a name="l00665"></a>00665 
<a name="l00666"></a><a class="code" href="classGoBoard.html#a904f182a773c4ecc03ac9b9d498f93a8">00666</a> <span class="keywordtype">void</span> <a class="code" href="classGoBoard.html#a904f182a773c4ecc03ac9b9d498f93a8">GoBoard::KillBlock</a>(<span class="keyword">const</span> <a class="code" href="classGoBoard_1_1Block.html" title="Data related to a block of stones on the board.">Block</a>* block)
<a name="l00667"></a>00667 {
<a name="l00668"></a>00668     <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgBlackWhite_8h.html#afd337f4ec449af4cfe657b21993d556d">SgBlackWhite</a> c = block-&gt;<a class="code" href="classGoBoard_1_1Block.html#ab2e3a293d82c960429b79eb767fe4194">Color</a>();
<a name="l00669"></a>00669     <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgBlackWhite_8h.html#afd337f4ec449af4cfe657b21993d556d">SgBlackWhite</a> opp = <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgBlackWhite_8h.html#ad46e340d4ffa744bb5011cdb21991f80">SgOppBW</a>(c);
<a name="l00670"></a>00670     <span class="keywordflow">for</span> (<a class="code" href="classGoBoard_1_1Block.html#a39df6bc4bff14f41d181d7e2fbcc83d1">Block::StoneIterator</a> it(block-&gt;<a class="code" href="classGoBoard_1_1Block.html#a85c7a66bc16b8ea8eb2aa9b1f4c5d6b4">Stones</a>()); it; ++it)
<a name="l00671"></a>00671     {
<a name="l00672"></a>00672         <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a49c23409e7e51c1edc053b56d3dd248c">SgPoint</a> stn = *it;
<a name="l00673"></a>00673         <a class="code" href="classGoBoard.html#a992397809ec55146f28f2771dcb87b0c">AddLibToAdjBlocks</a>(stn, opp);
<a name="l00674"></a>00674         <a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#ae4716b98e7aaebea7737522cf0d69a59" title="Hash code for this board position.">m_hash</a>.<a class="code" href="classGoBoard_1_1HashCode.html#ad72fba48deb19508aca9081d7082cfac">XorStone</a>(stn, c);
<a name="l00675"></a>00675         <a class="code" href="classGoBoard.html#a77d2565fcff51da4f2f13d488141be4f">RemoveStone</a>(stn);
<a name="l00676"></a>00676         <a class="code" href="classGoBoard.html#a66fff464a5df00603dd910d1f6143276">m_capturedStones</a>.<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArrayList.html#a4e7298e5120e06581fcdeba3f5a81295">PushBack</a>(stn);
<a name="l00677"></a>00677         <a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#a00185ccd3db04f9e7f5dd904da6190e8">m_block</a>[stn] = 0;
<a name="l00678"></a>00678     }
<a name="l00679"></a>00679     <span class="keywordtype">int</span> nuStones = block-&gt;<a class="code" href="classGoBoard_1_1Block.html#a85c7a66bc16b8ea8eb2aa9b1f4c5d6b4">Stones</a>().<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArrayList.html#a1470039542aee4ce46aa9919a5199af2">Length</a>();
<a name="l00680"></a>00680     <a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#a4d34948e76acbb24099998185fb67df6" title="Number of stones currently on the board.">m_numStones</a>[c] -= nuStones;
<a name="l00681"></a>00681     <a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#acb94f242ba7731f76aed8eeb0e731b93" title="Number of prisoners of each color.">m_prisoners</a>[c] += nuStones;
<a name="l00682"></a>00682     <span class="keywordflow">if</span> (nuStones == 1)
<a name="l00683"></a>00683         <span class="comment">// Remember that single stone was captured, check conditions on</span>
<a name="l00684"></a>00684         <span class="comment">// capturing block later</span>
<a name="l00685"></a>00685         <a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#a9ff7cfac9857d4de2796e64d7fe3fbdf" title="Point which is currently illegal for simple Ko rule.">m_koPoint</a> = block-&gt;<a class="code" href="classGoBoard_1_1Block.html#acd39c77410c2bbfd0e79a89fad7f1dfa">Anchor</a>();
<a name="l00686"></a>00686 }
<a name="l00687"></a>00687 
<a name="l00688"></a><a class="code" href="classGoBoard.html#a2a2580c98f2a5b8d10b0334bc5128f63">00688</a> <span class="keywordtype">bool</span> <a class="code" href="classGoBoard.html#a2a2580c98f2a5b8d10b0334bc5128f63">GoBoard::FullBoardRepetition</a>()<span class="keyword"> const</span>
<a name="l00689"></a>00689 <span class="keyword"></span>{
<a name="l00690"></a>00690     <a class="code" href="classGoRules.html#ab95a25d594e8f717502159205eb627d9" title="Ko rule.">GoRules::KoRule</a> koRule = <a class="code" href="classGoBoard.html#a6cae0cf1e43359f95edc5f0d1f148253" title="Non-const access to current game rules.">Rules</a>().<a class="code" href="classGoRules.html#a15010756420a4f1f74b09c2d2ffda50f">GetKoRule</a>();
<a name="l00691"></a>00691     <span class="keywordflow">if</span> (koRule == <a class="code" href="classGoRules.html#ab95a25d594e8f717502159205eb627d9af0c750741212b252de47f2d1193cb094" title="Only repetition of the position two moves ago is forbidden.">GoRules::SIMPLEKO</a>)
<a name="l00692"></a>00692     {
<a name="l00693"></a>00693         <span class="keywordtype">int</span> nuMoves = <a class="code" href="classGoBoard.html#aafca51e49debbebb8d9a99d5f95989b2" title="Return the current number moves.">MoveNumber</a>();
<a name="l00694"></a>00694         <span class="keywordflow">if</span> (nuMoves == 0)
<a name="l00695"></a>00695             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00696"></a>00696         <span class="keyword">const</span> <a class="code" href="structGoBoard_1_1StackEntry.html" title="Information to undo a move.">StackEntry</a>&amp; entry = (*m_moves)[nuMoves - 1];
<a name="l00697"></a>00697         <span class="keywordflow">return</span> (entry.<a class="code" href="structGoBoard_1_1StackEntry.html#a274396f31ada4a78997d15f31aca72d2" title="Location of the move.">m_point</a> == entry.<a class="code" href="structGoBoard_1_1StackEntry.html#a35e663085d5d2a0e442d8de980a8a91f" title="Old value of m_koPoint.">m_koPoint</a>);
<a name="l00698"></a>00698     }
<a name="l00699"></a>00699     <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgBWArray.html">SgBWArray&lt;SgArrayList&lt;SgPoint,SG_MAXPOINT&gt;</a> &gt; changes;
<a name="l00700"></a>00700     <span class="keywordtype">int</span> nuChanges = 0;
<a name="l00701"></a>00701     <span class="keywordtype">int</span> moveNumber = <a class="code" href="classGoBoard.html#a222faf237e7f509e5cc8e58adb8607d2">m_moves</a>-&gt;<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArrayList.html#a1470039542aee4ce46aa9919a5199af2">Length</a>() - 1;
<a name="l00702"></a>00702     <span class="keywordtype">bool</span> requireSameToPlay = (koRule == GoRules::SUPERKO);
<a name="l00703"></a>00703     <span class="keywordflow">while</span> (moveNumber &gt;= 0)
<a name="l00704"></a>00704     {
<a name="l00705"></a>00705         <span class="keyword">const</span> <a class="code" href="structGoBoard_1_1StackEntry.html" title="Information to undo a move.">StackEntry</a>&amp; entry = (*m_moves)[moveNumber];
<a name="l00706"></a>00706         <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a49c23409e7e51c1edc053b56d3dd248c">SgPoint</a> p = entry.<a class="code" href="structGoBoard_1_1StackEntry.html#a274396f31ada4a78997d15f31aca72d2" title="Location of the move.">m_point</a>;
<a name="l00707"></a>00707         <span class="keywordflow">if</span> (! <a class="code" href="classGoBoard.html#a99aabe9f76a3d21ffa424cc64ab0b956" title="Check if point is a pass move or a coupon move, which is handled like a pass move.">IsPass</a>(p) &amp;&amp; entry.<a class="code" href="structGoBoard_1_1StackEntry.html#aed3155cadafbea362742b59b90416000" title="Color of the move.">m_color</a> != <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgBoardColor_8h.html#afcd4fcc69c2fd33d72fc27f201cca3ab">SG_EMPTY</a>
<a name="l00708"></a>00708             &amp;&amp; entry.<a class="code" href="structGoBoard_1_1StackEntry.html#aed3155cadafbea362742b59b90416000" title="Color of the move.">m_color</a> == <a class="code" href="classGoBoard.html#aa0aba804365056191a491e558d4c3152">GetColor</a>(p)
<a name="l00709"></a>00709             &amp;&amp; entry.<a class="code" href="structGoBoard_1_1StackEntry.html#a4eef3be2988fbb6555fba6aa9b8aa8b7" title="Old value of m_isFirst[m_point].">m_isFirst</a>)
<a name="l00710"></a>00710             <span class="comment">// In this case we know that all erlier positions are</span>
<a name="l00711"></a>00711             <span class="comment">// empty at p, therefore different to current position</span>
<a name="l00712"></a>00712             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00713"></a>00713 
<a name="l00714"></a>00714         <span class="keywordflow">if</span> (! <a class="code" href="classGoBoard.html#a99aabe9f76a3d21ffa424cc64ab0b956" title="Check if point is a pass move or a coupon move, which is handled like a pass move.">IsPass</a>(entry.<a class="code" href="structGoBoard_1_1StackEntry.html#a274396f31ada4a78997d15f31aca72d2" title="Location of the move.">m_point</a>))
<a name="l00715"></a>00715         {
<a name="l00716"></a>00716             UpdateChanges(entry.<a class="code" href="structGoBoard_1_1StackEntry.html#a274396f31ada4a78997d15f31aca72d2" title="Location of the move.">m_point</a>, changes[entry.<a class="code" href="structGoBoard_1_1StackEntry.html#aed3155cadafbea362742b59b90416000" title="Color of the move.">m_color</a>], nuChanges);
<a name="l00717"></a>00717             <span class="keywordflow">for</span> (<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArrayList.html">SgArrayList&lt;Block*,4&gt;::Iterator</a> it(entry.<a class="code" href="structGoBoard_1_1StackEntry.html#a19e447ffb88fd4813c218ce030a2c511">m_killed</a>); it; ++it)
<a name="l00718"></a>00718             {
<a name="l00719"></a>00719                 <a class="code" href="classGoBoard_1_1Block.html" title="Data related to a block of stones on the board.">Block</a>* killed = *it;
<a name="l00720"></a>00720                 <span class="keywordflow">for</span> (<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArrayList.html#a9830fc407400559db7e7783cc10a9394">GoPointList::Iterator</a> stn(killed-&gt;<a class="code" href="classGoBoard_1_1Block.html#a85c7a66bc16b8ea8eb2aa9b1f4c5d6b4">Stones</a>()); stn; ++stn)
<a name="l00721"></a>00721                     UpdateChanges(*stn, changes[killed-&gt;<a class="code" href="classGoBoard_1_1Block.html#ab2e3a293d82c960429b79eb767fe4194">Color</a>()], nuChanges);
<a name="l00722"></a>00722             }
<a name="l00723"></a>00723             <a class="code" href="classGoBoard_1_1Block.html" title="Data related to a block of stones on the board.">Block</a>* suicide = entry.<a class="code" href="structGoBoard_1_1StackEntry.html#ac1108f6416b0347335ab13643a7bdb3e">m_suicide</a>;
<a name="l00724"></a>00724             <span class="keywordflow">if</span> (suicide != 0)
<a name="l00725"></a>00725                 <span class="keywordflow">for</span> (<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArrayList.html#a9830fc407400559db7e7783cc10a9394">GoPointList::Iterator</a> stn(suicide-&gt;<a class="code" href="classGoBoard_1_1Block.html#a85c7a66bc16b8ea8eb2aa9b1f4c5d6b4">Stones</a>()); stn;
<a name="l00726"></a>00726                      ++stn)
<a name="l00727"></a>00727                     UpdateChanges(*stn, changes[suicide-&gt;<a class="code" href="classGoBoard_1_1Block.html#ab2e3a293d82c960429b79eb767fe4194">Color</a>()], nuChanges);
<a name="l00728"></a>00728         }
<a name="l00729"></a>00729 
<a name="l00730"></a>00730         <span class="keywordflow">if</span> (nuChanges &gt; 0
<a name="l00731"></a>00731             &amp;&amp; (! requireSameToPlay || entry.<a class="code" href="structGoBoard_1_1StackEntry.html#a1f6a8468fee583825322365e9a9cabad" title="Old value of m_toPlay.">m_toPlay</a> == <a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#af49ee862764907dd8b80d7668c68f4fc" title="Whose turn it is to play.">m_toPlay</a>)
<a name="l00732"></a>00732             &amp;&amp; changes[<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgBlackWhite_8h.html#a455e66a4a6ccc0a446eb2d10814c93a5">SG_BLACK</a>].IsEmpty() &amp;&amp; changes[<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgBlackWhite_8h.html#ae2543fbfd95354255bd12a052598b3ac">SG_WHITE</a>].IsEmpty())
<a name="l00733"></a>00733             <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00734"></a>00734         --moveNumber;
<a name="l00735"></a>00735     }
<a name="l00736"></a>00736     <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00737"></a>00737 }
<a name="l00738"></a>00738 
<a name="l00739"></a><a class="code" href="classGoBoard.html#aa8fd1667a88746d0834a216ca23898a9">00739</a> <span class="keywordtype">bool</span> <a class="code" href="classGoBoard.html#aa8fd1667a88746d0834a216ca23898a9" title="Kill own block if no liberties.">GoBoard::CheckSuicide</a>(<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a49c23409e7e51c1edc053b56d3dd248c">SgPoint</a> p, <a class="code" href="structGoBoard_1_1StackEntry.html" title="Information to undo a move.">StackEntry</a>&amp; entry)
<a name="l00740"></a>00740 {
<a name="l00741"></a>00741     <span class="keywordflow">if</span> (! <a class="code" href="classGoBoard.html#aa687855e12497ec7d02ab19510593ee0">HasLiberties</a>(p))
<a name="l00742"></a>00742     {
<a name="l00743"></a>00743         entry.<a class="code" href="structGoBoard_1_1StackEntry.html#ac1108f6416b0347335ab13643a7bdb3e">m_suicide</a> = <a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#a00185ccd3db04f9e7f5dd904da6190e8">m_block</a>[p];
<a name="l00744"></a>00744         <a class="code" href="classGoBoard.html#a904f182a773c4ecc03ac9b9d498f93a8">KillBlock</a>(entry.<a class="code" href="structGoBoard_1_1StackEntry.html#ac1108f6416b0347335ab13643a7bdb3e">m_suicide</a>);
<a name="l00745"></a>00745         <a class="code" href="classGoBoard.html#a8e6e8b0b62544714967078b8d6f2fde7">m_moveInfo</a>.set(<a class="code" href="GoBoard_8h.html#a2cd293b3c4ac55f647cec3614c17987ca3bdbb8a81d3016fafc4ac0c43e234b6a" title="The move caused self-removal of stones.">GO_MOVEFLAG_SUICIDE</a>);
<a name="l00746"></a>00746         <span class="keywordflow">return</span> <a class="code" href="classGoBoard.html#ae1744e3b0e35ead2dbb529a671aee1cf" title="Rules for this board.">m_rules</a>.<a class="code" href="classGoRules.html#a803c6130a64d0ecbd3c81fe17b69d040" title="Default is false.">AllowSuicide</a>();
<a name="l00747"></a>00747     }
<a name="l00748"></a>00748     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00749"></a>00749 }
<a name="l00750"></a>00750 
<a name="l00751"></a><a class="code" href="classGoBoard.html#a277960d5f3fb21a232b1e4c25efec148">00751</a> <span class="keywordtype">void</span> <a class="code" href="classGoBoard.html#a277960d5f3fb21a232b1e4c25efec148" title="Play a move.">GoBoard::Play</a>(<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a49c23409e7e51c1edc053b56d3dd248c">SgPoint</a> p, <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgBlackWhite_8h.html#afd337f4ec449af4cfe657b21993d556d">SgBlackWhite</a> player)
<a name="l00752"></a>00752 {
<a name="l00753"></a>00753     <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgSystem_8h.html#a558b618265a6c7bf8eed5bd947f3a64f">SG_ASSERT</a>(p != <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgMove_8h.html#a91bbd18c4639076e9c968e3487a31ed0">SG_NULLMOVE</a>);
<a name="l00754"></a>00754     <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgBlackWhite_8h.html#a23033edf6e01fe4c33c74b70654ca0b1">SG_ASSERT_BW</a>(player);
<a name="l00755"></a>00755     <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgSystem_8h.html#a558b618265a6c7bf8eed5bd947f3a64f">SG_ASSERT</a>(<a class="code" href="classGoBoard.html#a99aabe9f76a3d21ffa424cc64ab0b956" title="Check if point is a pass move or a coupon move, which is handled like a pass move.">IsPass</a>(p) || (<a class="code" href="classGoBoard.html#ab89ea31ab0667787438b678810e70062">IsValidPoint</a>(p) &amp;&amp; <a class="code" href="classGoBoard.html#a99ac3cb812980a72bfa6e3cdc5eac50c">IsEmpty</a>(p)));
<a name="l00756"></a>00756     <a class="code" href="classGoBoard.html#a1ebebb504e470488697449e224299c80" title="Checks whether all the board data structures are in a consistent state.">CheckConsistency</a>();
<a name="l00757"></a>00757     ++<a class="code" href="classGoBoard.html#a36fefa39b5cd7adb2f9cdfc7eeae7bfc" title="See CountPlay.">m_countPlay</a>;
<a name="l00758"></a>00758     <span class="comment">// Reuse stack entry without initialization</span>
<a name="l00759"></a>00759     <a class="code" href="classGoBoard.html#a222faf237e7f509e5cc8e58adb8607d2">m_moves</a>-&gt;<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArrayList.html#a22b487162269ba2ebc03ceaadcfaad6d">Resize</a>(<a class="code" href="classGoBoard.html#a222faf237e7f509e5cc8e58adb8607d2">m_moves</a>-&gt;<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArrayList.html#a1470039542aee4ce46aa9919a5199af2">Length</a>() + 1);
<a name="l00760"></a>00760     <a class="code" href="structGoBoard_1_1StackEntry.html" title="Information to undo a move.">StackEntry</a>&amp; entry = <a class="code" href="classGoBoard.html#a222faf237e7f509e5cc8e58adb8607d2">m_moves</a>-&gt;<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArrayList.html#ae77db0e77cc43b500ab9b4d2ac735175">Last</a>();
<a name="l00761"></a>00761     entry.<a class="code" href="structGoBoard_1_1StackEntry.html#a274396f31ada4a78997d15f31aca72d2" title="Location of the move.">m_point</a> = p;
<a name="l00762"></a>00762     entry.<a class="code" href="structGoBoard_1_1StackEntry.html#aed3155cadafbea362742b59b90416000" title="Color of the move.">m_color</a> = player;
<a name="l00763"></a>00763     <a class="code" href="classGoBoard.html#ad9f602b41d317ef1827773ad216e0893" title="Save state.">SaveState</a>(entry);
<a name="l00764"></a>00764     <a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#a9ff7cfac9857d4de2796e64d7fe3fbdf" title="Point which is currently illegal for simple Ko rule.">m_koPoint</a> = <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a76c9b1c6d30853b22ada76507686dce6">SG_NULLPOINT</a>;
<a name="l00765"></a>00765     <a class="code" href="classGoBoard.html#a66fff464a5df00603dd910d1f6143276">m_capturedStones</a>.<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArrayList.html#a21d2cbab56be28ba17436ce4d55570a4">Clear</a>();
<a name="l00766"></a>00766     <a class="code" href="classGoBoard.html#a8e6e8b0b62544714967078b8d6f2fde7">m_moveInfo</a>.reset();
<a name="l00767"></a>00767     <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgBlackWhite_8h.html#afd337f4ec449af4cfe657b21993d556d">SgBlackWhite</a> opp = <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgBlackWhite_8h.html#ad46e340d4ffa744bb5011cdb21991f80">SgOppBW</a>(player);
<a name="l00768"></a>00768     <span class="keywordflow">if</span> (<a class="code" href="classGoBoard.html#a99aabe9f76a3d21ffa424cc64ab0b956" title="Check if point is a pass move or a coupon move, which is handled like a pass move.">IsPass</a>(p))
<a name="l00769"></a>00769     {
<a name="l00770"></a>00770         <a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#af49ee862764907dd8b80d7668c68f4fc" title="Whose turn it is to play.">m_toPlay</a> = opp;
<a name="l00771"></a>00771         <span class="keywordflow">return</span>;
<a name="l00772"></a>00772     }
<a name="l00773"></a>00773     <span class="keywordtype">bool</span> isLegal = <span class="keyword">true</span>;
<a name="l00774"></a>00774     <span class="comment">// Place the stone there tentatively. Remember whether this is the</span>
<a name="l00775"></a>00775     <span class="comment">// first time a stone gets played at that point to speed up check</span>
<a name="l00776"></a>00776     <span class="comment">// for full-board repetition below.</span>
<a name="l00777"></a>00777     <span class="keywordtype">bool</span> wasFirstStone = <a class="code" href="classGoBoard.html#a6f34ca3e23f838039431579d115bc9a1" title="Check if move at point would be the first move there.">IsFirst</a>(p);
<a name="l00778"></a>00778     <a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#afb2cf38dc6ac7026e4395665796b644b" title="Flag if point has not been modified yet.">m_isFirst</a>[p] = <span class="keyword">false</span>;
<a name="l00779"></a>00779     <a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#ae4716b98e7aaebea7737522cf0d69a59" title="Hash code for this board position.">m_hash</a>.<a class="code" href="classGoBoard_1_1HashCode.html#ad72fba48deb19508aca9081d7082cfac">XorStone</a>(p, player);
<a name="l00780"></a>00780     <a class="code" href="classGoBoard.html#aa02e5c82b9ea92b05c9d7f23920c9874">AddStone</a>(p, player);
<a name="l00781"></a>00781     ++<a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#a4d34948e76acbb24099998185fb67df6" title="Number of stones currently on the board.">m_numStones</a>[player];
<a name="l00782"></a>00782     <a class="code" href="classGoBoard.html#a9491258f7fe87089905a0c257b3a253c" title="Remove liberty from adjacent blocks and kill opponent blocks without liberties.">RemoveLibAndKill</a>(p, opp, entry);
<a name="l00783"></a>00783     <span class="keywordflow">if</span> (! entry.<a class="code" href="structGoBoard_1_1StackEntry.html#a19e447ffb88fd4813c218ce030a2c511">m_killed</a>.<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArrayList.html#ae97cd1edde8f0dc802ac5e586b826f15">IsEmpty</a>())
<a name="l00784"></a>00784     {
<a name="l00785"></a>00785         <a class="code" href="classGoBoard.html#a8e6e8b0b62544714967078b8d6f2fde7">m_moveInfo</a>.set(<a class="code" href="GoBoard_8h.html#a2cd293b3c4ac55f647cec3614c17987ca612ba39b8f6f24f353c191a28abdc3f2" title="The move captured one or more enemy stones.">GO_MOVEFLAG_CAPTURING</a>);
<a name="l00786"></a>00786         <span class="comment">// If this is the first time a point is played here, then repetition</span>
<a name="l00787"></a>00787         <span class="comment">// is impossible until the next capture</span>
<a name="l00788"></a>00788         <a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#ac4d8b66ea60c074937f6e282137537d1" title="Flag if position is definitely new (no possibility of repetition), set to true when move is played at...">m_isNewPosition</a> = <a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#ac4d8b66ea60c074937f6e282137537d1" title="Flag if position is definitely new (no possibility of repetition), set to true when move is played at...">m_isNewPosition</a> &amp;&amp; wasFirstStone;
<a name="l00789"></a>00789     }
<a name="l00790"></a>00790     <a class="code" href="classGoBoard.html#acd3a0808b585802e8ec3794c8eaa2687">UpdateBlocksAfterAddStone</a>(p, player, entry);
<a name="l00791"></a>00791     entry.<a class="code" href="structGoBoard_1_1StackEntry.html#ac1108f6416b0347335ab13643a7bdb3e">m_suicide</a> = 0;
<a name="l00792"></a>00792     <span class="keywordflow">if</span> (<a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#a9ff7cfac9857d4de2796e64d7fe3fbdf" title="Point which is currently illegal for simple Ko rule.">m_koPoint</a> != <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a76c9b1c6d30853b22ada76507686dce6">SG_NULLPOINT</a>)
<a name="l00793"></a>00793         <span class="keywordflow">if</span> (<a class="code" href="classGoBoard.html#ad7ee64275dfc41c9ab56a3fd18bef52a" title="Return the number of stones in the block at &amp;#39;p&amp;#39;.">NumStones</a>(p) &gt; 1 || <a class="code" href="classGoBoard.html#a8adce2525eda5659b89cc47a979f4077" title="Return the number of liberties of the block at &amp;#39;p&amp;#39;.">NumLiberties</a>(p) &gt; 1)
<a name="l00794"></a>00794             <a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#a9ff7cfac9857d4de2796e64d7fe3fbdf" title="Point which is currently illegal for simple Ko rule.">m_koPoint</a> = <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a76c9b1c6d30853b22ada76507686dce6">SG_NULLPOINT</a>;
<a name="l00795"></a>00795     isLegal = <a class="code" href="classGoBoard.html#aa8fd1667a88746d0834a216ca23898a9" title="Kill own block if no liberties.">CheckSuicide</a>(p, entry);
<a name="l00796"></a>00796     <a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#af49ee862764907dd8b80d7668c68f4fc" title="Whose turn it is to play.">m_toPlay</a> = opp;
<a name="l00797"></a>00797     <span class="keywordflow">if</span> (! wasFirstStone &amp;&amp; ! <a class="code" href="classGoBoard.html#aaa4bc9e5384031c4d4f647f65687a7d5" title="Check if board is in a definitely new situation, with no possibility of repetition.">IsNewPosition</a>() &amp;&amp; ! <a class="code" href="classGoBoard.html#a15c6704574d8e2e0dfa8a3ef8b740def" title="Check if move violates Ko rule.">CheckKo</a>(player))
<a name="l00798"></a>00798         isLegal = <span class="keyword">false</span>;
<a name="l00799"></a>00799     <span class="keywordflow">if</span> (! isLegal)
<a name="l00800"></a>00800         <a class="code" href="classGoBoard.html#a8e6e8b0b62544714967078b8d6f2fde7">m_moveInfo</a>.set(<a class="code" href="GoBoard_8h.html#a2cd293b3c4ac55f647cec3614c17987ca14b0c2a6f1fea9af50f9d8f5a9fd8110" title="The move was illegal according to the current rules and allow ko settings.">GO_MOVEFLAG_ILLEGAL</a>);
<a name="l00801"></a>00801     <span class="comment">// @see @ref sgboardhashhistory</span>
<a name="l00802"></a>00802     <span class="keywordflow">if</span> (! <a class="code" href="classGoBoard.html#a66fff464a5df00603dd910d1f6143276">m_capturedStones</a>.<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArrayList.html#ae97cd1edde8f0dc802ac5e586b826f15">IsEmpty</a>() &amp;&amp; <a class="code" href="classGoBoard.html#a9463b5518c6e5b6f5f85a102271d7c89">m_koModifiesHash</a>)
<a name="l00803"></a>00803     {
<a name="l00804"></a>00804         <span class="comment">// This assumes that in the exact same position, the stones will</span>
<a name="l00805"></a>00805         <span class="comment">// be captured in the same sequence. Currently holds due to the</span>
<a name="l00806"></a>00806         <span class="comment">// way KillBlockIfNoLiberty is implemented; may be fragile.</span>
<a name="l00807"></a>00807         <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a49c23409e7e51c1edc053b56d3dd248c">SgPoint</a> firstCapturedStone = <a class="code" href="classGoBoard.html#a66fff464a5df00603dd910d1f6143276">m_capturedStones</a>[0];
<a name="l00808"></a>00808         <a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#ae4716b98e7aaebea7737522cf0d69a59" title="Hash code for this board position.">m_hash</a>.<a class="code" href="classGoBoard_1_1HashCode.html#a2cc03b3f9cbb27a1664f7012a847006d">XorCaptured</a>(<a class="code" href="classGoBoard.html#aafca51e49debbebb8d9a99d5f95989b2" title="Return the current number moves.">MoveNumber</a>(), firstCapturedStone);
<a name="l00809"></a>00809     }
<a name="l00810"></a>00810     <a class="code" href="classGoBoard.html#a1ebebb504e470488697449e224299c80" title="Checks whether all the board data structures are in a consistent state.">CheckConsistency</a>();
<a name="l00811"></a>00811 }
<a name="l00812"></a>00812 
<a name="l00813"></a><a class="code" href="classGoBoard.html#a043fe4741e8606969db13338491673da">00813</a> <span class="keywordtype">void</span> <a class="code" href="classGoBoard.html#a043fe4741e8606969db13338491673da" title="Undo the most recent move.">GoBoard::Undo</a>()
<a name="l00814"></a>00814 {
<a name="l00815"></a>00815     <a class="code" href="classGoBoard.html#a1ebebb504e470488697449e224299c80" title="Checks whether all the board data structures are in a consistent state.">CheckConsistency</a>();
<a name="l00816"></a>00816     <span class="keyword">const</span> <a class="code" href="structGoBoard_1_1StackEntry.html" title="Information to undo a move.">StackEntry</a>&amp; entry = <a class="code" href="classGoBoard.html#a222faf237e7f509e5cc8e58adb8607d2">m_moves</a>-&gt;<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArrayList.html#ae77db0e77cc43b500ab9b4d2ac735175">Last</a>();
<a name="l00817"></a>00817     <a class="code" href="classGoBoard.html#a024a3eec640851f5202257c6de93c098" title="Restore state.">RestoreState</a>(entry);
<a name="l00818"></a>00818     <a class="code" href="classGoBoard.html#a09e1b440717cb9d9c66dc29e99bec694">UpdateBlocksAfterUndo</a>(entry);
<a name="l00819"></a>00819     <a class="code" href="classGoBoard.html#a222faf237e7f509e5cc8e58adb8607d2">m_moves</a>-&gt;<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArrayList.html#a9f4fc87143c566580bc313638395bf20">PopBack</a>();
<a name="l00820"></a>00820     <a class="code" href="classGoBoard.html#a1ebebb504e470488697449e224299c80" title="Checks whether all the board data structures are in a consistent state.">CheckConsistency</a>();
<a name="l00821"></a>00821 }
<a name="l00822"></a>00822 <span class="comment"></span>
<a name="l00823"></a>00823 <span class="comment">/** Remove liberty from adjacent blocks and kill opponent blocks without</span>
<a name="l00824"></a>00824 <span class="comment">    liberties. */</span>
<a name="l00825"></a><a class="code" href="classGoBoard.html#a9491258f7fe87089905a0c257b3a253c">00825</a> <span class="keywordtype">void</span> <a class="code" href="classGoBoard.html#a9491258f7fe87089905a0c257b3a253c" title="Remove liberty from adjacent blocks and kill opponent blocks without liberties.">GoBoard::RemoveLibAndKill</a>(<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a49c23409e7e51c1edc053b56d3dd248c">SgPoint</a> p, <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgBlackWhite_8h.html#afd337f4ec449af4cfe657b21993d556d">SgBlackWhite</a> opp,
<a name="l00826"></a>00826                                <a class="code" href="structGoBoard_1_1StackEntry.html" title="Information to undo a move.">StackEntry</a>&amp; entry)
<a name="l00827"></a>00827 {
<a name="l00828"></a>00828     entry.<a class="code" href="structGoBoard_1_1StackEntry.html#a19e447ffb88fd4813c218ce030a2c511">m_killed</a>.<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArrayList.html#a21d2cbab56be28ba17436ce4d55570a4">Clear</a>();
<a name="l00829"></a>00829     <span class="keywordflow">if</span> (<a class="code" href="classGoBoard.html#aa4d02b4432b92b11ab755b855be40c98">NumNeighbors</a>(p, <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgBlackWhite_8h.html#a455e66a4a6ccc0a446eb2d10814c93a5">SG_BLACK</a>) == 0 &amp;&amp; <a class="code" href="classGoBoard.html#aa4d02b4432b92b11ab755b855be40c98">NumNeighbors</a>(p, <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgBlackWhite_8h.html#ae2543fbfd95354255bd12a052598b3ac">SG_WHITE</a>) == 0)
<a name="l00830"></a>00830         <span class="keywordflow">return</span>;
<a name="l00831"></a>00831     <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArrayList.html">SgArrayList&lt;Block*,4&gt;</a> blocks = <a class="code" href="classGoBoard.html#a0eb6dc664760e2bbce80879ebe29dd86">GetAdjacentBlocks</a>(p);
<a name="l00832"></a>00832     <span class="keywordflow">for</span> (<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArrayList.html">SgArrayList&lt;Block*,4&gt;::Iterator</a> it(blocks); it; ++it)
<a name="l00833"></a>00833     {
<a name="l00834"></a>00834         <a class="code" href="classGoBoard_1_1Block.html" title="Data related to a block of stones on the board.">Block</a>* b = *it;
<a name="l00835"></a>00835         b-&gt;<a class="code" href="classGoBoard_1_1Block.html#a046f63fe52f5679e3bf15edda7829647">ExcludeLiberty</a>(p);
<a name="l00836"></a>00836         <span class="keywordflow">if</span> (b-&gt;<a class="code" href="classGoBoard_1_1Block.html#ab2e3a293d82c960429b79eb767fe4194">Color</a>() == opp &amp;&amp; b-&gt;<a class="code" href="classGoBoard_1_1Block.html#a06bdc7bfdf83cb14e3ddf196d9e136c9">NumLiberties</a>() == 0)
<a name="l00837"></a>00837         {
<a name="l00838"></a>00838             entry.<a class="code" href="structGoBoard_1_1StackEntry.html#a19e447ffb88fd4813c218ce030a2c511">m_killed</a>.<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArrayList.html#a4e7298e5120e06581fcdeba3f5a81295">PushBack</a>(b);
<a name="l00839"></a>00839             <a class="code" href="classGoBoard.html#a904f182a773c4ecc03ac9b9d498f93a8">KillBlock</a>(b);
<a name="l00840"></a>00840         }
<a name="l00841"></a>00841     }
<a name="l00842"></a>00842 }
<a name="l00843"></a>00843 
<a name="l00844"></a><a class="code" href="classGoBoard.html#a024a3eec640851f5202257c6de93c098">00844</a> <span class="keywordtype">void</span> <a class="code" href="classGoBoard.html#a024a3eec640851f5202257c6de93c098" title="Restore state.">GoBoard::RestoreState</a>(<span class="keyword">const</span> <a class="code" href="structGoBoard_1_1StackEntry.html" title="Information to undo a move.">StackEntry</a>&amp; entry)
<a name="l00845"></a>00845 {
<a name="l00846"></a>00846     <a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#ae4716b98e7aaebea7737522cf0d69a59" title="Hash code for this board position.">m_hash</a> = entry.<a class="code" href="structGoBoard_1_1StackEntry.html#a90afac24ebe72aa8b643e4767b9c5abd" title="Old value of m_hash.">m_hash</a>;
<a name="l00847"></a>00847     <a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#a9ff7cfac9857d4de2796e64d7fe3fbdf" title="Point which is currently illegal for simple Ko rule.">m_koPoint</a> = entry.<a class="code" href="structGoBoard_1_1StackEntry.html#a35e663085d5d2a0e442d8de980a8a91f" title="Old value of m_koPoint.">m_koPoint</a>;
<a name="l00848"></a>00848     <span class="keywordflow">if</span> (! <a class="code" href="classGoBoard.html#a99aabe9f76a3d21ffa424cc64ab0b956" title="Check if point is a pass move or a coupon move, which is handled like a pass move.">IsPass</a>(entry.<a class="code" href="structGoBoard_1_1StackEntry.html#a274396f31ada4a78997d15f31aca72d2" title="Location of the move.">m_point</a>))
<a name="l00849"></a>00849     {
<a name="l00850"></a>00850         <a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#afb2cf38dc6ac7026e4395665796b644b" title="Flag if point has not been modified yet.">m_isFirst</a>[entry.<a class="code" href="structGoBoard_1_1StackEntry.html#a274396f31ada4a78997d15f31aca72d2" title="Location of the move.">m_point</a>] = entry.<a class="code" href="structGoBoard_1_1StackEntry.html#a4eef3be2988fbb6555fba6aa9b8aa8b7" title="Old value of m_isFirst[m_point].">m_isFirst</a>;
<a name="l00851"></a>00851         <a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#ac4d8b66ea60c074937f6e282137537d1" title="Flag if position is definitely new (no possibility of repetition), set to true when move is played at...">m_isNewPosition</a> = entry.<a class="code" href="structGoBoard_1_1StackEntry.html#a424eeefce099cb7ef729b3896b86fcf9" title="Old value of m_isNewPosition.">m_isNewPosition</a>;
<a name="l00852"></a>00852     }
<a name="l00853"></a>00853     <a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#af49ee862764907dd8b80d7668c68f4fc" title="Whose turn it is to play.">m_toPlay</a> = entry.<a class="code" href="structGoBoard_1_1StackEntry.html#a1f6a8468fee583825322365e9a9cabad" title="Old value of m_toPlay.">m_toPlay</a>;
<a name="l00854"></a>00854     <a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#aaae7723d1dfc9852522c3dd4fb4b2326" title="Number of &amp;#39;illegal&amp;#39; ko recaptures by m_koColor.">m_koLevel</a> = entry.<a class="code" href="structGoBoard_1_1StackEntry.html#a631b52cfa3eb2cde746c29b318c20e5b" title="Old value of m_koLevel.">m_koLevel</a>;
<a name="l00855"></a>00855     <a class="code" href="classGoBoard.html#ae662770269330b227b770a701125925c">m_koColor</a> = entry.<a class="code" href="structGoBoard_1_1StackEntry.html#aa6eb21ff268e8800e4e8597fc1e53d7b" title="Old value of m_koColor.">m_koColor</a>;
<a name="l00856"></a>00856     <a class="code" href="classGoBoard.html#a112c8fd60baad172486c4ae69faa3187" title="m_koLoser can never become m_koColor.">m_koLoser</a> = entry.<a class="code" href="structGoBoard_1_1StackEntry.html#a2b5c2e6335558786a24c5c5434f0e403" title="Old value of m_koLoser.">m_koLoser</a>;
<a name="l00857"></a>00857     <a class="code" href="classGoBoard.html#a9463b5518c6e5b6f5f85a102271d7c89">m_koModifiesHash</a> = entry.<a class="code" href="structGoBoard_1_1StackEntry.html#a11d618c06266a6aa5b010a4fcf39d07d" title="Old value of m_koModifiesHash.">m_koModifiesHash</a>;
<a name="l00858"></a>00858 }
<a name="l00859"></a>00859 
<a name="l00860"></a><a class="code" href="classGoBoard.html#ad9f602b41d317ef1827773ad216e0893">00860</a> <span class="keywordtype">void</span> <a class="code" href="classGoBoard.html#ad9f602b41d317ef1827773ad216e0893" title="Save state.">GoBoard::SaveState</a>(<a class="code" href="structGoBoard_1_1StackEntry.html" title="Information to undo a move.">StackEntry</a>&amp; entry)
<a name="l00861"></a>00861 {
<a name="l00862"></a>00862     entry.<a class="code" href="structGoBoard_1_1StackEntry.html#a90afac24ebe72aa8b643e4767b9c5abd" title="Old value of m_hash.">m_hash</a> = <a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#ae4716b98e7aaebea7737522cf0d69a59" title="Hash code for this board position.">m_hash</a>;
<a name="l00863"></a>00863     <span class="keywordflow">if</span> (! <a class="code" href="classGoBoard.html#a99aabe9f76a3d21ffa424cc64ab0b956" title="Check if point is a pass move or a coupon move, which is handled like a pass move.">IsPass</a>(entry.<a class="code" href="structGoBoard_1_1StackEntry.html#a274396f31ada4a78997d15f31aca72d2" title="Location of the move.">m_point</a>))
<a name="l00864"></a>00864     {
<a name="l00865"></a>00865         entry.<a class="code" href="structGoBoard_1_1StackEntry.html#a4eef3be2988fbb6555fba6aa9b8aa8b7" title="Old value of m_isFirst[m_point].">m_isFirst</a> = <a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#afb2cf38dc6ac7026e4395665796b644b" title="Flag if point has not been modified yet.">m_isFirst</a>[entry.<a class="code" href="structGoBoard_1_1StackEntry.html#a274396f31ada4a78997d15f31aca72d2" title="Location of the move.">m_point</a>];
<a name="l00866"></a>00866         entry.<a class="code" href="structGoBoard_1_1StackEntry.html#a424eeefce099cb7ef729b3896b86fcf9" title="Old value of m_isNewPosition.">m_isNewPosition</a> = <a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#ac4d8b66ea60c074937f6e282137537d1" title="Flag if position is definitely new (no possibility of repetition), set to true when move is played at...">m_isNewPosition</a>;
<a name="l00867"></a>00867     }
<a name="l00868"></a>00868     entry.<a class="code" href="structGoBoard_1_1StackEntry.html#a1f6a8468fee583825322365e9a9cabad" title="Old value of m_toPlay.">m_toPlay</a> = <a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#af49ee862764907dd8b80d7668c68f4fc" title="Whose turn it is to play.">m_toPlay</a>;
<a name="l00869"></a>00869     entry.<a class="code" href="structGoBoard_1_1StackEntry.html#a35e663085d5d2a0e442d8de980a8a91f" title="Old value of m_koPoint.">m_koPoint</a> = <a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#a9ff7cfac9857d4de2796e64d7fe3fbdf" title="Point which is currently illegal for simple Ko rule.">m_koPoint</a>;
<a name="l00870"></a>00870     entry.<a class="code" href="structGoBoard_1_1StackEntry.html#a631b52cfa3eb2cde746c29b318c20e5b" title="Old value of m_koLevel.">m_koLevel</a> = <a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#aaae7723d1dfc9852522c3dd4fb4b2326" title="Number of &amp;#39;illegal&amp;#39; ko recaptures by m_koColor.">m_koLevel</a>;
<a name="l00871"></a>00871     entry.<a class="code" href="structGoBoard_1_1StackEntry.html#aa6eb21ff268e8800e4e8597fc1e53d7b" title="Old value of m_koColor.">m_koColor</a> = <a class="code" href="classGoBoard.html#ae662770269330b227b770a701125925c">m_koColor</a>;
<a name="l00872"></a>00872     entry.<a class="code" href="structGoBoard_1_1StackEntry.html#a2b5c2e6335558786a24c5c5434f0e403" title="Old value of m_koLoser.">m_koLoser</a> = <a class="code" href="classGoBoard.html#a112c8fd60baad172486c4ae69faa3187" title="m_koLoser can never become m_koColor.">m_koLoser</a>;
<a name="l00873"></a>00873     entry.<a class="code" href="structGoBoard_1_1StackEntry.html#a11d618c06266a6aa5b010a4fcf39d07d" title="Old value of m_koModifiesHash.">m_koModifiesHash</a> = <a class="code" href="classGoBoard.html#a9463b5518c6e5b6f5f85a102271d7c89">m_koModifiesHash</a>;
<a name="l00874"></a>00874 }
<a name="l00875"></a>00875 
<a name="l00876"></a><a class="code" href="classGoBoard.html#a116c2b3ff8981eec0790999c5589eb84">00876</a> <span class="keywordtype">void</span> <a class="code" href="classGoBoard.html#a116c2b3ff8981eec0790999c5589eb84" title="Remember current position for quickly undoing a sequence of moves.">GoBoard::TakeSnapshot</a>()
<a name="l00877"></a>00877 {
<a name="l00878"></a>00878     <a class="code" href="classGoBoard.html#a231c0837fea485da089a0619cd559708">m_snapshot</a>-&gt;m_moveNumber = <a class="code" href="classGoBoard.html#aafca51e49debbebb8d9a99d5f95989b2" title="Return the current number moves.">MoveNumber</a>();
<a name="l00879"></a>00879     <a class="code" href="classGoBoard.html#a231c0837fea485da089a0619cd559708">m_snapshot</a>-&gt;m_blockListSize = <a class="code" href="classGoBoard.html#a0656b6f91327e51539fb09aee43716c1" title="Block data (stored in a stack).">m_blockList</a>-&gt;<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArrayList.html#a1470039542aee4ce46aa9919a5199af2">Length</a>();
<a name="l00880"></a>00880     <a class="code" href="classGoBoard.html#a231c0837fea485da089a0619cd559708">m_snapshot</a>-&gt;m_state = <a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>;
<a name="l00881"></a>00881     <span class="keywordflow">for</span> (<a class="code" href="classGoBoard_1_1Iterator.html" title="Iterate through all points.">GoBoard::Iterator</a> it(*<span class="keyword">this</span>); it; ++it)
<a name="l00882"></a>00882     {
<a name="l00883"></a>00883         <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a49c23409e7e51c1edc053b56d3dd248c">SgPoint</a> p = *it;
<a name="l00884"></a>00884         <span class="keywordflow">if</span> (<a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#a00185ccd3db04f9e7f5dd904da6190e8">m_block</a>[p] != 0)
<a name="l00885"></a>00885             <a class="code" href="classGoBoard.html#a231c0837fea485da089a0619cd559708">m_snapshot</a>-&gt;m_blockArray[p] = *<a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#a00185ccd3db04f9e7f5dd904da6190e8">m_block</a>[p];
<a name="l00886"></a>00886     }
<a name="l00887"></a>00887 }
<a name="l00888"></a>00888 
<a name="l00889"></a><a class="code" href="classGoBoard.html#a0419fac1df265cc8b699e5a8c8e26f67">00889</a> <span class="keywordtype">void</span> <a class="code" href="classGoBoard.html#a0419fac1df265cc8b699e5a8c8e26f67" title="Restore a snapshot.">GoBoard::RestoreSnapshot</a>()
<a name="l00890"></a>00890 {
<a name="l00891"></a>00891     <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgSystem_8h.html#a558b618265a6c7bf8eed5bd947f3a64f">SG_ASSERT</a>(<a class="code" href="classGoBoard.html#a231c0837fea485da089a0619cd559708">m_snapshot</a>-&gt;m_moveNumber &gt;= 0);
<a name="l00892"></a>00892     <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgSystem_8h.html#a558b618265a6c7bf8eed5bd947f3a64f">SG_ASSERT</a>(<a class="code" href="classGoBoard.html#a231c0837fea485da089a0619cd559708">m_snapshot</a>-&gt;m_moveNumber &lt;= <a class="code" href="classGoBoard.html#aafca51e49debbebb8d9a99d5f95989b2" title="Return the current number moves.">MoveNumber</a>());
<a name="l00893"></a>00893     <span class="keywordflow">if</span> (<a class="code" href="classGoBoard.html#a231c0837fea485da089a0619cd559708">m_snapshot</a>-&gt;m_moveNumber == <a class="code" href="classGoBoard.html#aafca51e49debbebb8d9a99d5f95989b2" title="Return the current number moves.">MoveNumber</a>())
<a name="l00894"></a>00894         <span class="keywordflow">return</span>;
<a name="l00895"></a>00895     <a class="code" href="classGoBoard.html#a0656b6f91327e51539fb09aee43716c1" title="Block data (stored in a stack).">m_blockList</a>-&gt;<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArrayList.html#a22b487162269ba2ebc03ceaadcfaad6d">Resize</a>(<a class="code" href="classGoBoard.html#a231c0837fea485da089a0619cd559708">m_snapshot</a>-&gt;m_blockListSize);
<a name="l00896"></a>00896     <a class="code" href="classGoBoard.html#a222faf237e7f509e5cc8e58adb8607d2">m_moves</a>-&gt;<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgArrayList.html#a22b487162269ba2ebc03ceaadcfaad6d">Resize</a>(<a class="code" href="classGoBoard.html#a231c0837fea485da089a0619cd559708">m_snapshot</a>-&gt;m_moveNumber);
<a name="l00897"></a>00897     <a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a> = <a class="code" href="classGoBoard.html#a231c0837fea485da089a0619cd559708">m_snapshot</a>-&gt;m_state;
<a name="l00898"></a>00898     <span class="keywordflow">for</span> (<a class="code" href="classGoBoard_1_1Iterator.html" title="Iterate through all points.">GoBoard::Iterator</a> it(*<span class="keyword">this</span>); it; ++it)
<a name="l00899"></a>00899     {
<a name="l00900"></a>00900         <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPoint_8h.html#a49c23409e7e51c1edc053b56d3dd248c">SgPoint</a> p = *it;
<a name="l00901"></a>00901         <span class="keywordflow">if</span> (<a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#a00185ccd3db04f9e7f5dd904da6190e8">m_block</a>[p] != 0)
<a name="l00902"></a>00902             *<a class="code" href="classGoBoard.html#abd349c7182b6fe10d9d853d80ee424de">m_state</a>.<a class="code" href="structGoBoard_1_1State.html#a00185ccd3db04f9e7f5dd904da6190e8">m_block</a>[p] = <a class="code" href="classGoBoard.html#a231c0837fea485da089a0619cd559708">m_snapshot</a>-&gt;m_blockArray[p];
<a name="l00903"></a>00903     }
<a name="l00904"></a>00904     <a class="code" href="classGoBoard.html#a1ebebb504e470488697449e224299c80" title="Checks whether all the board data structures are in a consistent state.">CheckConsistency</a>();
<a name="l00905"></a>00905 }
<a name="l00906"></a>00906 
<a name="l00907"></a>00907 <span class="comment">//----------------------------------------------------------------------------</span>
</pre></div></div>
</div>
<p>
<hr>
<div style="text-align:right;">
Sun Mar 13 2011 <a href="http://www.doxygen.org/">Doxygen</a> 1.7.1
</div>
</p>
</body>

<!-- Mirrored from fuego.sourceforge.net/fuego-doc-1.1/go-doc/GoBoard_8cpp_source.html by HTTrack Website Copier/3.x [XR&CO'2010], Wed, 25 Apr 2012 18:02:24 GMT -->
</html>
