<html>

<!-- Mirrored from fuego.sourceforge.net/fuego-doc-1.1/go-doc/GoSafetyCommands_8cpp_source.html by HTTrack Website Copier/3.x [XR&CO'2010], Wed, 25 Apr 2012 18:02:25 GMT -->
<head>
<title>Go Library: GoSafetyCommands.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head>
<body bgcolor="#ffffff">
<div class="qindex">
<a class="qindex" href="../main.html">Index</a> &nbsp;
<a class="qindex" href="index.html">Main</a> &nbsp;
<a class="qindex" href="namespaces.html">Namespaces</a> &nbsp;
<a class="qindex" href="classes.html">Classes</a> &nbsp;
<a class="qindex" href="hierarchy.html">Hierarchy</a> &nbsp;
<a class="qindex" href="annotated.html">Annotated</a> &nbsp;
<a class="qindex" href="files.html">Files</a> &nbsp;
<!--
<a class="qindex" href="namespacemembers.html">Namespace Members</a> &nbsp;>
-->
<a class="qindex" href="functions.html">Compound</a> &nbsp;
<a class="qindex" href="globals.html">Global</a> &nbsp;
<a class="qindex" href="pages.html">Pages</a> &nbsp;
</div>
<!-- Generated by Doxygen 1.7.1 -->
  <div class="navpath">
    <ul>
      <li><a class="el" href="dir_9632b5034bf30c45b537da76f0b0ae3d.html">go</a>      </li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<h1>GoSafetyCommands.cpp</h1>  </div>
</div>
<div class="contents">
<a href="GoSafetyCommands_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">//----------------------------------------------------------------------------</span><span class="comment"></span>
<a name="l00002"></a>00002 <span class="comment">/** @file GoSafetyCommands.cpp</span>
<a name="l00003"></a>00003 <span class="comment">    See GoSafetyCommands.h */</span>
<a name="l00004"></a>00004 <span class="comment">//----------------------------------------------------------------------------</span>
<a name="l00005"></a>00005 
<a name="l00006"></a>00006 <span class="preprocessor">#include &quot;<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgSystem_8h.html">SgSystem.h</a>&quot;</span>
<a name="l00007"></a>00007 <span class="preprocessor">#include &quot;<a class="code" href="GoSafetyCommands_8h.html">GoSafetyCommands.h</a>&quot;</span>
<a name="l00008"></a>00008 
<a name="l00009"></a>00009 <span class="preprocessor">#include &quot;<a class="code" href="GoBensonSolver_8h.html" title="Recognize safe stones and territories according to [Benson 1976].">GoBensonSolver.h</a>&quot;</span>
<a name="l00010"></a>00010 <span class="preprocessor">#include &quot;<a class="code" href="GoBoard_8h.html" title="Go board with basic board and blocks.">GoBoard.h</a>&quot;</span>
<a name="l00011"></a>00011 <span class="preprocessor">#include &quot;<a class="code" href="GoGtpCommandUtil_8h.html" title="Utils for Go GTP commands.">GoGtpCommandUtil.h</a>&quot;</span>
<a name="l00012"></a>00012 <span class="preprocessor">#include &quot;<a class="code" href="GoModBoard_8h.html">GoModBoard.h</a>&quot;</span>
<a name="l00013"></a>00013 <span class="preprocessor">#include &quot;<a class="code" href="GoSafetySolver_8h.html" title="Recognize safe territories using 1-vital and 2-vital definitions under alternating play from Martin M...">GoSafetySolver.h</a>&quot;</span>
<a name="l00014"></a>00014 <span class="preprocessor">#include &quot;<a class="code" href="GoSafetyUtil_8h.html" title="Utility functions for the static and search-based safety solvers.">GoSafetyUtil.h</a>&quot;</span>
<a name="l00015"></a>00015 <span class="preprocessor">#include &quot;<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgPointSet_8h.html">SgPointSet.h</a>&quot;</span>
<a name="l00016"></a>00016 
<a name="l00017"></a>00017 <span class="keyword">using namespace </span>std;
<a name="l00018"></a>00018 <span class="keyword">using</span> GoGtpCommandUtil::BlackWhiteArg;
<a name="l00019"></a>00019 
<a name="l00020"></a>00020 <span class="comment">//----------------------------------------------------------------------------</span>
<a name="l00021"></a>00021 
<a name="l00022"></a><a class="code" href="classGoSafetyCommands.html#a975397ae191758a255269d419196088a">00022</a> <a class="code" href="classGoSafetyCommands.html#a975397ae191758a255269d419196088a" title="Constructor.">GoSafetyCommands::GoSafetyCommands</a>(<span class="keyword">const</span> <a class="code" href="classGoBoard.html" title="Go board.">GoBoard</a>&amp; bd)
<a name="l00023"></a>00023     : m_bd(bd)
<a name="l00024"></a>00024 {
<a name="l00025"></a>00025 }
<a name="l00026"></a>00026 
<a name="l00027"></a><a class="code" href="classGoSafetyCommands.html#a52153e7d40a6cd623d7f6bdd51f82736">00027</a> <span class="keywordtype">void</span> <a class="code" href="classGoSafetyCommands.html#a52153e7d40a6cd623d7f6bdd51f82736">GoSafetyCommands::AddGoGuiAnalyzeCommands</a>(<a class="codeRef" doxygen="gtpengine.tags:../gtpengine-doc/" href="../gtpengine-doc/classGtpCommand.html">GtpCommand</a>&amp; cmd)
<a name="l00028"></a>00028 {
<a name="l00029"></a>00029     cmd &lt;&lt;
<a name="l00030"></a>00030         <span class="stringliteral">&quot;plist/Go Safe Dame Static/go_safe_dame_static\n&quot;</span>
<a name="l00031"></a>00031         <span class="stringliteral">&quot;gfx/Go Safe Benson/go_safe_gfx benson\n&quot;</span>
<a name="l00032"></a>00032         <span class="stringliteral">&quot;gfx/Go Safe Static/go_safe_gfx static\n&quot;</span>
<a name="l00033"></a>00033         <span class="stringliteral">&quot;gfx/Go Safe Winner/go_safe_winner\n&quot;</span>
<a name="l00034"></a>00034         ;
<a name="l00035"></a>00035 }
<a name="l00036"></a>00036 <span class="comment"></span>
<a name="l00037"></a>00037 <span class="comment">/** Return dame points after running static safety algorithm. */</span>
<a name="l00038"></a><a class="code" href="classGoSafetyCommands.html#a767b92c3c09589443792ef768d9784e9">00038</a> <span class="keywordtype">void</span> <a class="code" href="classGoSafetyCommands.html#a767b92c3c09589443792ef768d9784e9" title="Return dame points after running static safety algorithm.">GoSafetyCommands::CmdDameStatic</a>(<a class="codeRef" doxygen="gtpengine.tags:../gtpengine-doc/" href="../gtpengine-doc/classGtpCommand.html">GtpCommand</a>&amp; cmd)
<a name="l00039"></a>00039 {
<a name="l00040"></a>00040     cmd.<a class="codeRef" doxygen="gtpengine.tags:../gtpengine-doc/" href="../gtpengine-doc/classGtpCommand.html#a0b2507b917a8e979c62d911a536faa93">CheckArgNone</a>();
<a name="l00041"></a>00041     <a class="code" href="classGoModBoard.html" title="Make a const board temporarily modifiable.">GoModBoard</a> modBoard(<a class="code" href="classGoSafetyCommands.html#ae3b8bf7174b1ba0f5dea2a3871a1227d">m_bd</a>);
<a name="l00042"></a>00042     <a class="code" href="classGoBoard.html" title="Go board.">GoBoard</a>&amp; bd = modBoard.<a class="code" href="classGoModBoard.html#ae7c83bf65635367655d6a3061d54f395" title="Explicit conversion to non-const reference.">Board</a>();
<a name="l00043"></a>00043     <a class="code" href="classGoRegionBoard.html" title="GoRegionBoard provides GoRegion, GoBlock and optionally GoChain.">GoRegionBoard</a> regionAttachment(bd);
<a name="l00044"></a>00044     <a class="code" href="classGoSafetySolver.html" title="Improved static detection of safe blocks and regions Uses static rules to find 1-vital, 2-vital and safely surrounded areas.">GoSafetySolver</a> solver(bd, &amp;regionAttachment);
<a name="l00045"></a>00045     <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgBWSet.html">SgBWSet</a> safe;
<a name="l00046"></a>00046     solver.<a class="code" href="classGoSafetySolver.html#a0c662cce089fe927b18a4a6f872a8e69" title="Main function, compute safe points.">FindSafePoints</a>(&amp;safe);
<a name="l00047"></a>00047     <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgPointSet.html">SgPointSet</a> dame = <a class="code" href="namespaceGoSafetyUtil.html#a06e362560fd9186b95b1c49da28785dd" title="See FindDameAndUnsurroundablePoints.">GoSafetyUtil::FindDamePoints</a>(bd, <a class="code" href="classGoSafetyCommands.html#ae3b8bf7174b1ba0f5dea2a3871a1227d">m_bd</a>.<a class="code" href="classGoBoard.html#ae5ba22fe6a5824c02c15fcabab6bbf22">AllEmpty</a>(), safe);
<a name="l00048"></a>00048     cmd &lt;&lt; <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgWritePointSet.html">SgWritePointSet</a>(dame, <span class="stringliteral">&quot;&quot;</span>, <span class="keyword">false</span>);
<a name="l00049"></a>00049 }
<a name="l00050"></a>00050 <span class="comment"></span>
<a name="l00051"></a>00051 <span class="comment">/** Information about safe points optimized for graphical display in GoGui.</span>
<a name="l00052"></a>00052 <span class="comment">    This command is compatible with GoGui&#39;s analyze command type &quot;gfx&quot;.</span>
<a name="l00053"></a>00053 <span class="comment">    Arguments: benson|static &lt;br&gt;</span>
<a name="l00054"></a>00054 <span class="comment">    Returns: GoGui gfx commands to display safe points and additional</span>
<a name="l00055"></a>00055 <span class="comment">    information in the status line</span>
<a name="l00056"></a>00056 <span class="comment">    - black and white territory: safe points</span>
<a name="l00057"></a>00057 <span class="comment">    - Color Magenta (#980098): dame points</span>
<a name="l00058"></a>00058 <span class="comment">    - Color Red: safe for black and white (should not happen)</span>
<a name="l00059"></a>00059 <span class="comment">    - Circle: unsurroundable</span>
<a name="l00060"></a>00060 <span class="comment">    - Status line: point counts, percentage of safe points */</span>
<a name="l00061"></a><a class="code" href="classGoSafetyCommands.html#ab7a3b0bb5fdf46900360f7497519b006">00061</a> <span class="keywordtype">void</span> <a class="code" href="classGoSafetyCommands.html#ab7a3b0bb5fdf46900360f7497519b006" title="Information about safe points optimized for graphical display in GoGui.">GoSafetyCommands::CmdGfx</a>(<a class="codeRef" doxygen="gtpengine.tags:../gtpengine-doc/" href="../gtpengine-doc/classGtpCommand.html">GtpCommand</a>&amp; cmd)
<a name="l00062"></a>00062 {
<a name="l00063"></a>00063     <span class="keywordtype">string</span> type = cmd.<a class="codeRef" doxygen="gtpengine.tags:../gtpengine-doc/" href="../gtpengine-doc/classGtpCommand.html#a3b37a10966c9d2ff06bf357af148108c">Arg</a>();
<a name="l00064"></a>00064     <span class="keywordtype">int</span> totalRegions = 0;
<a name="l00065"></a>00065     <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgBWSet.html">SgBWSet</a> safe = <a class="code" href="classGoSafetyCommands.html#aee8b868ad3097b1cc962f3f8e1a0ed75">GetSafe</a>(totalRegions, type);
<a name="l00066"></a>00066     <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgPointSet.html">SgPointSet</a> dame;
<a name="l00067"></a>00067     <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgPointSet.html">SgPointSet</a> unsurroundable;
<a name="l00068"></a>00068     <a class="code" href="namespaceGoSafetyUtil.html#ae2d572cb5358d0bfc09f07062b4f755f" title="Find dame and unsurroundable points.">GoSafetyUtil::FindDameAndUnsurroundablePoints</a>(<a class="code" href="classGoSafetyCommands.html#ae3b8bf7174b1ba0f5dea2a3871a1227d">m_bd</a>, <a class="code" href="classGoSafetyCommands.html#ae3b8bf7174b1ba0f5dea2a3871a1227d">m_bd</a>.<a class="code" href="classGoBoard.html#ae5ba22fe6a5824c02c15fcabab6bbf22">AllEmpty</a>(), safe,
<a name="l00069"></a>00069                                                   &amp;dame, &amp;unsurroundable);
<a name="l00070"></a>00070     cmd &lt;&lt; <span class="stringliteral">&quot;BLACK&quot;</span>;
<a name="l00071"></a>00071     <span class="keywordflow">for</span> (<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgSetIterator.html">SgSetIterator</a> it(safe[<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgBlackWhite_8h.html#a455e66a4a6ccc0a446eb2d10814c93a5">SG_BLACK</a>]); it; ++it)
<a name="l00072"></a>00072         cmd &lt;&lt; <span class="charliteral">&#39; &#39;</span> &lt;&lt; <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/structSgWritePoint.html">SgWritePoint</a>(*it);
<a name="l00073"></a>00073     cmd &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;
<a name="l00074"></a>00074     cmd &lt;&lt; <span class="stringliteral">&quot;WHITE&quot;</span>;
<a name="l00075"></a>00075     <span class="keywordflow">for</span> (<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgSetIterator.html">SgSetIterator</a> it(safe[<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgBlackWhite_8h.html#ae2543fbfd95354255bd12a052598b3ac">SG_WHITE</a>]); it; ++it)
<a name="l00076"></a>00076         cmd &lt;&lt; <span class="charliteral">&#39; &#39;</span> &lt;&lt; <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/structSgWritePoint.html">SgWritePoint</a>(*it);
<a name="l00077"></a>00077     cmd &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;
<a name="l00078"></a>00078     cmd &lt;&lt; <span class="stringliteral">&quot;COLOR #980098&quot;</span>;
<a name="l00079"></a>00079     <span class="keywordflow">for</span> (<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgSetIterator.html">SgSetIterator</a> it(dame); it; ++it)
<a name="l00080"></a>00080         cmd &lt;&lt; <span class="charliteral">&#39; &#39;</span> &lt;&lt; <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/structSgWritePoint.html">SgWritePoint</a>(*it);
<a name="l00081"></a>00081     cmd &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;
<a name="l00082"></a>00082     cmd &lt;&lt; <span class="stringliteral">&quot;CIRCLE&quot;</span>;
<a name="l00083"></a>00083     <span class="keywordflow">for</span> (<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgSetIterator.html">SgSetIterator</a> it(unsurroundable); it; ++it)
<a name="l00084"></a>00084         cmd &lt;&lt; <span class="charliteral">&#39; &#39;</span> &lt;&lt; <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/structSgWritePoint.html">SgWritePoint</a>(*it);
<a name="l00085"></a>00085     cmd &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;
<a name="l00086"></a>00086     <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgPointSet.html">SgPointSet</a> blackAndWhite = safe[SG_WHITE] &amp; safe[SG_BLACK];
<a name="l00087"></a>00087     <span class="keywordflow">if</span> (blackAndWhite.<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgPointSet.html#a6c285bf22792aa4234370d82ac9d9790">Size</a>() &gt; 0)
<a name="l00088"></a>00088     {
<a name="l00089"></a>00089         <span class="comment">// Shouldn&#39;t happen</span>
<a name="l00090"></a>00090         cmd &lt;&lt; <span class="stringliteral">&quot;COLOR red &quot;</span>;
<a name="l00091"></a>00091         <span class="keywordflow">for</span> (<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgSetIterator.html">SgSetIterator</a> it(blackAndWhite); it; ++it)
<a name="l00092"></a>00092             cmd &lt;&lt; <span class="charliteral">&#39; &#39;</span> &lt;&lt; <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/structSgWritePoint.html">SgWritePoint</a>(*it);
<a name="l00093"></a>00093         cmd &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;
<a name="l00094"></a>00094     }
<a name="l00095"></a>00095     <span class="keywordtype">int</span> nuBlack = safe[SG_BLACK].Size();
<a name="l00096"></a>00096     <span class="keywordtype">int</span> nuWhite = safe[SG_WHITE].Size();
<a name="l00097"></a>00097     <span class="keywordtype">int</span> nuPoints = <a class="code" href="classGoSafetyCommands.html#ae3b8bf7174b1ba0f5dea2a3871a1227d">m_bd</a>.<a class="code" href="classGoBoard.html#aa981fe78112971c43a3a5b81698601b7">AllPoints</a>().<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgPointSet.html#a6c285bf22792aa4234370d82ac9d9790">Size</a>();
<a name="l00098"></a>00098     cmd &lt;&lt; <span class="stringliteral">&quot;TEXT Solver: &quot;</span> &lt;&lt; cmd.Arg(0)
<a name="l00099"></a>00099         &lt;&lt; <span class="stringliteral">&quot;  B: &quot;</span> &lt;&lt; nuBlack &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; (100 * nuBlack / nuPoints) &lt;&lt; <span class="stringliteral">&quot; %)&quot;</span>
<a name="l00100"></a>00100         &lt;&lt; <span class="stringliteral">&quot;  W: &quot;</span> &lt;&lt; nuWhite &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; (100 * nuWhite / nuPoints) &lt;&lt; <span class="stringliteral">&quot; %)&quot;</span>
<a name="l00101"></a>00101         &lt;&lt; <span class="stringliteral">&quot;  Both: &quot;</span> &lt;&lt; (nuBlack + nuWhite)
<a name="l00102"></a>00102         &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; (100 * (nuBlack + nuWhite) / nuPoints) &lt;&lt; <span class="stringliteral">&quot; %)&quot;</span>
<a name="l00103"></a>00103         &lt;&lt; <span class="stringliteral">&quot;  Regions: &quot;</span> &lt;&lt; totalRegions;
<a name="l00104"></a>00104 }
<a name="l00105"></a>00105 <span class="comment"></span>
<a name="l00106"></a>00106 <span class="comment">/** List of safe points.</span>
<a name="l00107"></a>00107 <span class="comment">    If no color is given, safe points of both colors are listed.</span>
<a name="l00108"></a>00108 <span class="comment">    Arguments: benson|static [black|white]&lt;br&gt;</span>
<a name="l00109"></a>00109 <span class="comment">    Returns: number of point followed bu list of points in one line. */</span>
<a name="l00110"></a><a class="code" href="classGoSafetyCommands.html#ab171594dc19840f376fb629aeabf031f">00110</a> <span class="keywordtype">void</span> <a class="code" href="classGoSafetyCommands.html#ab171594dc19840f376fb629aeabf031f" title="List of safe points.">GoSafetyCommands::CmdSafe</a>(<a class="codeRef" doxygen="gtpengine.tags:../gtpengine-doc/" href="../gtpengine-doc/classGtpCommand.html">GtpCommand</a>&amp; cmd)
<a name="l00111"></a>00111 {
<a name="l00112"></a>00112     cmd.<a class="codeRef" doxygen="gtpengine.tags:../gtpengine-doc/" href="../gtpengine-doc/classGtpCommand.html#af3482da5c9625d015c785f19bdf0b156">CheckNuArgLessEqual</a>(2);
<a name="l00113"></a>00113     <span class="keywordtype">string</span> type = cmd.<a class="codeRef" doxygen="gtpengine.tags:../gtpengine-doc/" href="../gtpengine-doc/classGtpCommand.html#a3b37a10966c9d2ff06bf357af148108c">Arg</a>(0);
<a name="l00114"></a>00114     <span class="keywordtype">int</span> totalRegions = 0;
<a name="l00115"></a>00115     <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgBWSet.html">SgBWSet</a> safe = <a class="code" href="classGoSafetyCommands.html#aee8b868ad3097b1cc962f3f8e1a0ed75">GetSafe</a>(totalRegions, type);
<a name="l00116"></a>00116     <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgPointSet.html">SgPointSet</a> <span class="keyword">set</span> =
<a name="l00117"></a>00117         (cmd.<a class="codeRef" doxygen="gtpengine.tags:../gtpengine-doc/" href="../gtpengine-doc/classGtpCommand.html#ac6a36739753d41e740693500eb7741db">NuArg</a>() == 2 ? safe[<a class="code" href="namespaceGoGtpCommandUtil.html#a0562e48181690753f2d84d780fb1ad0f">BlackWhiteArg</a>(cmd, 1)] : safe.<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgBWSet.html#aba8e21917e0ece9ca2d51d801d750e42">Both</a>());
<a name="l00118"></a>00118     cmd &lt;&lt; <span class="keyword">set</span>.Size();
<a name="l00119"></a>00119     <span class="keywordflow">for</span> (<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgSetIterator.html">SgSetIterator</a> it(<span class="keyword">set</span>); it; ++it)
<a name="l00120"></a>00120         cmd &lt;&lt; <span class="charliteral">&#39; &#39;</span> &lt;&lt; <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/structSgWritePoint.html">SgWritePoint</a>(*it);
<a name="l00121"></a>00121 }
<a name="l00122"></a>00122 
<a name="l00123"></a><a class="code" href="classGoSafetyCommands.html#ab39976e0e6012b756df6ca44d07956dd">00123</a> <span class="keywordtype">void</span> <a class="code" href="classGoSafetyCommands.html#ab39976e0e6012b756df6ca44d07956dd">GoSafetyCommands::CmdWinner</a>(<a class="codeRef" doxygen="gtpengine.tags:../gtpengine-doc/" href="../gtpengine-doc/classGtpCommand.html">GtpCommand</a>&amp; cmd)
<a name="l00124"></a>00124 {
<a name="l00125"></a>00125     cmd.<a class="codeRef" doxygen="gtpengine.tags:../gtpengine-doc/" href="../gtpengine-doc/classGtpCommand.html#a0b2507b917a8e979c62d911a536faa93">CheckArgNone</a>();
<a name="l00126"></a>00126     <span class="keyword">const</span> <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgBoardColor_8h.html#aca5cd4186da7ac70497156e7f0fcfe91">SgEmptyBlackWhite</a> winner = <a class="code" href="namespaceGoSafetyUtil.html#a4b44e32ca01ed2b28894aa6379e97523" title="Check if one player has already won.">GoSafetyUtil::GetWinner</a>(<a class="code" href="classGoSafetyCommands.html#ae3b8bf7174b1ba0f5dea2a3871a1227d">m_bd</a>);
<a name="l00127"></a>00127     <span class="keywordflow">if</span> (winner == <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgBlackWhite_8h.html#a455e66a4a6ccc0a446eb2d10814c93a5">SG_BLACK</a>)
<a name="l00128"></a>00128         cmd &lt;&lt; <span class="stringliteral">&quot;black&quot;</span>;
<a name="l00129"></a>00129     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (winner == <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgBlackWhite_8h.html#ae2543fbfd95354255bd12a052598b3ac">SG_WHITE</a>)
<a name="l00130"></a>00130         cmd &lt;&lt; <span class="stringliteral">&quot;white&quot;</span>;
<a name="l00131"></a>00131     <span class="keywordflow">else</span>
<a name="l00132"></a>00132         cmd &lt;&lt; <span class="stringliteral">&quot;unknown&quot;</span>;
<a name="l00133"></a>00133 }
<a name="l00134"></a>00134 
<a name="l00135"></a><a class="code" href="classGoSafetyCommands.html#aee8b868ad3097b1cc962f3f8e1a0ed75">00135</a> <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgBWSet.html">SgBWSet</a> <a class="code" href="classGoSafetyCommands.html#aee8b868ad3097b1cc962f3f8e1a0ed75">GoSafetyCommands::GetSafe</a>(<span class="keywordtype">int</span>&amp; totalRegions, <span class="keyword">const</span> <span class="keywordtype">string</span>&amp; type)
<a name="l00136"></a>00136 {
<a name="l00137"></a>00137     <a class="code" href="classGoModBoard.html" title="Make a const board temporarily modifiable.">GoModBoard</a> modBoard(<a class="code" href="classGoSafetyCommands.html#ae3b8bf7174b1ba0f5dea2a3871a1227d">m_bd</a>);
<a name="l00138"></a>00138     <a class="code" href="classGoBoard.html" title="Go board.">GoBoard</a>&amp; bd = modBoard.<a class="code" href="classGoModBoard.html#ae7c83bf65635367655d6a3061d54f395" title="Explicit conversion to non-const reference.">Board</a>();
<a name="l00139"></a>00139     <a class="code" href="classGoRegionBoard.html" title="GoRegionBoard provides GoRegion, GoBlock and optionally GoChain.">GoRegionBoard</a> regionAttachment(bd);
<a name="l00140"></a>00140     <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgBWSet.html">SgBWSet</a> safe;
<a name="l00141"></a>00141     <span class="keywordflow">if</span> (type == <span class="stringliteral">&quot;benson&quot;</span>)
<a name="l00142"></a>00142     {
<a name="l00143"></a>00143         <a class="code" href="classGoBensonSolver.html" title="Benson&amp;#39;s classic algorithm for finding unconditionally alive blocks.">GoBensonSolver</a> solver(bd, &amp;regionAttachment);
<a name="l00144"></a>00144         solver.<a class="code" href="classGoBensonSolver.html#aa53a16e5f75713e6fcfb68e666f00979" title="Main function, compute safe points.">FindSafePoints</a>(&amp;safe);
<a name="l00145"></a>00145     }
<a name="l00146"></a>00146     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (type == <span class="stringliteral">&quot;static&quot;</span>)
<a name="l00147"></a>00147     {
<a name="l00148"></a>00148         <a class="code" href="classGoSafetySolver.html" title="Improved static detection of safe blocks and regions Uses static rules to find 1-vital, 2-vital and safely surrounded areas.">GoSafetySolver</a> solver(bd, &amp;regionAttachment);
<a name="l00149"></a>00149         solver.<a class="code" href="classGoSafetySolver.html#a0c662cce089fe927b18a4a6f872a8e69" title="Main function, compute safe points.">FindSafePoints</a>(&amp;safe);
<a name="l00150"></a>00150     }
<a name="l00151"></a>00151     <span class="keywordflow">else</span>
<a name="l00152"></a>00152         <span class="keywordflow">throw</span> <a class="codeRef" doxygen="gtpengine.tags:../gtpengine-doc/" href="../gtpengine-doc/classGtpFailure.html">GtpFailure</a>() &lt;&lt; <span class="stringliteral">&quot;invalid safety solver: &quot;</span> &lt;&lt; type;
<a name="l00153"></a>00153     <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgPointSet.html">SgPointSet</a> proved = safe.<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgBWSet.html#aba8e21917e0ece9ca2d51d801d750e42">Both</a>();
<a name="l00154"></a>00154     <span class="keywordflow">for</span> (<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgBWIterator.html">SgBWIterator</a> it; it; ++it)
<a name="l00155"></a>00155     {
<a name="l00156"></a>00156         <a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/SgBlackWhite_8h.html#afd337f4ec449af4cfe657b21993d556d">SgBlackWhite</a> c = *it;
<a name="l00157"></a>00157         <span class="keywordflow">for</span> (<a class="codeRef" doxygen="smartgame.tags:../smartgame-doc/" href="../smartgame-doc/classSgVectorIteratorOf.html">SgVectorIteratorOf&lt;GoRegion&gt;</a> it(regionAttachment.<a class="code" href="classGoRegionBoard.html#a886e5b1ac7d8f788d2d34499f278ee73" title="All GoRegion&amp;#39;s of given color.">AllRegions</a>(c));
<a name="l00158"></a>00158              it; ++it)
<a name="l00159"></a>00159             <span class="keywordflow">if</span> ((*it)-&gt;Points().SubsetOf(proved))
<a name="l00160"></a>00160                 ++totalRegions;
<a name="l00161"></a>00161     }
<a name="l00162"></a>00162     <span class="keywordflow">return</span> safe;
<a name="l00163"></a>00163 }
<a name="l00164"></a>00164 
<a name="l00165"></a><a class="code" href="classGoSafetyCommands.html#a0886612226b81909f51e10a658134f03">00165</a> <span class="keywordtype">void</span> <a class="code" href="classGoSafetyCommands.html#a0886612226b81909f51e10a658134f03">GoSafetyCommands::Register</a>(<a class="codeRef" doxygen="gtpengine.tags:../gtpengine-doc/" href="../gtpengine-doc/classGtpEngine.html">GtpEngine</a>&amp; e)
<a name="l00166"></a>00166 {
<a name="l00167"></a>00167     <a class="code" href="classGoSafetyCommands.html#a0886612226b81909f51e10a658134f03">Register</a>(e, <span class="stringliteral">&quot;go_safe&quot;</span>, &amp;<a class="code" href="classGoSafetyCommands.html#ab171594dc19840f376fb629aeabf031f" title="List of safe points.">GoSafetyCommands::CmdSafe</a>);
<a name="l00168"></a>00168     <a class="code" href="classGoSafetyCommands.html#a0886612226b81909f51e10a658134f03">Register</a>(e, <span class="stringliteral">&quot;go_safe_dame_static&quot;</span>, &amp;<a class="code" href="classGoSafetyCommands.html#a767b92c3c09589443792ef768d9784e9" title="Return dame points after running static safety algorithm.">GoSafetyCommands::CmdDameStatic</a>);
<a name="l00169"></a>00169     <a class="code" href="classGoSafetyCommands.html#a0886612226b81909f51e10a658134f03">Register</a>(e, <span class="stringliteral">&quot;go_safe_gfx&quot;</span>, &amp;<a class="code" href="classGoSafetyCommands.html#ab7a3b0bb5fdf46900360f7497519b006" title="Information about safe points optimized for graphical display in GoGui.">GoSafetyCommands::CmdGfx</a>);
<a name="l00170"></a>00170     <a class="code" href="classGoSafetyCommands.html#a0886612226b81909f51e10a658134f03">Register</a>(e, <span class="stringliteral">&quot;go_safe_winner&quot;</span>, &amp;<a class="code" href="classGoSafetyCommands.html#ab39976e0e6012b756df6ca44d07956dd">GoSafetyCommands::CmdWinner</a>);
<a name="l00171"></a>00171 }
<a name="l00172"></a>00172 
<a name="l00173"></a><a class="code" href="classGoSafetyCommands.html#ab376bc06c4b78ac69ba4584c7e184918">00173</a> <span class="keywordtype">void</span> <a class="code" href="classGoSafetyCommands.html#a0886612226b81909f51e10a658134f03">GoSafetyCommands::Register</a>(<a class="codeRef" doxygen="gtpengine.tags:../gtpengine-doc/" href="../gtpengine-doc/classGtpEngine.html">GtpEngine</a>&amp; engine,
<a name="l00174"></a>00174                                 <span class="keyword">const</span> std::string&amp; command,
<a name="l00175"></a>00175                                 <a class="codeRef" doxygen="gtpengine.tags:../gtpengine-doc/" href="../gtpengine-doc/classGtpCallback.html">GtpCallback&lt;GoSafetyCommands&gt;::Method</a> method)
<a name="l00176"></a>00176 {
<a name="l00177"></a>00177     engine.<a class="codeRef" doxygen="gtpengine.tags:../gtpengine-doc/" href="../gtpengine-doc/classGtpEngine.html#a092329fdc01b2d16a79ac8f111e2c8e9">Register</a>(command,
<a name="l00178"></a>00178                     <span class="keyword">new</span> <a class="codeRef" doxygen="gtpengine.tags:../gtpengine-doc/" href="../gtpengine-doc/classGtpCallback.html">GtpCallback&lt;GoSafetyCommands&gt;</a>(<span class="keyword">this</span>, method));
<a name="l00179"></a>00179 }
<a name="l00180"></a>00180 
<a name="l00181"></a>00181 <span class="comment">//----------------------------------------------------------------------------</span>
</pre></div></div>
</div>
<p>
<hr>
<div style="text-align:right;">
Sun Mar 13 2011 <a href="http://www.doxygen.org/">Doxygen</a> 1.7.1
</div>
</p>
</body>

<!-- Mirrored from fuego.sourceforge.net/fuego-doc-1.1/go-doc/GoSafetyCommands_8cpp_source.html by HTTrack Website Copier/3.x [XR&CO'2010], Wed, 25 Apr 2012 18:02:25 GMT -->
</html>
